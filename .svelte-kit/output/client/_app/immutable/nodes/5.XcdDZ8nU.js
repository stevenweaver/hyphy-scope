import"../chunks/CWj6FrbW.js";import"../chunks/Dh1LkfYh.js";import{o as st}from"../chunks/BVXFiTq-.js";import{p as ot,i as e,q as f,A as Ue,y as ee,o as r,j as Pe,z as mt,f as b,c as o,r as s,a as y,m as it,s as a,x as lt,n as V,t as A,v as $e,e as L,B as Xe,E as Qe,$ as ft,w as yt}from"../chunks/CGZSrXyu.js";import{s as C,e as W,h as gt}from"../chunks/BzHdtkot.js";import{i as O,b as Me}from"../chunks/JwmFF-xm.js";import{r as Ie,e as de,i as he,a as at,k as bt,b as Ne,g as _t,l as St,c as zt}from"../chunks/BM8ST8i7.js";import{i as rt}from"../chunks/ui6rPYHM.js";import{z as we,D as Ae}from"../chunks/CKo-VmNz.js";import{a as Ze,s as et}from"../chunks/BCAIgc4A.js";import{s as Fe}from"../chunks/BR0iTFIE.js";import{p as kt}from"../chunks/BWiVFVQA.js";import{d as tt}from"../chunks/CH6E2OhH.js";import{b as Et}from"../chunks/VyfRdQgz.js";var xt=b('<div class="loading svelte-85ohhs">Loading BUSTED data...</div>'),Dt=b('<div class="summary-tiles svelte-85ohhs"><div class="tile svelte-85ohhs"><div class="tile-number svelte-85ohhs"> </div> <div class="tile-description svelte-85ohhs">Sequences</div></div> <div class="tile svelte-85ohhs"><div class="tile-number svelte-85ohhs"> </div> <div class="tile-description svelte-85ohhs">Sites</div></div> <div class="tile svelte-85ohhs"><div class="tile-number svelte-85ohhs"> </div> <div class="tile-description svelte-85ohhs">p-value</div></div> <div class="tile svelte-85ohhs"><div class="tile-number svelte-85ohhs"> </div> <div class="tile-description svelte-85ohhs">Test Statistic</div></div> <div class="tile svelte-85ohhs"><div class="tile-number svelte-85ohhs"> </div> <div class="tile-description svelte-85ohhs">Selection Detected</div></div></div>'),Lt=b(`<div class="plot-section svelte-85ohhs"><h3 class="svelte-85ohhs">Evidence Ratios for Positive Selection</h3> <p class="plot-description svelte-85ohhs">Sites with higher evidence ratios show stronger statistical support for positive selection.
          Thresholds: Strong (≥100), Moderate (≥10), Weak (≥3).</p> <div class="plot-container svelte-85ohhs"></div></div>`),Rt=b('<div class="plot-section svelte-85ohhs"><h3 class="svelte-85ohhs">Synonymous Substitution Rates</h3> <p class="plot-description svelte-85ohhs">Rate of synonymous substitutions across sites, indicating background mutation rate.</p> <div class="plot-container svelte-85ohhs"></div></div>'),Tt=b('<span class="sort-indicator svelte-85ohhs"><!></span>'),Bt=b('<th><div class="header-content svelte-85ohhs"><span> </span> <!></div></th>'),Ct=b('<td class="svelte-85ohhs"> </td>'),Ut=b("<tr></tr>"),Pt=b("<button> </button>"),Mt=b('<div class="pagination svelte-85ohhs"><div class="pagination-info svelte-85ohhs"> </div> <div class="pagination-controls svelte-85ohhs"><button class="page-btn svelte-85ohhs">‹‹</button> <button class="page-btn svelte-85ohhs">‹</button> <!> <button class="page-btn svelte-85ohhs">›</button> <button class="page-btn svelte-85ohhs">››</button></div> <div class="page-size-control svelte-85ohhs"><label for="page-size">Per page:</label> <select id="page-size" class="svelte-85ohhs"><option>25</option><option>50</option><option>100</option></select></div></div>'),wt=b(`<div class="analysis-info svelte-85ohhs"><h2 class="svelte-85ohhs">BUSTED Analysis Results</h2> <p><strong>Branch-site Unrestricted Statistical Test for Episodic Diversification</strong> tests whether a gene has experienced positive selection at some sites along some branches.</p></div> <!> <div class="controls svelte-85ohhs"><div class="control-group svelte-85ohhs"><label for="evidence-threshold" class="svelte-85ohhs">Evidence threshold:</label> <input type="number" id="evidence-threshold" min="1" max="1000" step="10" class="svelte-85ohhs"/></div> <div class="control-group svelte-85ohhs"><label class="svelte-85ohhs"><input type="checkbox"/> Show only sites above threshold</label></div> <div class="control-group svelte-85ohhs"><label for="visualization-type" class="svelte-85ohhs">Show plots:</label> <select id="visualization-type" class="svelte-85ohhs"><option>Evidence Ratios</option><option>Synonymous Rates</option><option>All Plots</option></select></div></div> <div class="plot-section svelte-85ohhs"><h3 class="svelte-85ohhs">Model Comparison</h3> <p class="plot-description svelte-85ohhs">Comparison of baseline and alternative models. The likelihood ratio test determines 
        if positive selection is present.</p> <div class="plot-container svelte-85ohhs"></div></div> <!> <!> <div class="table-section svelte-85ohhs"><h3 class="svelte-85ohhs">Site-Level Results</h3> <p class="table-description svelte-85ohhs">Statistical evidence for positive selection at each site. Click column headers to sort.</p> <div class="table-container svelte-85ohhs"><table class="svelte-85ohhs"><thead><tr></tr></thead><tbody></tbody></table></div> <!></div> <div class="citation svelte-85ohhs"><h3 class="svelte-85ohhs">Citation</h3> <code class="svelte-85ohhs">Murrell B, Weaver S, Smith MD, Wertheim JO, Murrell S, Aylward A, Eren K, Pollner T, 
        Martin DP, Smith DM, Scheffler K, Kosakovsky Pond SL. Gene-wide identification of 
        episodic selection. Mol Biol Evol. 2015;32(5):1365-71.</code></div>`,1),At=b('<div class="busted-visualization svelte-85ohhs"><!></div>');function Ft(ze,ue){ot(ue,!1);const d=f(),u=f(),R=f(),K=f(),k=f(),H=f(),ne=f();let U=kt(ue,"data",8),ie=f(100),le=f(!1),E=f("evidence"),P=f("Evidence Ratio"),q=f("desc"),h=f(1),T=f(50),F=f(),$=f(),Y=f();function ve(t){var m,x,I,te,re;const l=t["test results"],i=t.fits;return{sequences:((m=t.input)==null?void 0:m.sequences)||0,sites:((x=t.input)==null?void 0:x.sites)||0,pValue:(l==null?void 0:l["p-value"])||1,testStatistic:(l==null?void 0:l["test statistic"])||0,baselineLogL:((I=i==null?void 0:i["Baseline MG94xREV"])==null?void 0:I["log-likelihood"])||0,alternativeLogL:((te=i==null?void 0:i["Alternative model"])==null?void 0:te["log-likelihood"])||0,hasSelection:((l==null?void 0:l["p-value"])||1)<=.05,branchesTestedCount:((re=t.tested)==null?void 0:re.length)||0}}function pe(t){const l=t["Evidence Ratios"],i=t["Synonymous site-posteriors"];return l?Object.keys(l).map(Number).sort((x,I)=>x-I).map(x=>{const I=l[x]||0,te=(i==null?void 0:i[x])||0;return{site:x,partition:1,"Evidence Ratio":I,"Synonymous Rate":te,Selection:me(I)}}):[]}function ae(t){const l=t.fits;if(!l)return null;const i=l["Baseline MG94xREV"],m=l["Alternative model"];return{baseline:{logL:(i==null?void 0:i["log-likelihood"])||0,parameters:(i==null?void 0:i.parameters)||0,AIC:(i==null?void 0:i.AIC)||0},alternative:{logL:(m==null?void 0:m["log-likelihood"])||0,parameters:(m==null?void 0:m.parameters)||0,AIC:(m==null?void 0:m.AIC)||0},lrt:2*(((m==null?void 0:m["log-likelihood"])||0)-((i==null?void 0:i["log-likelihood"])||0))}}function me(t){return t>=100?"Strong Positive":t>=10?"Moderate Positive":t>=3?"Weak Positive":"Neutral/Purifying"}function fe(t){switch(t){case"Strong Positive":return"#e3243b";case"Moderate Positive":return"#ff6b35";case"Weak Positive":return"#ffa500";default:return"#666"}}function ye(t){if(!t.length)return null;const l=t.map(i=>({...i,cappedRatio:Math.min(i["Evidence Ratio"],1e3)}));return we({title:"Evidence Ratios for Positive Selection",subtitle:"Sites with higher ratios show stronger evidence for selection",width:1e3,height:300,marginLeft:60,x:{label:"Site",grid:!0},y:{label:"Evidence Ratio (capped at 1000)",grid:!0},color:{type:"ordinal",domain:["Strong Positive","Moderate Positive","Weak Positive","Neutral/Purifying"],range:["#e3243b","#ff6b35","#ffa500","#666"]},marks:[Ae([100],{stroke:"#e3243b",strokeDasharray:"5,5"}),Ae([10],{stroke:"#ff6b35",strokeDasharray:"3,3"}),Ae([3],{stroke:"#ffa500",strokeDasharray:"2,2"}),tt(l,{x:"site",y:"cappedRatio",fill:"Selection",r:3,title:i=>`Site ${i.site}
Evidence Ratio: ${i["Evidence Ratio"].toFixed(2)}
Category: ${i.Selection}`}),Ze(l,{x:"site",y:"cappedRatio",stroke:"#999",strokeWidth:1})]})}function ge(t){return t.length?we({title:"Synonymous Substitution Rates",subtitle:"Rate of synonymous substitutions across sites",width:1e3,height:300,marginLeft:60,x:{label:"Site",grid:!0},y:{label:"Synonymous Rate",grid:!0},marks:[Ze(t,{x:"site",y:"Synonymous Rate",stroke:"#1f77b4",strokeWidth:2}),tt(t.filter((l,i)=>i%20===0),{x:"site",y:"Synonymous Rate",fill:"#1f77b4",r:3,title:l=>`Site ${l.site}
Synonymous Rate: ${l["Synonymous Rate"].toFixed(4)}`})]}):null}function ke(t){if(!t)return null;const l=[{model:"Baseline",logL:t.baseline.logL,AIC:t.baseline.AIC,parameters:t.baseline.parameters},{model:"Alternative",logL:t.alternative.logL,AIC:t.alternative.AIC,parameters:t.alternative.parameters}];return we({title:"Model Comparison",subtitle:`LRT = ${t.lrt.toFixed(2)}`,width:500,height:300,marginLeft:100,x:{type:"band",domain:["Baseline","Alternative"],label:"Model"},y:{label:"Log Likelihood",grid:!0},marks:[Et(l,{x:"model",y:"logL",fill:"#1f77b4",title:i=>`${i.model}
Log-L: ${i.logL.toFixed(2)}
AIC: ${i.AIC.toFixed(2)}
Parameters: ${i.parameters}`})]})}st(()=>{e(u).length>0&&be()});function be(){if(e(F)&&(e(E)==="evidence"||e(E)==="all")){const t=ye(e(u));t&&(Ue(F,e(F).innerHTML=""),e(F).appendChild(t))}if(e($)&&(e(E)==="synonymous"||e(E)==="all")){const t=ge(e(u));t&&(Ue($,e($).innerHTML=""),e($).appendChild(t))}if(e(Y)&&e(R)){const t=ke(e(R));t&&(Ue(Y,e(Y).innerHTML=""),e(Y).appendChild(t))}}function Ee(t){e(P)===t?r(q,e(q)==="asc"?"desc":"asc"):(r(P,t),r(q,"desc")),r(h,1)}function xe(t,l){return typeof t!="number"?String(t):l==="Evidence Ratio"?t<.001?t.toExponential(2):t.toFixed(2):l==="Synonymous Rate"?t.toFixed(4):t.toString()}const _e=[{key:"site",label:"Site",sortable:!0},{key:"Evidence Ratio",label:"Evidence Ratio",sortable:!0},{key:"Synonymous Rate",label:"Synonymous Rate",sortable:!0},{key:"Selection",label:"Selection Category",sortable:!0}];ee(()=>Pe(U()),()=>{r(d,U()?ve(U()):null)}),ee(()=>Pe(U()),()=>{r(u,U()?pe(U()):[])}),ee(()=>Pe(U()),()=>{r(R,U()?ae(U()):null)}),ee(()=>(e(le),e(u),e(ie)),()=>{r(K,e(le)?e(u).filter(t=>t["Evidence Ratio"]>=e(ie)):e(u))}),ee(()=>(e(K),e(P),e(q)),()=>{r(k,[...e(K)].sort((t,l)=>{const i=t[e(P)],m=l[e(P)],x=typeof i=="number"&&typeof m=="number"?i-m:String(i).localeCompare(String(m));return e(q)==="asc"?x:-x}))}),ee(()=>(e(k),e(T)),()=>{r(H,Math.ceil(e(k).length/e(T)))}),ee(()=>(e(k),e(h),e(T)),()=>{r(ne,e(k).slice((e(h)-1)*e(T),e(h)*e(T)))}),ee(()=>e(u),()=>{e(u).length>0&&be()}),mt(),rt();var ce=At(),n=o(ce);{var p=t=>{var l=xt();y(t,l)},_=t=>{var l=wt(),i=a(lt(l),2);{var m=c=>{var v=Dt(),g=o(v),B=o(g),D=o(B,!0);s(B),V(2),s(g);var z=a(g,2),J=o(z),j=o(J,!0);s(J),V(2),s(z);var N=a(z,2),M=o(N),X=o(M,!0);s(M),V(2),s(N);var G=a(N,2),Q=o(G),se=o(Q,!0);s(Q),V(2),s(G);var w=a(G,2),S=o(w),oe=o(S,!0);s(S),V(2),s(w),s(v),A((Z,Se)=>{C(D,(e(d),L(()=>e(d).sequences))),C(j,(e(d),L(()=>e(d).sites))),Fe(M,`color: ${e(d),L(()=>e(d).hasSelection?"#e3243b":"#666")??""}`),C(X,Z),C(se,Se),Fe(S,`color: ${e(d),L(()=>e(d).hasSelection?"#e3243b":"#666")??""}`),C(oe,(e(d),L(()=>e(d).hasSelection?"YES":"NO")))},[()=>(e(d),L(()=>e(d).pValue.toExponential(3))),()=>(e(d),L(()=>e(d).testStatistic.toFixed(2)))]),y(c,v)};O(i,c=>{e(d)&&c(m)})}var x=a(i,2),I=o(x),te=a(o(I),2);Ie(te),s(I);var re=a(I,2),Ve=o(re),We=o(Ve);Ie(We),V(),s(Ve),s(re);var Oe=a(re,2),De=a(o(Oe),2);A(()=>{e(E),$e(()=>{})});var Le=o(De);Le.value=Le.__value="evidence";var Re=a(Le);Re.value=Re.__value="synonymous";var He=a(Re);He.value=He.__value="all",s(De),s(Oe),s(x);var Te=a(x,2),nt=a(o(Te),4);Me(nt,c=>r(Y,c),()=>e(Y)),s(Te);var qe=a(Te,2);{var vt=c=>{var v=Lt(),g=a(o(v),4);Me(g,B=>r(F,B),()=>e(F)),s(v),y(c,v)};O(qe,c=>{(e(E)==="evidence"||e(E)==="all")&&c(vt)})}var Je=a(qe,2);{var ct=c=>{var v=Rt(),g=a(o(v),4);Me(g,B=>r($,B),()=>e($)),s(v),y(c,v)};O(Je,c=>{(e(E)==="synonymous"||e(E)==="all")&&c(ct)})}var Ge=a(Je,2),Be=a(o(Ge),4),Ke=o(Be),Ce=o(Ke),Ye=o(Ce);de(Ye,5,()=>_e,he,(c,v)=>{var g=Bt();let B;var D=o(g),z=o(D),J=o(z,!0);s(z);var j=a(z,2);{var N=M=>{var X=Tt(),G=o(X);{var Q=w=>{var S=Xe();A(()=>C(S,e(q)==="asc"?"↑":"↓")),y(w,S)},se=w=>{var S=Xe("↕");y(w,S)};O(G,w=>{e(P),e(v),L(()=>e(P)===e(v).key)?w(Q):w(se,!1)})}s(X),y(M,X)};O(j,M=>{e(v),L(()=>e(v).sortable)&&M(N)})}s(D),s(g),A(M=>{B=et(g,1,"svelte-85ohhs",null,B,M),C(J,(e(v),L(()=>e(v).label)))},[()=>({sortable:e(v).sortable,sorted:e(P)===e(v).key})]),W("click",g,()=>e(v).sortable&&Ee(e(v).key)),y(c,g)}),s(Ye),s(Ce);var je=a(Ce);de(je,5,()=>e(ne),he,(c,v)=>{var g=Ut();de(g,5,()=>_e,he,(B,D)=>{var z=Ct(),J=o(z,!0);s(z),A((j,N)=>{Fe(z,`color: ${j??""}`),C(J,N)},[()=>(e(D),e(v),L(()=>e(D).key==="Selection"?fe(e(v)[e(D).key]):"inherit")),()=>(e(v),e(D),L(()=>xe(e(v)[e(D).key],e(D).key)))]),y(B,z)}),s(g),y(c,g)}),s(je),s(Ke),s(Be);var dt=a(Be,2);{var ht=c=>{var v=Mt(),g=o(v),B=o(g);s(g);var D=a(g,2),z=o(D),J=a(z,2),j=a(J,2);de(j,1,()=>(e(H),e(h),L(()=>Array.from({length:Math.min(5,e(H))},(S,oe)=>Math.max(1,e(h)-2)+oe).filter(S=>S<=e(H)))),he,(S,oe)=>{var Z=Pt();let Se;var ut=o(Z,!0);s(Z),A(pt=>{Se=et(Z,1,"page-btn svelte-85ohhs",null,Se,pt),C(ut,e(oe))},[()=>({active:e(oe)===e(h)})]),W("click",Z,()=>r(h,e(oe))),y(S,Z)});var N=a(j,2),M=a(N,2);s(D);var X=a(D,2),G=a(o(X),2);A(()=>{e(T),$e(()=>{e(h)})});var Q=o(G);Q.value=Q.__value=25;var se=a(Q);se.value=se.__value=50;var w=a(se);w.value=w.__value=100,s(G),s(X),s(v),A(S=>{C(B,`Showing ${(e(h)-1)*e(T)+1}-${S??""} 
            of ${e(k),L(()=>e(k).length)??""} sites`),z.disabled=e(h)===1,J.disabled=e(h)===1,N.disabled=e(h)===e(H),M.disabled=e(h)===e(H)},[()=>(e(h),e(T),e(k),L(()=>Math.min(e(h)*e(T),e(k).length)))]),W("click",z,()=>r(h,1)),W("click",J,()=>Qe(h,-1)),W("click",N,()=>Qe(h)),W("click",M,()=>r(h,e(H))),Ne(G,()=>e(T),S=>r(T,S)),W("change",G,()=>r(h,1)),y(c,v)};O(dt,c=>{e(H)>1&&c(ht)})}s(Ge),V(2),at(te,()=>e(ie),c=>r(ie,c)),bt(We,()=>e(le),c=>r(le,c)),Ne(De,()=>e(E),c=>r(E,c)),y(t,l)};O(n,t=>{U()?t(_,!1):t(p)})}s(ce),y(ze,ce),it()}var $t=b('<meta name="description" content="Interactive visualization of BUSTED (Branch-site Unrestricted Statistical Test for Episodic Diversification) analysis results"/>'),It=b("<option> </option>"),Nt=b('<div class="status loading svelte-m5loyz"><p>Loading data...</p></div>'),Vt=b('<div class="status error svelte-m5loyz"><p> </p> <button class="svelte-m5loyz">Dismiss</button></div>'),Wt=b('<div class="visualization-section svelte-m5loyz"><!></div>'),Ot=b('<div class="no-data svelte-m5loyz"><h3>No Data Loaded</h3> <p>Please load BUSTED analysis data using one of the options above to see the visualization.</p></div>'),Ht=b(`<div class="busted-demo svelte-m5loyz"><div class="header svelte-m5loyz"><h1 class="svelte-m5loyz">BUSTED Analysis</h1> <p class="svelte-m5loyz">Interactive visualization of Branch-site Unrestricted Statistical Test for Episodic Diversification.
      BUSTED tests whether a gene has experienced positive selection at some sites along some branches.</p></div> <div class="data-loading svelte-m5loyz"><h2>Load Data</h2> <div class="loading-options svelte-m5loyz"><div class="option svelte-m5loyz"><h3 class="svelte-m5loyz">Test Data</h3> <div class="test-data-controls svelte-m5loyz"><select class="svelte-m5loyz"></select> <button class="svelte-m5loyz"> </button></div> <p class="help svelte-m5loyz">Load example data to explore the visualization features.</p></div> <div class="option svelte-m5loyz"><h3 class="svelte-m5loyz">Load from URL</h3> <div class="url-input svelte-m5loyz"><input type="url" placeholder="Enter JSON file URL..." class="svelte-m5loyz"/> <button class="svelte-m5loyz">Load</button></div> <p class="help svelte-m5loyz">Load BUSTED results from a remote JSON file.</p></div> <div class="option svelte-m5loyz"><h3 class="svelte-m5loyz">Upload File</h3> <input type="file" accept=".json,.gz" class="svelte-m5loyz"/> <p class="help svelte-m5loyz">Upload a local BUSTED JSON file from your computer.</p></div></div> <!> <!></div> <!> <div class="usage-info svelte-m5loyz"><h2 class="svelte-m5loyz">About BUSTED</h2> <h3 class="svelte-m5loyz">What is BUSTED?</h3> <p><strong>BUSTED (Branch-site Unrestricted Statistical Test for Episodic Diversification)</strong> is a likelihood ratio test that provides evidence for positive selection occurring at 
      some sites along some branches in a phylogeny. Unlike site-specific methods, BUSTED 
      tests for selection at the gene level.</p> <h3 class="svelte-m5loyz">Key Features</h3> <ul class="svelte-m5loyz"><li class="svelte-m5loyz"><strong>Gene-wide test:</strong> Tests whether ANY sites have experienced positive selection</li> <li class="svelte-m5loyz"><strong>No multiple testing:</strong> Single test per gene, avoiding multiple comparison issues</li> <li class="svelte-m5loyz"><strong>Flexible framework:</strong> Can test specific branches or all branches</li> <li class="svelte-m5loyz"><strong>Evidence ratios:</strong> Provides site-level evidence for positive selection</li> <li class="svelte-m5loyz"><strong>Robust method:</strong> Uses likelihood ratio test with known statistical properties</li></ul> <h3 class="svelte-m5loyz">Interpretation</h3> <ul class="svelte-m5loyz"><li class="svelte-m5loyz"><strong>p-value &lt; 0.05:</strong> Evidence of positive selection somewhere in the gene</li> <li class="svelte-m5loyz"><strong>Evidence Ratios:</strong> Site-level support for positive selection</li> <li class="svelte-m5loyz"><strong>≥100:</strong> Strong evidence for positive selection at site</li> <li class="svelte-m5loyz"><strong>≥10:</strong> Moderate evidence for positive selection</li> <li class="svelte-m5loyz"><strong>≥3:</strong> Weak evidence for positive selection</li></ul> <h3 class="svelte-m5loyz">Using This Component</h3> <pre class="svelte-m5loyz"><code class="svelte-m5loyz">import &#123; BustedVisualization &#125; from 'hyphy-scope';

&lt;BustedVisualization data=&#123;bustedResults&#125; /&gt;</code></pre> <h3 class="svelte-m5loyz">Data Format</h3> <p>The component expects BUSTED analysis results in JSON format with the following structure:</p> <ul class="svelte-m5loyz"><li class="svelte-m5loyz"><code class="svelte-m5loyz">test results</code> - Overall test statistics and p-value</li> <li class="svelte-m5loyz"><code class="svelte-m5loyz">Evidence Ratios</code> - Site-level evidence for positive selection</li> <li class="svelte-m5loyz"><code class="svelte-m5loyz">Synonymous site-posteriors</code> - Synonymous substitution rates</li> <li class="svelte-m5loyz"><code class="svelte-m5loyz">fits</code> - Model comparison statistics</li></ul> <h3 class="svelte-m5loyz">Method Comparison</h3> <p>BUSTED differs from other HyPhy methods:</p> <ul class="svelte-m5loyz"><li class="svelte-m5loyz"><strong>vs. FEL/MEME:</strong> Tests gene-wide rather than site-by-site</li> <li class="svelte-m5loyz"><strong>vs. aBSREL:</strong> Tests all branches rather than individual branches</li> <li class="svelte-m5loyz"><strong>vs. RELAX:</strong> Tests for selection rather than relaxation of selection</li></ul></div></div>`);function ls(ze,ue){ot(ue,!1);let d=f(null),u=f(!1),R=f(""),K=f(""),k=f("busted");const H=[{value:"fel",label:"FEL"},{value:"meme",label:"MEME"},{value:"absrel",label:"aBSREL"},{value:"busted",label:"BUSTED"},{value:"relax",label:"RELAX"},{value:"slac",label:"SLAC"}];st(async()=>{await ne()});async function ne(){try{r(u,!0),r(R,""),r(d,await _t(e(k)))}catch(n){r(R,`Failed to load ${e(k).toUpperCase()} test data: ${n.message}`),r(d,null)}finally{r(u,!1)}}async function U(){if(!e(K).trim()){r(R,"Please enter a valid URL");return}try{r(u,!0),r(R,""),r(d,await St(e(K)))}catch(n){r(R,`Failed to load data from URL: ${n.message}`),r(d,null)}finally{r(u,!1)}}async function ie(n){var _;const p=(_=n.target.files)==null?void 0:_[0];if(p)try{r(u,!0),r(R,""),r(d,await zt(p))}catch(t){r(R,`Failed to load file: ${t.message}`),r(d,null)}finally{r(u,!1)}}function le(){r(R,"")}rt();var E=Ht();gt(n=>{var p=$t();ft.title="BUSTED Analysis - HyPhy Scope",y(n,p)});var P=a(o(E),2),q=a(o(P),2),h=o(q),T=a(o(h),2),F=o(T);A(()=>{e(k),$e(()=>{})}),de(F,5,()=>H,he,(n,p)=>{var _=It(),t=o(_,!0);s(_);var l={};A(()=>{C(t,e(p).label),l!==(l=e(p).value)&&(_.value=(_.__value=e(p).value)??"")}),y(n,_)}),s(F);var $=a(F,2),Y=o($,!0);s($),s(T),V(2),s(h);var ve=a(h,2),pe=a(o(ve),2),ae=o(pe);Ie(ae);var me=a(ae,2);s(pe),V(2),s(ve);var fe=a(ve,2),ye=a(o(fe),2);V(2),s(fe),s(q);var ge=a(q,2);{var ke=n=>{var p=Nt();y(n,p)};O(ge,n=>{e(u)&&n(ke)})}var be=a(ge,2);{var Ee=n=>{var p=Vt(),_=o(p),t=o(_,!0);s(_);var l=a(_,2);s(p),A(()=>C(t,e(R))),W("click",l,le),y(n,p)};O(be,n=>{e(R)&&n(Ee)})}s(P);var xe=a(P,2);{var _e=n=>{var p=Wt(),_=o(p);Ft(_,{get data(){return e(d)}}),s(p),y(n,p)},ce=n=>{var p=yt(),_=lt(p);{var t=l=>{var i=Ot();y(l,i)};O(_,l=>{e(u)||l(t)},!0)}y(n,p)};O(xe,n=>{e(d)?n(_e):n(ce,!1)})}V(2),s(E),A(n=>{$.disabled=e(u),C(Y,e(u)?"Loading...":"Load Test Data"),ae.disabled=e(u),me.disabled=n,ye.disabled=e(u)},[()=>e(u)||!e(K).trim()]),Ne(F,()=>e(k),n=>r(k,n)),W("click",$,ne),at(ae,()=>e(K),n=>r(K,n)),W("click",me,U),W("change",ye,ie),y(ze,E),it()}export{ls as component};
