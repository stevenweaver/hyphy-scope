import{h as v,i as T,a as Y,m as B,b as I,c as f,M as R,r as S,d as k,e as A,f as L,g as x,j as C,k as m,l as _}from"./CdoYSR-b.js";import{m as D,a as j}from"./COmpcr1Y.js";const O={ariaLabel:"bar"};class q extends R{constructor(a,t,s={},r=O){super(a,t,s,r),S(this,s),k(this,s)}render(a,t,s,r,e){const{rx:n,ry:c,rx1y1:l,rx1y2:h,rx2y1:w,rx2y2:g}=this,y=this._x(t,s,r),o=this._y(t,s,r),d=this._width(t,s,r),u=this._height(t,s,r);return A("svg:g",e).call(L,this,r,e).call(this._transform,this,t).call(M=>M.selectAll().data(a).enter().call(l||h||w||g?p=>p.append("path").call(x,this).call(C,y,o,b(y,d),b(o,u),this).call(m,this,s):p=>p.append("rect").call(x,this).attr("x",y).attr("width",d).attr("y",o).attr("height",u).call(_,"rx",n).call(_,"ry",c).call(m,this,s))).node()}_x(a,{x:t},{marginLeft:s}){const{insetLeft:r}=this;return t?e=>t[e]+r:s+r}_y(a,{y:t},{marginTop:s}){const{insetTop:r}=this;return t?e=>t[e]+r:s+r}_width({x:a},{x:t},{marginRight:s,marginLeft:r,width:e}){const{insetLeft:n,insetRight:c}=this,l=t&&a?a.bandwidth():e-s-r;return Math.max(0,l-n-c)}_height({y:a},{y:t},{marginTop:s,marginBottom:r,height:e}){const{insetTop:n,insetBottom:c}=this,l=t&&a?a.bandwidth():e-s-r;return Math.max(0,l-n-c)}}function b(i,a){return typeof i=="function"&&typeof a=="function"?t=>i(t)+a(t):typeof i=="function"?t=>i(t)+a:typeof a=="function"?t=>i+a(t):i+a}class z extends q{constructor(a,t={},s){const{x:r,y1:e,y2:n}=t;super(a,{y1:{value:e,scale:"y"},y2:{value:n,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},t,s)}_transform(a,t,{y:s}){a.call(I,t,{y:s},0,0)}_y({y:a},{y1:t,y2:s},{marginTop:r}){const{insetTop:e}=this;return f(a)?r+e:n=>Math.min(t[n],s[n])+e}_height({y:a},{y1:t,y2:s},{marginTop:r,marginBottom:e,height:n}){const{insetTop:c,insetBottom:l}=this;return f(a)?n-r-e-c-l:h=>Math.max(0,Math.abs(s[h]-t[h])-c-l)}}function G(i,a={}){return v(a)||(a={...a,x:Y,y2:T}),new z(i,D(B(j(a))))}export{G as b};
