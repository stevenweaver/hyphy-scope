import{ad as ot,ae as ci,af as ht,ag as li,W as ui,ah as fi,ai as $,_ as k,aj as at,Z as rt,a0 as pi,ak as xi,al as yi,am as di,N as M,an as bi,ao as mi,ap as vi,aq as ki,ar as wi,as as Ti,at as Ci,a4 as g,au as bt,av as Ni,aw as Ei,ax as X,ay as Si,E as mt,az as Bi,aA as gi,aB as Ii,aC as Mi,aD as Xi,aE as zi,i as vt,a8 as Pi,aF as Gi,aG as ct,aH as Ri}from"./BWWySPzG.js";import{p as kt,B as wt,c as L,a as Yi,b as Fi,d as Ai,e as $i}from"./v5XMuwi6.js";function j(t,i){let n=0;for(let s of t)s!=null&&(s=+s)>=s&&++n;return n}function Oi(t){return Math.max(1,Math.ceil(Math.log(j(t))/Math.LN2)+1)}function Li(t,i,n){const s=j(t),e=ot(t,.75)-ot(t,.25);return s&&e?Math.ceil((n-i)/(2*e*Math.pow(s,-1/3))):1}function Tt(t,i,n){const s=j(t),e=ci(t);return s&&e?Math.ceil((n-i)*Math.cbrt(s)/(3.49*e)):1}class Ct{constructor(i,n){this._context=i,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,n){switch(i=+i,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,n,i,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,i,this._y0,i,n);break}}this._x0=i,this._y0=n}}function ji(t){return new Ct(t,!0)}function Di(t){return new Ct(t,!1)}function w(){}function Nt(t){this._context=t}Nt.prototype={areaStart:w,areaEnd:w,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:kt(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function Zi(t){return new Nt(t)}function Et(t){this._context=t}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:kt(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function qi(t){return new Et(t)}function St(t,i){this._basis=new wt(t),this._beta=i}St.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,n=t.length-1;if(n>0)for(var s=t[0],e=i[0],_=t[n]-s,o=i[n]-e,h=-1,a;++h<=n;)a=h/n,this._basis.point(this._beta*t[h]+(1-this._beta)*(s+a*_),this._beta*i[h]+(1-this._beta)*(e+a*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}};const Ki=function t(i){function n(s){return i===1?new wt(s):new St(s,i)}return n.beta=function(s){return t(+s)},n}(.85);function z(t,i,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function D(t,i){this._context=t,this._k=(1-i)/6}D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:z(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2,this._x1=t,this._y1=i;break;case 2:this._point=3;default:z(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Vi=function t(i){function n(s){return new D(s,i)}return n.tension=function(s){return t(+s)},n}(0);function Z(t,i){this._context=t,this._k=(1-i)/6}Z.prototype={areaStart:w,areaEnd:w,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:z(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Hi=function t(i){function n(s){return new Z(s,i)}return n.tension=function(s){return t(+s)},n}(0);function q(t,i){this._context=t,this._k=(1-i)/6}q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:z(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Wi=function t(i){function n(s){return new q(s,i)}return n.tension=function(s){return t(+s)},n}(0);function K(t,i,n){var s=t._x1,e=t._y1,_=t._x2,o=t._y2;if(t._l01_a>ht){var h=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,a=3*t._l01_a*(t._l01_a+t._l12_a);s=(s*h-t._x0*t._l12_2a+t._x2*t._l01_2a)/a,e=(e*h-t._y0*t._l12_2a+t._y2*t._l01_2a)/a}if(t._l23_a>ht){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);_=(_*l+t._x1*t._l23_2a-i*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(s,e,_,o,t._x2,t._y2)}function Bt(t,i){this._context=t,this._alpha=i}Bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:K(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Ji=function t(i){function n(s){return i?new Bt(s,i):new D(s,0)}return n.alpha=function(s){return t(+s)},n}(.5);function gt(t,i){this._context=t,this._alpha=i}gt.prototype={areaStart:w,areaEnd:w,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:K(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Qi=function t(i){function n(s){return i?new gt(s,i):new Z(s,0)}return n.alpha=function(s){return t(+s)},n}(.5);function It(t,i){this._context=t,this._alpha=i}It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:K(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Ui=function t(i){function n(s){return i?new It(s,i):new q(s,0)}return n.alpha=function(s){return t(+s)},n}(.5);function Mt(t){this._context=t}Mt.prototype={areaStart:w,areaEnd:w,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,i){t=+t,i=+i,this._point?this._context.lineTo(t,i):(this._point=1,this._context.moveTo(t,i))}};function tn(t){return new Mt(t)}function lt(t){return t<0?-1:1}function ut(t,i,n){var s=t._x1-t._x0,e=i-t._x1,_=(t._y1-t._y0)/(s||e<0&&-0),o=(n-t._y1)/(e||s<0&&-0),h=(_*e+o*s)/(s+e);return(lt(_)+lt(o))*Math.min(Math.abs(_),Math.abs(o),.5*Math.abs(h))||0}function ft(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function O(t,i,n){var s=t._x0,e=t._y0,_=t._x1,o=t._y1,h=(_-s)/3;t._context.bezierCurveTo(s+h,e+h*i,_-h,o-h*n,_,o)}function P(t){this._context=t}P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:O(this,this._t0,ft(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var n=NaN;if(t=+t,i=+i,!(t===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,O(this,ft(this,n=ut(this,t,i)),n);break;default:O(this,this._t0,n=ut(this,t,i));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=n}}};function Xt(t){this._context=new zt(t)}(Xt.prototype=Object.create(P.prototype)).point=function(t,i){P.prototype.point.call(this,i,t)};function zt(t){this._context=t}zt.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,s,e,_){this._context.bezierCurveTo(i,t,s,n,_,e)}};function nn(t){return new P(t)}function sn(t){return new Xt(t)}function Pt(t){this._context=t}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),n===2)this._context.lineTo(t[1],i[1]);else for(var s=pt(t),e=pt(i),_=0,o=1;o<n;++_,++o)this._context.bezierCurveTo(s[0][_],e[0][_],s[1][_],e[1][_],t[o],i[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,i){this._x.push(+t),this._y.push(+i)}};function pt(t){var i,n=t.length-1,s,e=new Array(n),_=new Array(n),o=new Array(n);for(e[0]=0,_[0]=2,o[0]=t[0]+2*t[1],i=1;i<n-1;++i)e[i]=1,_[i]=4,o[i]=4*t[i]+2*t[i+1];for(e[n-1]=2,_[n-1]=7,o[n-1]=8*t[n-1]+t[n],i=1;i<n;++i)s=e[i]/_[i-1],_[i]-=s,o[i]-=s*o[i-1];for(e[n-1]=o[n-1]/_[n-1],i=n-2;i>=0;--i)e[i]=(o[i]-e[i+1])/_[i];for(_[n-1]=(t[n]+e[n-1])/2,i=0;i<n-1;++i)_[i]=2*t[i+1]-e[i+1];return[e,_]}function en(t){return new Pt(t)}const _n=new Map([["basis",Yi],["basis-closed",Zi],["basis-open",qi],["bundle",Ki],["bump-x",ji],["bump-y",Di],["cardinal",Vi],["cardinal-closed",Hi],["cardinal-open",Wi],["catmull-rom",Ji],["catmull-rom-closed",Qi],["catmull-rom-open",Ui],["linear",L],["linear-closed",tn],["monotone-x",nn],["monotone-y",sn],["natural",en],["step",Fi],["step-after",Ai],["step-before",$i]]);function on(t=L,i){if(typeof t=="function")return t;const n=_n.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(i!==void 0){if("beta"in n)return n.beta(i);if("tension"in n)return n.tension(i);if("alpha"in n)return n.alpha(i)}return n}function Mn(t=xt,i){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?xt:on(t,i)}function xt(t){return L(t)}function hn(t={y:"count"},i={}){[t,i]=cn(t,i);const{x:n,y:s}=i;return rn(ln(n,i,vt),null,null,s,t,li(i))}function an(t,i,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:s=di}=n,e={filter:null};return n[i]!=null&&(e[i]=s),n[`${i}1`]!=null&&(e[`${i}1`]=s),n[`${i}2`]!=null&&(e[`${i}2`]=s),t(e,n)}function Xn(t={}){return an(hn,"y",ui(t,"x"))}function rn(t,i,n,s,{data:e=xi,filter:_=fi,sort:o,reverse:h,...a}={},l={}){t=yt(t),i=yt(i),a=fn(a,l),e=Yt(e,vt),o=o==null?void 0:Gt("sort",o,l),_=_==null?void 0:Rt("filter",_,l),s!=null&&$(a,"y","y1","y2")&&(s=null);const[c,u]=k(t),[r,f]=k(t),[p,b]=k(i),[v,x]=k(i),[H,W]=s!=null?[s,"y"]:[],[J,At]=k(H),{x:$t,y:Ot,z:G,fill:Q,stroke:U,x1:Lt,x2:jt,y1:Dt,y2:Zt,domain:Nn,cumulative:En,thresholds:Sn,interval:Bn,...qt}=l,[Kt,Vt]=k(G),[tt]=at(Q),[it]=at(U),[Ht,Wt]=k(tt),[Jt,Qt]=k(it);return{..."z"in l&&{z:Kt||G},..."fill"in l&&{fill:Ht||Q},..."stroke"in l&&{stroke:Jt||U},...pi(qt,(y,R,Y)=>{const F=Pi(g(y,H),Y==null?void 0:Y[W]),N=g(y,G),E=g(y,tt),S=g(y,it),B=Gi(a,{z:N,fill:E,stroke:S}),A=[],nt=[],Ut=F&&At([]),ti=N&&Vt([]),ii=E&&Wt([]),ni=S&&Qt([]),st=t&&u([]),si=t&&f([]),et=i&&b([]),ei=i&&x([]),_i=yn(t,i,y);let oi=0;for(const T of a)T.initialize(y);o&&o.initialize(y),_&&_.initialize(y);for(const T of R){const _t=[];for(const C of a)C.scope("facet",T);o&&o.scope("facet",T),_&&_.scope("facet",T);for(const[C,hi]of ct(T,B))for(const[ai,I]of ct(hi,F))for(const[d,m]of _i(I))if(B&&(m.z=C),!(_&&!_.reduce(d,m))){_t.push(oi++),nt.push(e.reduceIndex(d,y,m)),F&&Ut.push(ai),N&&ti.push(B===N?C:N[(d.length>0?d:I)[0]]),E&&ii.push(B===E?C:E[(d.length>0?d:I)[0]]),S&&ni.push(B===S?C:S[(d.length>0?d:I)[0]]),st&&(st.push(m.x1),si.push(m.x2)),et&&(et.push(m.y1),ei.push(m.y2));for(const ri of a)ri.reduce(d,m);o&&o.reduce(d,m)}A.push(_t)}return Ri(A,o,h),{data:nt,facets:A}}),...!$(a,"x")&&(c?{x1:c,x2:r,x:rt(c,r)}:{x:$t,x1:Lt,x2:jt}),...!$(a,"y")&&(p?{y1:p,y2:v,y:rt(p,v)}:{y:Ot,y1:Dt,y2:Zt}),...J&&{[W]:J},...Object.fromEntries(a.map(({name:y,output:R})=>[y,R]))}}function cn({cumulative:t,domain:i,thresholds:n,interval:s,...e},_){return[e,{cumulative:t,domain:i,thresholds:n,interval:s,..._}]}function ln(t,{cumulative:i,domain:n,thresholds:s,interval:e},_){return t={...yi(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=i),t.thresholds===void 0&&(t.thresholds=s),t.interval===void 0&&(t.interval=e),t.value===void 0&&(t.value=_),t.thresholds=un(t.thresholds,t.interval),t}function yt(t){if(t==null)return;const{value:i,cumulative:n,domain:s=M,thresholds:e}=t,_=o=>{let h=g(o,i),a;if(bt(h)||xn(e)){h=Ni(h,Ei,Float64Array);let[c,u]=typeof s=="function"?s(h):s,r=typeof e=="function"&&!X(e)?e(h,c,u):e;typeof r=="number"&&(r=Si(c,u,r)),X(r)&&(s===M&&(c=r.floor(c),u=r.offset(r.floor(u))),r=r.range(c,r.offset(u))),a=r}else{h=mt(h);let[c,u]=typeof s=="function"?s(h):s,r=typeof e=="function"&&!X(e)?e(h,c,u):e;if(typeof r=="number")if(s===M){let f=Bi(c,u,r);if(isFinite(f))if(f>0){let p=Math.round(c/f),b=Math.round(u/f);p*f<=c||--p,b*f>u||++b;let v=b-p+1;r=new Float64Array(v);for(let x=0;x<v;++x)r[x]=(p+x)*f}else if(f<0){f=-f;let p=Math.round(c*f),b=Math.round(u*f);p/f<=c||--p,b/f>u||++b;let v=b-p+1;r=new Float64Array(v);for(let x=0;x<v;++x)r[x]=(p+x)/f}else r=[c];else r=[c]}else r=gi(c,u,r);else X(r)&&(s===M&&(c=r.floor(c),u=r.offset(r.floor(u))),r=r.range(c,r.offset(u)));a=r}const l=[];if(a.length===1)l.push([a[0],a[0]]);else for(let c=1;c<a.length;++c)l.push([a[c-1],a[c]]);return l.bin=(n<0?bn:n>0?dn:V)(l,a,h),l};return _.label=bi(i),_}function un(t,i,n=dt){if(t===void 0)return i===void 0?n:Ti(i);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return Li;case"scott":return Tt;case"sturges":return Oi;case"auto":return dt}return Ci(t)}return t}function fn(t,i){return mi(t,i,Gt)}function Gt(t,i,n){return ki(t,i,n,Rt)}function Rt(t,i,n){return wi(t,i,n,Yt)}function Yt(t,i){return vi(t,i,pn)}function pn(t){switch(`${t}`.toLowerCase()){case"x":return mn;case"x1":return kn;case"x2":return wn;case"y":return vn;case"y1":return Tn;case"y2":return Cn;case"z":return Ii}throw new Error(`invalid bin reduce: ${t}`)}function dt(t,i,n){return Math.min(200,Tt(t,i,n))}function xn(t){return Mi(t)||Xi(t)&&bt(t)}function yn(t,i,n){const s=t==null?void 0:t(n),e=i==null?void 0:i(n);return s&&e?function*(_){const o=s.bin(_);for(const[h,[a,l]]of s.entries()){const c=e.bin(o[h]);for(const[u,[r,f]]of e.entries())yield[c[u],{data:n,x1:a,y1:r,x2:l,y2:f}]}}:s?function*(_){const o=s.bin(_);for(const[h,[a,l]]of s.entries())yield[o[h],{data:n,x1:a,x2:l}]}:function*(_){const o=e.bin(_);for(const[h,[a,l]]of e.entries())yield[o[h],{data:n,y1:a,y2:l}]}}function V(t,i,n){return i=mt(i),s=>{var _;const e=t.map(()=>[]);for(const o of s)(_=e[zi(i,n[o])-1])==null||_.push(o);return e}}function dn(t,i,n){const s=V(t,i,n);return e=>{const _=s(e);for(let o=1,h=_.length;o<h;++o){const a=_[o-1],l=_[o];for(const c of a)l.push(c)}return _}}function bn(t,i,n){const s=V(t,i,n);return e=>{const _=s(e);for(let o=_.length-2;o>=0;--o){const h=_[o+1],a=_[o];for(const l of h)a.push(l)}return _}}function Ft(t,i){const n=(+t+ +i)/2;return t instanceof Date?new Date(n):n}const mn={reduceIndex(t,i,{x1:n,x2:s}){return Ft(n,s)}},vn={reduceIndex(t,i,{y1:n,y2:s}){return Ft(n,s)}},kn={reduceIndex(t,i,{x1:n}){return n}},wn={reduceIndex(t,i,{x2:n}){return n}},Tn={reduceIndex(t,i,{y1:n}){return n}},Cn={reduceIndex(t,i,{y2:n}){return n}};export{Xn as a,hn as b,xt as c,on as d,Mn as m};
