import{t as D,G as E,I as L,ak as T,aK as G,W as C,ay as X,aA as $,aE as H,aC as W,a1 as M,N as F,a0 as J,a3 as k}from"./BrBLfwSL.js";import{n as K}from"./CdTtAD6V.js";import{a as _,M as Y,E as P,e as j,f as z,b as O,G as V,g as R,H as Z,F as q,v as x,k as B,a9 as Q,J as b}from"./CdoYSR-b.js";import{w as U,d as ee,e as ne,f as p,x as te,y as re,s as ae,a as le,g as ue,m as ie,c as N}from"./DVwWuO-M.js";import{m as se,a as oe}from"./COmpcr1Y.js";function Ee(l,t,n=!1,r=!1,o=!1){var a=l,s="";D(()=>{var i=T;if(s===(s=t()??"")){E&&L();return}if(i.nodes_start!==null&&(G(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),s!==""){if(E){C.data;for(var f=L(),u=f;f!==null&&(f.nodeType!==X||f.data!=="");)u=f,f=$(f);if(f===null)throw H(),W;M(C,u),a=F(f);return}var d=s+"";n?d=`<svg>${d}</svg>`:r&&(d=`<math>${d}</math>`);var e=J(d);if((n||r)&&(e=k(e)),M(k(e),e.lastChild),n||r)for(;k(e);)a.before(k(e));else a.before(e)}})}function fe(l,t){for(var n,r=-1,o=l.length;++r<o;){var a=t(l[r]);a!==void 0&&(n=n===void 0?a:n+a)}return n}var ce=NaN;function de(l,t){var n=l==null?0:l.length;return n?fe(l,t)/n:ce}function Le(l){return de(l,K)}function pe(l,t,n){var r=null,o=p(!0),a=null,s=ne,i=null,f=U(u);l=typeof l=="function"?l:l===void 0?te:p(+l),t=typeof t=="function"?t:t===void 0?p(0):p(+t),n=typeof n=="function"?n:n===void 0?re:p(+n);function u(e){var c,m,h,y=(e=ee(e)).length,v,g=!1,S,w=new Array(y),A=new Array(y);for(a==null&&(i=s(S=f())),c=0;c<=y;++c){if(!(c<y&&o(v=e[c],c,e))===g)if(g=!g)m=c,i.areaStart(),i.lineStart();else{for(i.lineEnd(),i.lineStart(),h=c-1;h>=m;--h)i.point(w[h],A[h]);i.lineEnd(),i.areaEnd()}g&&(w[c]=+l(v,c,e),A[c]=+t(v,c,e),i.point(r?+r(v,c,e):w[c],n?+n(v,c,e):A[c]))}if(S)return i=null,S+""||null}function d(){return ae().defined(o).curve(s).context(a)}return u.x=function(e){return arguments.length?(l=typeof e=="function"?e:p(+e),r=null,u):l},u.x0=function(e){return arguments.length?(l=typeof e=="function"?e:p(+e),u):l},u.x1=function(e){return arguments.length?(r=e==null?null:typeof e=="function"?e:p(+e),u):r},u.y=function(e){return arguments.length?(t=typeof e=="function"?e:p(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t=typeof e=="function"?e:p(+e),u):t},u.y1=function(e){return arguments.length?(n=e==null?null:typeof e=="function"?e:p(+e),u):n},u.lineX0=u.lineY0=function(){return d().x(l).y(t)},u.lineY1=function(){return d().x(l).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(e){return arguments.length?(o=typeof e=="function"?e:p(!!e),u):o},u.curve=function(e){return arguments.length?(s=e,a!=null&&(i=s(a)),u):s},u.context=function(e){return arguments.length?(e==null?a=i=null:i=s(a=e),u):a},u}const he={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class me extends Y{constructor(t,n={}){const{x1:r,y1:o,x2:a,y2:s,z:i,curve:f,tension:u}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:o,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0},z:{value:P(n),optional:!0}},n,he),this.z=i,this.curve=ue(f,u)}filter(t){return t}render(t,n,r,o,a){const{x1:s,y1:i,x2:f=s,y2:u=i}=r;return j("svg:g",a).call(z,this,o,a).call(O,this,n,0,0).call(d=>d.selectAll().data(V(t,[s,i,f,u],this,r)).enter().append("path").call(R,this).call(Z,this,r).attr("d",pe().curve(this.curve).defined(e=>e>=0).x0(e=>s[e]).y0(e=>i[e]).x1(e=>f[e]).y1(e=>u[e]))).node()}}function Ce(l,t){const{x:n=_,...r}=le(t);return new me(l,se(oe({...r,x1:n,x2:void 0},n===_?"y2":"y")))}const ve={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class ye extends Y{constructor(t,n={}){const{x1:r,y1:o,x2:a,y2:s,curve:i,tension:f}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:o,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,ve),this.curve=ie(i,f),q(this,n)}project(t,n,r){this.curve!==N&&super.project(t,n,r)}render(t,n,r,o,a){const{x1:s,y1:i,x2:f=s,y2:u=i}=r,{curve:d}=this;return j("svg:g",a).call(z,this,o,a).call(O,this,n).call(e=>e.selectAll().data(t).enter().append("path").call(R,this).attr("d",d===N&&a.projection?ge(a.path(),s,i,f,u):c=>{const m=x(),h=d(m);return h.lineStart(),h.point(s[c],i[c]),h.point(f[c],u[c]),h.lineEnd(),m}).call(B,this,r).call(Q,this,r,a)).node()}}function ge(l,t,n,r,o){return t=b(t),n=b(n),r=b(r),o=b(o),a=>l({type:"LineString",coordinates:[[t[a],n[a]],[r[a],o[a]]]})}function Me(l,{x:t,x1:n,x2:r,y:o,y1:a,y2:s,...i}={}){return[n,r]=I(t,n,r),[a,s]=I(o,a,s),new ye(l,{...i,x1:n,x2:r,y1:a,y2:s})}function I(l,t,n){if(l===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[l]:[l,n];if(n===void 0)return[l,t]}return[t,n]}export{Ce as a,Ee as h,Me as l,Le as m};
