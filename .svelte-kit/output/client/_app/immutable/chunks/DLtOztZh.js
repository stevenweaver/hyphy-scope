import{J as Ee,aM as w1,aN as bf,aO as b1,aP as Sr,aQ as jt,aR as xf,aS as pu,a7 as x1,aT as E1,aU as A1,aV as T1,aW as N1}from"./BWWySPzG.js";import{s as Tu,e as S1,a as Yo}from"./v5XMuwi6.js";function I1(t){return Ee(w1(t).call(document.documentElement))}const Nu={capture:!0,passive:!1};function Su(t){t.preventDefault(),t.stopImmediatePropagation()}function Ef(t){var r=t.document.documentElement,i=Ee(t).on("dragstart.drag",Su,Nu);"onselectstart"in r?i.on("selectstart.drag",Su,Nu):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function Af(t,r){var i=t.document.documentElement,u=Ee(t).on("dragstart.drag",null);r&&(u.on("click.drag",Su,Nu),setTimeout(function(){u.on("click.drag",null)},0)),"onselectstart"in i?u.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var O1=1e-12;function Vo(t){return((t=Math.exp(t))+1/t)/2}function C1(t){return((t=Math.exp(t))-1/t)/2}function M1(t){return((t=Math.exp(2*t))-1)/(t+1)}const L1=function t(r,i,u){function l(a,f){var c=a[0],d=a[1],_=a[2],x=f[0],T=f[1],N=f[2],$=x-c,G=T-d,H=$*$+G*G,C,y;if(H<O1)y=Math.log(N/_)/r,C=function(de){return[c+de*$,d+de*G,_*Math.exp(r*de*y)]};else{var R=Math.sqrt(H),P=(N*N-_*_+u*H)/(2*_*i*R),z=(N*N-_*_-u*H)/(2*N*i*R),K=Math.log(Math.sqrt(P*P+1)-P),ue=Math.log(Math.sqrt(z*z+1)-z);y=(ue-K)/r,C=function(de){var ce=de*y,Fe=Vo(K),me=_/(i*R)*(Fe*M1(r*ce+K)-C1(K));return[c+me*$,d+me*G,_*Fe/Vo(r*ce+K)]}}return C.duration=y*1e3*r/Math.SQRT2,C}return l.rho=function(a){var f=Math.max(.001,+a),c=f*f,d=c*c;return t(f,c,d)},l}(Math.SQRT2,2,4),du=t=>()=>t;function P1(t,{sourceEvent:r,target:i,selection:u,mode:l,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},selection:{value:u,enumerable:!0,configurable:!0},mode:{value:l,enumerable:!0,configurable:!0},_:{value:a}})}function R1(t){t.stopImmediatePropagation()}function gu(t){t.preventDefault(),t.stopImmediatePropagation()}var Xo={name:"drag"},_u={name:"space"},nr={name:"handle"},rr={name:"center"};const{abs:ko,max:Je,min:Qe}=Math;function Ko(t){return[+t[0],+t[1]]}function Iu(t){return[Ko(t[0]),Ko(t[1])]}var vu={},mu={},z1={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ou),input:function(t){return t==null?null:Iu(t)},output:function(t){return t}},Dt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Jo={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},B1={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},F1={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ou(t){return{type:t}}function U1(t){return!t.ctrlKey&&!t.button}function W1(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function $1(){return navigator.maxTouchPoints||"ontouchstart"in this}function yu(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function H1(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function G1(){return q1(z1)}function q1(t){var r=W1,i=U1,u=$1,l=!0,a=bf("start","brush","end"),f=6,c;function d(C){var y=C.property("__brush",H).selectAll(".overlay").data([Ou("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Dt.overlay).merge(y).each(function(){var P=yu(this).extent;Ee(this).attr("x",P[0][0]).attr("y",P[0][1]).attr("width",P[1][0]-P[0][0]).attr("height",P[1][1]-P[0][1])}),C.selectAll(".selection").data([Ou("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Dt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var R=C.selectAll(".handle").data(t.handles,function(P){return P.type});R.exit().remove(),R.enter().append("rect").attr("class",function(P){return"handle handle--"+P.type}).attr("cursor",function(P){return Dt[P.type]}),C.each(_).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",N).filter(u).on("touchstart.brush",N).on("touchmove.brush",$).on("touchend.brush touchcancel.brush",G).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.move=function(C,y,R){C.tween?C.on("start.brush",function(P){x(this,arguments).beforestart().start(P)}).on("interrupt.brush end.brush",function(P){x(this,arguments).end(P)}).tween("brush",function(){var P=this,z=P.__brush,K=x(P,arguments),ue=z.selection,de=t.input(typeof y=="function"?y.apply(this,arguments):y,z.extent),ce=b1(ue,de);function Fe(me){z.selection=me===1&&de===null?null:ce(me),_.call(P),K.brush()}return ue!==null&&de!==null?Fe:Fe(1)}):C.each(function(){var P=this,z=arguments,K=P.__brush,ue=t.input(typeof y=="function"?y.apply(P,z):y,K.extent),de=x(P,z).beforestart();Sr(P),K.selection=ue===null?null:ue,_.call(P),de.start(R).brush(R).end(R)})},d.clear=function(C,y){d.move(C,null,y)};function _(){var C=Ee(this),y=yu(this).selection;y?(C.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),C.selectAll(".handle").style("display",null).attr("x",function(R){return R.type[R.type.length-1]==="e"?y[1][0]-f/2:y[0][0]-f/2}).attr("y",function(R){return R.type[0]==="s"?y[1][1]-f/2:y[0][1]-f/2}).attr("width",function(R){return R.type==="n"||R.type==="s"?y[1][0]-y[0][0]+f:f}).attr("height",function(R){return R.type==="e"||R.type==="w"?y[1][1]-y[0][1]+f:f})):C.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function x(C,y,R){var P=C.__brush.emitter;return P&&(!R||!P.clean)?P:new T(C,y,R)}function T(C,y,R){this.that=C,this.args=y,this.state=C.__brush,this.active=0,this.clean=R}T.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(C,y){return this.starting?(this.starting=!1,this.emit("start",C,y)):this.emit("brush",C),this},brush:function(C,y){return this.emit("brush",C,y),this},end:function(C,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",C,y)),this},emit:function(C,y,R){var P=Ee(this.that).datum();a.call(C,this.that,new P1(C,{sourceEvent:y,target:d,selection:t.output(this.state.selection),mode:R,dispatch:a}),P)}};function N(C){if(c&&!C.touches||!i.apply(this,arguments))return;var y=this,R=C.target.__data__.type,P=(l&&C.metaKey?R="overlay":R)==="selection"?Xo:l&&C.altKey?rr:nr,z=t===mu?null:B1[R],K=t===vu?null:F1[R],ue=yu(y),de=ue.extent,ce=ue.selection,Fe=de[0][0],me,Me,bt=de[0][1],Le,E,U=de[1][0],M,B,Y=de[1][1],k,V,X=0,ee=0,ke,Te=z&&K&&l&&C.shiftKey,Se,We,_e=Array.from(C.touches||[C],Z=>{const Oe=Z.identifier;return Z=jt(Z,y),Z.point0=Z.slice(),Z.identifier=Oe,Z});Sr(y);var Pe=x(y,arguments,!0).beforestart();if(R==="overlay"){ce&&(ke=!0);const Z=[_e[0],_e[1]||_e[0]];ue.selection=ce=[[me=t===mu?Fe:Qe(Z[0][0],Z[1][0]),Le=t===vu?bt:Qe(Z[0][1],Z[1][1])],[M=t===mu?U:Je(Z[0][0],Z[1][0]),k=t===vu?Y:Je(Z[0][1],Z[1][1])]],_e.length>1&&Ft(C)}else me=ce[0][0],Le=ce[0][1],M=ce[1][0],k=ce[1][1];Me=me,E=Le,B=M,V=k;var xt=Ee(y).attr("pointer-events","none"),dn=xt.selectAll(".overlay").attr("cursor",Dt[R]);if(C.touches)Pe.moved=_n,Pe.ended=it;else{var gn=Ee(C.view).on("mousemove.brush",_n,!0).on("mouseup.brush",it,!0);l&&gn.on("keydown.brush",vn,!0).on("keyup.brush",Vi,!0),Ef(C.view)}_.call(y),Pe.start(C,P.name);function _n(Z){for(const Oe of Z.changedTouches||[Z])for(const mn of _e)mn.identifier===Oe.identifier&&(mn.cur=jt(Oe,y));if(Te&&!Se&&!We&&_e.length===1){const Oe=_e[0];ko(Oe.cur[0]-Oe[0])>ko(Oe.cur[1]-Oe[1])?We=!0:Se=!0}for(const Oe of _e)Oe.cur&&(Oe[0]=Oe.cur[0],Oe[1]=Oe.cur[1]);ke=!0,gu(Z),Ft(Z)}function Ft(Z){const Oe=_e[0],mn=Oe.point0;var st;switch(X=Oe[0]-mn[0],ee=Oe[1]-mn[1],P){case _u:case Xo:{z&&(X=Je(Fe-me,Qe(U-M,X)),Me=me+X,B=M+X),K&&(ee=Je(bt-Le,Qe(Y-k,ee)),E=Le+ee,V=k+ee);break}case nr:{_e[1]?(z&&(Me=Je(Fe,Qe(U,_e[0][0])),B=Je(Fe,Qe(U,_e[1][0])),z=1),K&&(E=Je(bt,Qe(Y,_e[0][1])),V=Je(bt,Qe(Y,_e[1][1])),K=1)):(z<0?(X=Je(Fe-me,Qe(U-me,X)),Me=me+X,B=M):z>0&&(X=Je(Fe-M,Qe(U-M,X)),Me=me,B=M+X),K<0?(ee=Je(bt-Le,Qe(Y-Le,ee)),E=Le+ee,V=k):K>0&&(ee=Je(bt-k,Qe(Y-k,ee)),E=Le,V=k+ee));break}case rr:{z&&(Me=Je(Fe,Qe(U,me-X*z)),B=Je(Fe,Qe(U,M+X*z))),K&&(E=Je(bt,Qe(Y,Le-ee*K)),V=Je(bt,Qe(Y,k+ee*K)));break}}B<Me&&(z*=-1,st=me,me=M,M=st,st=Me,Me=B,B=st,R in Zo&&dn.attr("cursor",Dt[R=Zo[R]])),V<E&&(K*=-1,st=Le,Le=k,k=st,st=E,E=V,V=st,R in Jo&&dn.attr("cursor",Dt[R=Jo[R]])),ue.selection&&(ce=ue.selection),Se&&(Me=ce[0][0],B=ce[1][0]),We&&(E=ce[0][1],V=ce[1][1]),(ce[0][0]!==Me||ce[0][1]!==E||ce[1][0]!==B||ce[1][1]!==V)&&(ue.selection=[[Me,E],[B,V]],_.call(y),Pe.brush(Z,P.name))}function it(Z){if(R1(Z),Z.touches){if(Z.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500)}else Af(Z.view,ke),gn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);xt.attr("pointer-events","all"),dn.attr("cursor",Dt.overlay),ue.selection&&(ce=ue.selection),H1(ce)&&(ue.selection=null,_.call(y)),Pe.end(Z,P.name)}function vn(Z){switch(Z.keyCode){case 16:{Te=z&&K;break}case 18:{P===nr&&(z&&(M=B-X*z,me=Me+X*z),K&&(k=V-ee*K,Le=E+ee*K),P=rr,Ft(Z));break}case 32:{(P===nr||P===rr)&&(z<0?M=B-X:z>0&&(me=Me-X),K<0?k=V-ee:K>0&&(Le=E-ee),P=_u,dn.attr("cursor",Dt.selection),Ft(Z));break}default:return}gu(Z)}function Vi(Z){switch(Z.keyCode){case 16:{Te&&(Se=We=Te=!1,Ft(Z));break}case 18:{P===rr&&(z<0?M=B:z>0&&(me=Me),K<0?k=V:K>0&&(Le=E),P=nr,Ft(Z));break}case 32:{P===_u&&(Z.altKey?(z&&(M=B-X*z,me=Me+X*z),K&&(k=V-ee*K,Le=E+ee*K),P=rr):(z<0?M=B:z>0&&(me=Me),K<0?k=V:K>0&&(Le=E),P=nr),dn.attr("cursor",Dt[R]),Ft(Z));break}default:return}gu(Z)}}function $(C){x(this,arguments).moved(C)}function G(C){x(this,arguments).ended(C)}function H(){var C=this.__brush||{selection:null};return C.extent=Iu(r.apply(this,arguments)),C.dim=t,C}return d.extent=function(C){return arguments.length?(r=typeof C=="function"?C:du(Iu(C)),d):r},d.filter=function(C){return arguments.length?(i=typeof C=="function"?C:du(!!C),d):i},d.touchable=function(C){return arguments.length?(u=typeof C=="function"?C:du(!!C),d):u},d.handleSize=function(C){return arguments.length?(f=+C,d):f},d.keyModifiers=function(C){return arguments.length?(l=!!C,d):l},d.on=function(){var C=a.on.apply(a,arguments);return C===a?d:C},d}function Y1(t){var r=0,i=t.children,u=i&&i.length;if(!u)r=1;else for(;--u>=0;)r+=i[u].value;t.value=r}function V1(){return this.eachAfter(Y1)}function X1(t,r){let i=-1;for(const u of this)t.call(r,u,++i,this);return this}function k1(t,r){for(var i=this,u=[i],l,a,f=-1;i=u.pop();)if(t.call(r,i,++f,this),l=i.children)for(a=l.length-1;a>=0;--a)u.push(l[a]);return this}function K1(t,r){for(var i=this,u=[i],l=[],a,f,c,d=-1;i=u.pop();)if(l.push(i),a=i.children)for(f=0,c=a.length;f<c;++f)u.push(a[f]);for(;i=l.pop();)t.call(r,i,++d,this);return this}function Z1(t,r){let i=-1;for(const u of this)if(t.call(r,u,++i,this))return u}function J1(t){return this.eachAfter(function(r){for(var i=+t(r.data)||0,u=r.children,l=u&&u.length;--l>=0;)i+=u[l].value;r.value=i})}function Q1(t){return this.eachBefore(function(r){r.children&&r.children.sort(t)})}function D1(t){for(var r=this,i=j1(r,t),u=[r];r!==i;)r=r.parent,u.push(r);for(var l=u.length;t!==i;)u.splice(l,0,t),t=t.parent;return u}function j1(t,r){if(t===r)return t;var i=t.ancestors(),u=r.ancestors(),l=null;for(t=i.pop(),r=u.pop();t===r;)l=t,t=i.pop(),r=u.pop();return l}function em(){for(var t=this,r=[t];t=t.parent;)r.push(t);return r}function tm(){return Array.from(this)}function nm(){var t=[];return this.eachBefore(function(r){r.children||t.push(r)}),t}function rm(){var t=this,r=[];return t.each(function(i){i!==t&&r.push({source:i.parent,target:i})}),r}function*im(){var t=this,r,i=[t],u,l,a;do for(r=i.reverse(),i=[];t=r.pop();)if(yield t,u=t.children)for(l=0,a=u.length;l<a;++l)i.push(u[l]);while(i.length)}function Mn(t,r){t instanceof Map?(t=[void 0,t],r===void 0&&(r=am)):r===void 0&&(r=um);for(var i=new Li(t),u,l=[i],a,f,c,d;u=l.pop();)if((f=r(u.data))&&(d=(f=Array.from(f)).length))for(u.children=f,c=d-1;c>=0;--c)l.push(a=f[c]=new Li(f[c])),a.parent=u,a.depth=u.depth+1;return i.eachBefore(om)}function sm(){return Mn(this).eachBefore(lm)}function um(t){return t.children}function am(t){return Array.isArray(t)?t[1]:null}function lm(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function om(t){var r=0;do t.height=r;while((t=t.parent)&&t.height<++r)}function Li(t){this.data=t,this.depth=this.height=0,this.parent=null}Li.prototype=Mn.prototype={constructor:Li,count:V1,each:X1,eachAfter:K1,eachBefore:k1,find:Z1,sum:J1,sort:Q1,path:D1,ancestors:em,descendants:tm,leaves:nm,links:rm,copy:sm,[Symbol.iterator]:im};const Si=t=>()=>t;function fm(t,{sourceEvent:r,target:i,transform:u,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}function wu(t){t.stopImmediatePropagation()}function Ar(t){t.preventDefault(),t.stopImmediatePropagation()}function cm(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function hm(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Qo(){return this.__zoom||xf}function pm(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function dm(){return navigator.maxTouchPoints||"ontouchstart"in this}function gm(t,r,i){var u=t.invertX(r[0][0])-i[0][0],l=t.invertX(r[1][0])-i[1][0],a=t.invertY(r[0][1])-i[0][1],f=t.invertY(r[1][1])-i[1][1];return t.translate(l>u?(u+l)/2:Math.min(0,u)||Math.max(0,l),f>a?(a+f)/2:Math.min(0,a)||Math.max(0,f))}function _m(){var t=cm,r=hm,i=gm,u=pm,l=dm,a=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],c=250,d=L1,_=bf("start","zoom","end"),x,T,N,$=500,G=150,H=0,C=10;function y(E){E.property("__zoom",Qo).on("wheel.zoom",ce,{passive:!1}).on("mousedown.zoom",Fe).on("dblclick.zoom",me).filter(l).on("touchstart.zoom",Me).on("touchmove.zoom",bt).on("touchend.zoom touchcancel.zoom",Le).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(E,U,M,B){var Y=E.selection?E.selection():E;Y.property("__zoom",Qo),E!==Y?K(E,U,M,B):Y.interrupt().each(function(){ue(this,arguments).event(B).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},y.scaleBy=function(E,U,M,B){y.scaleTo(E,function(){var Y=this.__zoom.k,k=typeof U=="function"?U.apply(this,arguments):U;return Y*k},M,B)},y.scaleTo=function(E,U,M,B){y.transform(E,function(){var Y=r.apply(this,arguments),k=this.__zoom,V=M==null?z(Y):typeof M=="function"?M.apply(this,arguments):M,X=k.invert(V),ee=typeof U=="function"?U.apply(this,arguments):U;return i(P(R(k,ee),V,X),Y,f)},M,B)},y.translateBy=function(E,U,M,B){y.transform(E,function(){return i(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof M=="function"?M.apply(this,arguments):M),r.apply(this,arguments),f)},null,B)},y.translateTo=function(E,U,M,B,Y){y.transform(E,function(){var k=r.apply(this,arguments),V=this.__zoom,X=B==null?z(k):typeof B=="function"?B.apply(this,arguments):B;return i(xf.translate(X[0],X[1]).scale(V.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof M=="function"?-M.apply(this,arguments):-M),k,f)},B,Y)};function R(E,U){return U=Math.max(a[0],Math.min(a[1],U)),U===E.k?E:new pu(U,E.x,E.y)}function P(E,U,M){var B=U[0]-M[0]*E.k,Y=U[1]-M[1]*E.k;return B===E.x&&Y===E.y?E:new pu(E.k,B,Y)}function z(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function K(E,U,M,B){E.on("start.zoom",function(){ue(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){ue(this,arguments).event(B).end()}).tween("zoom",function(){var Y=this,k=arguments,V=ue(Y,k).event(B),X=r.apply(Y,k),ee=M==null?z(X):typeof M=="function"?M.apply(Y,k):M,ke=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),Te=Y.__zoom,Se=typeof U=="function"?U.apply(Y,k):U,We=d(Te.invert(ee).concat(ke/Te.k),Se.invert(ee).concat(ke/Se.k));return function(_e){if(_e===1)_e=Se;else{var Pe=We(_e),xt=ke/Pe[2];_e=new pu(xt,ee[0]-Pe[0]*xt,ee[1]-Pe[1]*xt)}V.zoom(null,_e)}})}function ue(E,U,M){return!M&&E.__zooming||new de(E,U)}function de(E,U){this.that=E,this.args=U,this.active=0,this.sourceEvent=null,this.extent=r.apply(E,U),this.taps=0}de.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,U){return this.mouse&&E!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var U=Ee(this.that).datum();_.call(E,this.that,new fm(E,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:_}),U)}};function ce(E,...U){if(!t.apply(this,arguments))return;var M=ue(this,U).event(E),B=this.__zoom,Y=Math.max(a[0],Math.min(a[1],B.k*Math.pow(2,u.apply(this,arguments)))),k=jt(E);if(M.wheel)(M.mouse[0][0]!==k[0]||M.mouse[0][1]!==k[1])&&(M.mouse[1]=B.invert(M.mouse[0]=k)),clearTimeout(M.wheel);else{if(B.k===Y)return;M.mouse=[k,B.invert(k)],Sr(this),M.start()}Ar(E),M.wheel=setTimeout(V,G),M.zoom("mouse",i(P(R(B,Y),M.mouse[0],M.mouse[1]),M.extent,f));function V(){M.wheel=null,M.end()}}function Fe(E,...U){if(N||!t.apply(this,arguments))return;var M=E.currentTarget,B=ue(this,U,!0).event(E),Y=Ee(E.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",ke,!0),k=jt(E,M),V=E.clientX,X=E.clientY;Ef(E.view),wu(E),B.mouse=[k,this.__zoom.invert(k)],Sr(this),B.start();function ee(Te){if(Ar(Te),!B.moved){var Se=Te.clientX-V,We=Te.clientY-X;B.moved=Se*Se+We*We>H}B.event(Te).zoom("mouse",i(P(B.that.__zoom,B.mouse[0]=jt(Te,M),B.mouse[1]),B.extent,f))}function ke(Te){Y.on("mousemove.zoom mouseup.zoom",null),Af(Te.view,B.moved),Ar(Te),B.event(Te).end()}}function me(E,...U){if(t.apply(this,arguments)){var M=this.__zoom,B=jt(E.changedTouches?E.changedTouches[0]:E,this),Y=M.invert(B),k=M.k*(E.shiftKey?.5:2),V=i(P(R(M,k),B,Y),r.apply(this,U),f);Ar(E),c>0?Ee(this).transition().duration(c).call(K,V,B,E):Ee(this).call(y.transform,V,B,E)}}function Me(E,...U){if(t.apply(this,arguments)){var M=E.touches,B=M.length,Y=ue(this,U,E.changedTouches.length===B).event(E),k,V,X,ee;for(wu(E),V=0;V<B;++V)X=M[V],ee=jt(X,this),ee=[ee,this.__zoom.invert(ee),X.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==ee[2]&&(Y.touch1=ee,Y.taps=0):(Y.touch0=ee,k=!0,Y.taps=1+!!x);x&&(x=clearTimeout(x)),k&&(Y.taps<2&&(T=ee[0],x=setTimeout(function(){x=null},$)),Sr(this),Y.start())}}function bt(E,...U){if(this.__zooming){var M=ue(this,U).event(E),B=E.changedTouches,Y=B.length,k,V,X,ee;for(Ar(E),k=0;k<Y;++k)V=B[k],X=jt(V,this),M.touch0&&M.touch0[2]===V.identifier?M.touch0[0]=X:M.touch1&&M.touch1[2]===V.identifier&&(M.touch1[0]=X);if(V=M.that.__zoom,M.touch1){var ke=M.touch0[0],Te=M.touch0[1],Se=M.touch1[0],We=M.touch1[1],_e=(_e=Se[0]-ke[0])*_e+(_e=Se[1]-ke[1])*_e,Pe=(Pe=We[0]-Te[0])*Pe+(Pe=We[1]-Te[1])*Pe;V=R(V,Math.sqrt(_e/Pe)),X=[(ke[0]+Se[0])/2,(ke[1]+Se[1])/2],ee=[(Te[0]+We[0])/2,(Te[1]+We[1])/2]}else if(M.touch0)X=M.touch0[0],ee=M.touch0[1];else return;M.zoom("touch",i(P(V,X,ee),M.extent,f))}}function Le(E,...U){if(this.__zooming){var M=ue(this,U).event(E),B=E.changedTouches,Y=B.length,k,V;for(wu(E),N&&clearTimeout(N),N=setTimeout(function(){N=null},$),k=0;k<Y;++k)V=B[k],M.touch0&&M.touch0[2]===V.identifier?delete M.touch0:M.touch1&&M.touch1[2]===V.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(V=jt(V,this),Math.hypot(T[0]-V[0],T[1]-V[1])<C)){var X=Ee(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return y.wheelDelta=function(E){return arguments.length?(u=typeof E=="function"?E:Si(+E),y):u},y.filter=function(E){return arguments.length?(t=typeof E=="function"?E:Si(!!E),y):t},y.touchable=function(E){return arguments.length?(l=typeof E=="function"?E:Si(!!E),y):l},y.extent=function(E){return arguments.length?(r=typeof E=="function"?E:Si([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),y):r},y.scaleExtent=function(E){return arguments.length?(a[0]=+E[0],a[1]=+E[1],y):[a[0],a[1]]},y.translateExtent=function(E){return arguments.length?(f[0][0]=+E[0][0],f[1][0]=+E[1][0],f[0][1]=+E[0][1],f[1][1]=+E[1][1],y):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},y.constrain=function(E){return arguments.length?(i=E,y):i},y.duration=function(E){return arguments.length?(c=+E,y):c},y.interpolate=function(E){return arguments.length?(d=E,y):d},y.on=function(){var E=_.on.apply(_,arguments);return E===_?y:E},y.clickDistance=function(E){return arguments.length?(H=(E=+E)*E,y):Math.sqrt(H)},y.tapDistance=function(E){return arguments.length?(C=+E,y):C},y}var Tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tf="1.13.7",Do=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Wi=Array.prototype,ku=Object.prototype,jo=typeof Symbol<"u"?Symbol.prototype:null,vm=Wi.push,Rr=Wi.slice,Ir=ku.toString,mm=ku.hasOwnProperty,Nf=typeof ArrayBuffer<"u",ym=typeof DataView<"u",wm=Array.isArray,ef=Object.keys,tf=Object.create,nf=Nf&&ArrayBuffer.isView,bm=isNaN,xm=isFinite,Sf=!{toString:null}.propertyIsEnumerable("toString"),rf=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Em=Math.pow(2,53)-1;function ft(t,r){return r=r==null?t.length-1:+r,function(){for(var i=Math.max(arguments.length-r,0),u=Array(i),l=0;l<i;l++)u[l]=arguments[l+r];switch(r){case 0:return t.call(this,u);case 1:return t.call(this,arguments[0],u);case 2:return t.call(this,arguments[0],arguments[1],u)}var a=Array(r+1);for(l=0;l<r;l++)a[l]=arguments[l];return a[r]=u,t.apply(this,a)}}function Bn(t){var r=typeof t;return r==="function"||r==="object"&&!!t}function Ii(t){return t===null}function tn(t){return t===void 0}function If(t){return t===!0||t===!1||Ir.call(t)==="[object Boolean]"}function Am(t){return!!(t&&t.nodeType===1)}function je(t){var r="[object "+t+"]";return function(i){return Ir.call(i)===r}}const sr=je("String"),ir=je("Number"),Tm=je("Date"),Nm=je("RegExp"),Sm=je("Error"),Of=je("Symbol"),Cf=je("ArrayBuffer");var Xe=je("Function"),Im=Do.document&&Do.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Im!="function"&&(Xe=function(t){return typeof t=="function"||!1});const Mf=je("Object");var Lf=ym&&(!/\[native code\]/.test(String(DataView))||Mf(new DataView(new ArrayBuffer(8)))),Ku=typeof Map<"u"&&Mf(new Map),Om=je("DataView");function Cm(t){return t!=null&&Xe(t.getInt8)&&Cf(t.buffer)}const Pi=Lf?Cm:Om,Fn=wm||je("Array");function pn(t,r){return t!=null&&mm.call(t,r)}var Or=je("Arguments");(function(){Or(arguments)||(Or=function(t){return pn(t,"callee")})})();function Mm(t){return!Of(t)&&xm(t)&&!isNaN(parseFloat(t))}function Pf(t){return ir(t)&&bm(t)}function Rf(t){return function(){return t}}function zf(t){return function(r){var i=t(r);return typeof i=="number"&&i>=0&&i<=Em}}function Bf(t){return function(r){return r==null?void 0:r[t]}}const Ri=Bf("byteLength"),Lm=zf(Ri);var Pm=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Rm(t){return nf?nf(t)&&!Pi(t):Lm(t)&&Pm.test(Ir.call(t))}const Ff=Nf?Rm:Rf(!1),ct=Bf("length");function zm(t){for(var r={},i=t.length,u=0;u<i;++u)r[t[u]]=!0;return{contains:function(l){return r[l]===!0},push:function(l){return r[l]=!0,t.push(l)}}}function Uf(t,r){r=zm(r);var i=rf.length,u=t.constructor,l=Xe(u)&&u.prototype||ku,a="constructor";for(pn(t,a)&&!r.contains(a)&&r.push(a);i--;)a=rf[i],a in t&&t[a]!==l[a]&&!r.contains(a)&&r.push(a)}function Ue(t){if(!Bn(t))return[];if(ef)return ef(t);var r=[];for(var i in t)pn(t,i)&&r.push(i);return Sf&&Uf(t,r),r}function Bm(t){if(t==null)return!0;var r=ct(t);return typeof r=="number"&&(Fn(t)||sr(t)||Or(t))?r===0:ct(Ue(t))===0}function Wf(t,r){var i=Ue(r),u=i.length;if(t==null)return!u;for(var l=Object(t),a=0;a<u;a++){var f=i[a];if(r[f]!==l[f]||!(f in l))return!1}return!0}function pe(t){if(t instanceof pe)return t;if(!(this instanceof pe))return new pe(t);this._wrapped=t}pe.VERSION=Tf;pe.prototype.value=function(){return this._wrapped};pe.prototype.valueOf=pe.prototype.toJSON=pe.prototype.value;pe.prototype.toString=function(){return String(this._wrapped)};function sf(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,Ri(t))}var uf="[object DataView]";function Cu(t,r,i,u){if(t===r)return t!==0||1/t===1/r;if(t==null||r==null)return!1;if(t!==t)return r!==r;var l=typeof t;return l!=="function"&&l!=="object"&&typeof r!="object"?!1:$f(t,r,i,u)}function $f(t,r,i,u){t instanceof pe&&(t=t._wrapped),r instanceof pe&&(r=r._wrapped);var l=Ir.call(t);if(l!==Ir.call(r))return!1;if(Lf&&l=="[object Object]"&&Pi(t)){if(!Pi(r))return!1;l=uf}switch(l){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!=+t?+r!=+r:+t==0?1/+t===1/r:+t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object Symbol]":return jo.valueOf.call(t)===jo.valueOf.call(r);case"[object ArrayBuffer]":case uf:return $f(sf(t),sf(r),i,u)}var a=l==="[object Array]";if(!a&&Ff(t)){var f=Ri(t);if(f!==Ri(r))return!1;if(t.buffer===r.buffer&&t.byteOffset===r.byteOffset)return!0;a=!0}if(!a){if(typeof t!="object"||typeof r!="object")return!1;var c=t.constructor,d=r.constructor;if(c!==d&&!(Xe(c)&&c instanceof c&&Xe(d)&&d instanceof d)&&"constructor"in t&&"constructor"in r)return!1}i=i||[],u=u||[];for(var _=i.length;_--;)if(i[_]===t)return u[_]===r;if(i.push(t),u.push(r),a){if(_=t.length,_!==r.length)return!1;for(;_--;)if(!Cu(t[_],r[_],i,u))return!1}else{var x=Ue(t),T;if(_=x.length,Ue(r).length!==_)return!1;for(;_--;)if(T=x[_],!(pn(r,T)&&Cu(t[T],r[T],i,u)))return!1}return i.pop(),u.pop(),!0}function Fm(t,r){return Cu(t,r)}function zr(t){if(!Bn(t))return[];var r=[];for(var i in t)r.push(i);return Sf&&Uf(t,r),r}function Zu(t){var r=ct(t);return function(i){if(i==null)return!1;var u=zr(i);if(ct(u))return!1;for(var l=0;l<r;l++)if(!Xe(i[t[l]]))return!1;return t!==qf||!Xe(i[Ju])}}var Ju="forEach",Hf="has",Qu=["clear","delete"],Gf=["get",Hf,"set"],Um=Qu.concat(Ju,Gf),qf=Qu.concat(Gf),Wm=["add"].concat(Qu,Ju,Hf);const $m=Ku?Zu(Um):je("Map"),Hm=Ku?Zu(qf):je("WeakMap"),Gm=Ku?Zu(Wm):je("Set"),qm=je("WeakSet");function Un(t){for(var r=Ue(t),i=r.length,u=Array(i),l=0;l<i;l++)u[l]=t[r[l]];return u}function Ym(t){for(var r=Ue(t),i=r.length,u=Array(i),l=0;l<i;l++)u[l]=[r[l],t[r[l]]];return u}function Yf(t){for(var r={},i=Ue(t),u=0,l=i.length;u<l;u++)r[t[i[u]]]=i[u];return r}function Mu(t){var r=[];for(var i in t)Xe(t[i])&&r.push(i);return r.sort()}function Du(t,r){return function(i){var u=arguments.length;if(r&&(i=Object(i)),u<2||i==null)return i;for(var l=1;l<u;l++)for(var a=arguments[l],f=t(a),c=f.length,d=0;d<c;d++){var _=f[d];(!r||i[_]===void 0)&&(i[_]=a[_])}return i}}const Bt=Du(zr),Cr=Du(Ue),ju=Du(zr,!0);function Vm(){return function(){}}function Vf(t){if(!Bn(t))return{};if(tf)return tf(t);var r=Vm();r.prototype=t;var i=new r;return r.prototype=null,i}function Xm(t,r){var i=Vf(t);return r&&Cr(i,r),i}function Xf(t){return Bn(t)?Fn(t)?t.slice():Bt({},t):t}function km(t,r){return r(t),t}function kf(t){return Fn(t)?t:[t]}pe.toPath=kf;function Br(t){return pe.toPath(t)}function ea(t,r){for(var i=r.length,u=0;u<i;u++){if(t==null)return;t=t[r[u]]}return i?t:void 0}function Kf(t,r,i){var u=ea(t,Br(r));return tn(u)?i:u}function $i(t,r){r=Br(r);for(var i=r.length,u=0;u<i;u++){var l=r[u];if(!pn(t,l))return!1;t=t[l]}return!!i}function ta(t){return t}function Mr(t){return t=Cr({},t),function(r){return Wf(r,t)}}function na(t){return t=Br(t),function(r){return ea(r,t)}}function Fr(t,r,i){if(r===void 0)return t;switch(i??3){case 1:return function(u){return t.call(r,u)};case 3:return function(u,l,a){return t.call(r,u,l,a)};case 4:return function(u,l,a,f){return t.call(r,u,l,a,f)}}return function(){return t.apply(r,arguments)}}function Zf(t,r,i){return t==null?ta:Xe(t)?Fr(t,r,i):Bn(t)&&!Fn(t)?Mr(t):na(t)}function ra(t,r){return Zf(t,r,1/0)}pe.iteratee=ra;function ht(t,r,i){return pe.iteratee!==ra?pe.iteratee(t,r):Zf(t,r,i)}function Jf(t,r,i){r=ht(r,i);for(var u=Ue(t),l=u.length,a={},f=0;f<l;f++){var c=u[f];a[c]=r(t[c],c,t)}return a}function Hi(){}function Km(t){return t==null?Hi:function(r){return Kf(t,r)}}function Zm(t,r,i){var u=Array(Math.max(0,t));r=Fr(r,i,1);for(var l=0;l<t;l++)u[l]=r(l);return u}function Lu(t,r){return r==null&&(r=t,t=0),t+Math.floor(Math.random()*(r-t+1))}const Lr=Date.now||function(){return new Date().getTime()};function Qf(t){var r=function(a){return t[a]},i="(?:"+Ue(t).join("|")+")",u=RegExp(i),l=RegExp(i,"g");return function(a){return a=a==null?"":""+a,u.test(a)?a.replace(l,r):a}}const Df={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Jm=Qf(Df),Qm=Yf(Df),Dm=Qf(Qm),jm=pe.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var bu=/(.)^/,ey={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ty=/\\|'|\r|\n|\u2028|\u2029/g;function ny(t){return"\\"+ey[t]}var ry=/^\s*(\w|\$)+\s*$/;function iy(t,r,i){!r&&i&&(r=i),r=ju({},r,pe.templateSettings);var u=RegExp([(r.escape||bu).source,(r.interpolate||bu).source,(r.evaluate||bu).source].join("|")+"|$","g"),l=0,a="__p+='";t.replace(u,function(_,x,T,N,$){return a+=t.slice(l,$).replace(ty,ny),l=$+_.length,x?a+=`'+
((__t=(`+x+`))==null?'':_.escape(__t))+
'`:T?a+=`'+
((__t=(`+T+`))==null?'':__t)+
'`:N&&(a+=`';
`+N+`
__p+='`),_}),a+=`';
`;var f=r.variable;if(f){if(!ry.test(f))throw new Error("variable is not a bare identifier: "+f)}else a=`with(obj||{}){
`+a+`}
`,f="obj";a=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+a+`return __p;
`;var c;try{c=new Function(f,"_",a)}catch(_){throw _.source=a,_}var d=function(_){return c.call(this,_,pe)};return d.source="function("+f+`){
`+a+"}",d}function sy(t,r,i){r=Br(r);var u=r.length;if(!u)return Xe(i)?i.call(t):i;for(var l=0;l<u;l++){var a=t==null?void 0:t[r[l]];a===void 0&&(a=i,l=u),t=Xe(a)?a.call(t):a}return t}var uy=0;function ay(t){var r=++uy+"";return t?t+r:r}function ly(t){var r=pe(t);return r._chain=!0,r}function jf(t,r,i,u,l){if(!(u instanceof r))return t.apply(i,l);var a=Vf(t.prototype),f=t.apply(a,l);return Bn(f)?f:a}var Gt=ft(function(t,r){var i=Gt.placeholder,u=function(){for(var l=0,a=r.length,f=Array(a),c=0;c<a;c++)f[c]=r[c]===i?arguments[l++]:r[c];for(;l<arguments.length;)f.push(arguments[l++]);return jf(t,u,this,this,f)};return u});Gt.placeholder=pe;const ec=ft(function(t,r,i){if(!Xe(t))throw new TypeError("Bind must be called on a function");var u=ft(function(l){return jf(t,u,r,this,i.concat(l))});return u}),wt=zf(ct);function Wn(t,r,i,u){if(u=u||[],!r&&r!==0)r=1/0;else if(r<=0)return u.concat(t);for(var l=u.length,a=0,f=ct(t);a<f;a++){var c=t[a];if(wt(c)&&(Fn(c)||Or(c)))if(r>1)Wn(c,r-1,i,u),l=u.length;else for(var d=0,_=c.length;d<_;)u[l++]=c[d++];else i||(u[l++]=c)}return u}const oy=ft(function(t,r){r=Wn(r,!1,!1);var i=r.length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var u=r[i];t[u]=ec(t[u],t)}return t});function fy(t,r){var i=function(u){var l=i.cache,a=""+(r?r.apply(this,arguments):u);return pn(l,a)||(l[a]=t.apply(this,arguments)),l[a]};return i.cache={},i}const tc=ft(function(t,r,i){return setTimeout(function(){return t.apply(null,i)},r)}),cy=Gt(tc,pe,1);function hy(t,r,i){var u,l,a,f,c=0;i||(i={});var d=function(){c=i.leading===!1?0:Lr(),u=null,f=t.apply(l,a),u||(l=a=null)},_=function(){var x=Lr();!c&&i.leading===!1&&(c=x);var T=r-(x-c);return l=this,a=arguments,T<=0||T>r?(u&&(clearTimeout(u),u=null),c=x,f=t.apply(l,a),u||(l=a=null)):!u&&i.trailing!==!1&&(u=setTimeout(d,T)),f};return _.cancel=function(){clearTimeout(u),c=0,u=l=a=null},_}function py(t,r,i){var u,l,a,f,c,d=function(){var x=Lr()-l;r>x?u=setTimeout(d,r-x):(u=null,i||(f=t.apply(c,a)),u||(a=c=null))},_=ft(function(x){return c=this,a=x,l=Lr(),u||(u=setTimeout(d,r),i&&(f=t.apply(c,a))),f});return _.cancel=function(){clearTimeout(u),u=a=c=null},_}function dy(t,r){return Gt(r,t)}function ia(t){return function(){return!t.apply(this,arguments)}}function gy(){var t=arguments,r=t.length-1;return function(){for(var i=r,u=t[r].apply(this,arguments);i--;)u=t[i].call(this,u);return u}}function _y(t,r){return function(){if(--t<1)return r.apply(this,arguments)}}function nc(t,r){var i;return function(){return--t>0&&(i=r.apply(this,arguments)),t<=1&&(r=null),i}}const vy=Gt(nc,2);function rc(t,r,i){r=ht(r,i);for(var u=Ue(t),l,a=0,f=u.length;a<f;a++)if(l=u[a],r(t[l],l,t))return l}function ic(t){return function(r,i,u){i=ht(i,u);for(var l=ct(r),a=t>0?0:l-1;a>=0&&a<l;a+=t)if(i(r[a],a,r))return a;return-1}}const sa=ic(1),sc=ic(-1);function uc(t,r,i,u){i=ht(i,u,1);for(var l=i(r),a=0,f=ct(t);a<f;){var c=Math.floor((a+f)/2);i(t[c])<l?a=c+1:f=c}return a}function ac(t,r,i){return function(u,l,a){var f=0,c=ct(u);if(typeof a=="number")t>0?f=a>=0?a:Math.max(a+c,f):c=a>=0?Math.min(a+1,c):a+c+1;else if(i&&a&&c)return a=i(u,l),u[a]===l?a:-1;if(l!==l)return a=r(Rr.call(u,f,c),Pf),a>=0?a+f:-1;for(a=t>0?f:c-1;a>=0&&a<c;a+=t)if(u[a]===l)return a;return-1}}const lc=ac(1,sa,uc),my=ac(-1,sc);function Pu(t,r,i){var u=wt(t)?sa:rc,l=u(t,r,i);if(l!==void 0&&l!==-1)return t[l]}function yy(t,r){return Pu(t,Mr(r))}function we(t,r,i){r=Fr(r,i);var u,l;if(wt(t))for(u=0,l=t.length;u<l;u++)r(t[u],u,t);else{var a=Ue(t);for(u=0,l=a.length;u<l;u++)r(t[a[u]],a[u],t)}return t}function De(t,r,i){r=ht(r,i);for(var u=!wt(t)&&Ue(t),l=(u||t).length,a=Array(l),f=0;f<l;f++){var c=u?u[f]:f;a[f]=r(t[c],c,t)}return a}function oc(t){var r=function(i,u,l,a){var f=!wt(i)&&Ue(i),c=(f||i).length,d=t>0?0:c-1;for(a||(l=i[f?f[d]:d],d+=t);d>=0&&d<c;d+=t){var _=f?f[d]:d;l=u(l,i[_],_,i)}return l};return function(i,u,l,a){var f=arguments.length>=3;return r(i,Fr(u,a,4),l,f)}}const Ln=oc(1),af=oc(-1);function yt(t,r,i){var u=[];return r=ht(r,i),we(t,function(l,a,f){r(l,a,f)&&u.push(l)}),u}function fc(t,r,i){return yt(t,ia(ht(r)),i)}function Ru(t,r,i){r=ht(r,i);for(var u=!wt(t)&&Ue(t),l=(u||t).length,a=0;a<l;a++){var f=u?u[a]:a;if(!r(t[f],f,t))return!1}return!0}function zi(t,r,i){r=ht(r,i);for(var u=!wt(t)&&Ue(t),l=(u||t).length,a=0;a<l;a++){var f=u?u[a]:a;if(r(t[f],f,t))return!0}return!1}function Ht(t,r,i,u){return wt(t)||(t=Un(t)),(typeof i!="number"||u)&&(i=0),lc(t,r,i)>=0}const wy=ft(function(t,r,i){var u,l;return Xe(r)?l=r:(r=Br(r),u=r.slice(0,-1),r=r[r.length-1]),De(t,function(a){var f=l;if(!f){if(u&&u.length&&(a=ea(a,u)),a==null)return;f=a[r]}return f==null?f:f.apply(a,i)})});function Gi(t,r){return De(t,na(r))}function by(t,r){return yt(t,Mr(r))}function ua(t,r,i){var u=-1/0,l=-1/0,a,f;if(r==null||typeof r=="number"&&typeof t[0]!="object"&&t!=null){t=wt(t)?t:Un(t);for(var c=0,d=t.length;c<d;c++)a=t[c],a!=null&&a>u&&(u=a)}else r=ht(r,i),we(t,function(_,x,T){f=r(_,x,T),(f>l||f===-1/0&&u===-1/0)&&(u=_,l=f)});return u}function cc(t,r,i){var u=1/0,l=1/0,a,f;if(r==null||typeof r=="number"&&typeof t[0]!="object"&&t!=null){t=wt(t)?t:Un(t);for(var c=0,d=t.length;c<d;c++)a=t[c],a!=null&&a<u&&(u=a)}else r=ht(r,i),we(t,function(_,x,T){f=r(_,x,T),(f<l||f===1/0&&u===1/0)&&(u=_,l=f)});return u}var xy=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function hc(t){return t?Fn(t)?Rr.call(t):sr(t)?t.match(xy):wt(t)?De(t,ta):Un(t):[]}function pc(t,r,i){if(r==null||i)return wt(t)||(t=Un(t)),t[Lu(t.length-1)];var u=hc(t),l=ct(u);r=Math.max(Math.min(r,l),0);for(var a=l-1,f=0;f<r;f++){var c=Lu(f,a),d=u[f];u[f]=u[c],u[c]=d}return u.slice(0,r)}function Ey(t){return pc(t,1/0)}function dc(t,r,i){var u=0;return r=ht(r,i),Gi(De(t,function(l,a,f){return{value:l,index:u++,criteria:r(l,a,f)}}).sort(function(l,a){var f=l.criteria,c=a.criteria;if(f!==c){if(f>c||f===void 0)return 1;if(f<c||c===void 0)return-1}return l.index-a.index}),"value")}function qi(t,r){return function(i,u,l){var a=r?[[],[]]:{};return u=ht(u,l),we(i,function(f,c){var d=u(f,c,i);t(a,f,d)}),a}}const Ay=qi(function(t,r,i){pn(t,i)?t[i].push(r):t[i]=[r]}),Ty=qi(function(t,r,i){t[i]=r}),Ny=qi(function(t,r,i){pn(t,i)?t[i]++:t[i]=1}),Sy=qi(function(t,r,i){t[i?0:1].push(r)},!0);function Iy(t){return t==null?0:wt(t)?t.length:Ue(t).length}function Oy(t,r,i){return r in i}const aa=ft(function(t,r){var i={},u=r[0];if(t==null)return i;Xe(u)?(r.length>1&&(u=Fr(u,r[1])),r=zr(t)):(u=Oy,r=Wn(r,!1,!1),t=Object(t));for(var l=0,a=r.length;l<a;l++){var f=r[l],c=t[f];u(c,f,t)&&(i[f]=c)}return i}),Cy=ft(function(t,r){var i=r[0],u;return Xe(i)?(i=ia(i),r.length>1&&(u=r[1])):(r=De(Wn(r,!1,!1),String),i=function(l,a){return!Ht(r,a)}),aa(t,i,u)});function gc(t,r,i){return Rr.call(t,0,Math.max(0,t.length-(r==null||i?1:r)))}function xu(t,r,i){return t==null||t.length<1?r==null||i?void 0:[]:r==null||i?t[0]:gc(t,t.length-r)}function Pn(t,r,i){return Rr.call(t,r==null||i?1:r)}function My(t,r,i){return t==null||t.length<1?r==null||i?void 0:[]:r==null||i?t[t.length-1]:Pn(t,Math.max(0,t.length-r))}function _c(t){return yt(t,Boolean)}function Ly(t,r){return Wn(t,r,!1)}const vc=ft(function(t,r){return r=Wn(r,!0,!0),yt(t,function(i){return!Ht(r,i)})}),Py=ft(function(t,r){return vc(t,r)});function zu(t,r,i,u){If(r)||(u=i,i=r,r=!1),i!=null&&(i=ht(i,u));for(var l=[],a=[],f=0,c=ct(t);f<c;f++){var d=t[f],_=i?i(d,f,t):d;r&&!i?((!f||a!==_)&&l.push(d),a=_):i?Ht(a,_)||(a.push(_),l.push(d)):Ht(l,d)||l.push(d)}return l}const mc=ft(function(t){return zu(Wn(t,!0,!0))});function yc(t){for(var r=[],i=arguments.length,u=0,l=ct(t);u<l;u++){var a=t[u];if(!Ht(r,a)){var f;for(f=1;f<i&&Ht(arguments[f],a);f++);f===i&&r.push(a)}}return r}function Bu(t){for(var r=t&&ua(t,ct).length||0,i=Array(r),u=0;u<r;u++)i[u]=Gi(t,u);return i}const Ry=ft(Bu);function Oi(t,r){for(var i={},u=0,l=ct(t);u<l;u++)r?i[t[u]]=r[u]:i[t[u][0]]=t[u][1];return i}function zy(t,r,i){r==null&&(r=t||0,t=0),i||(i=r<t?-1:1);for(var u=Math.max(Math.ceil((r-t)/i),0),l=Array(u),a=0;a<u;a++,t+=i)l[a]=t;return l}function By(t,r){if(r==null||r<1)return[];for(var i=[],u=0,l=t.length;u<l;)i.push(Rr.call(t,u,u+=r));return i}function la(t,r){return t._chain?pe(r).chain():r}function wc(t){return we(Mu(t),function(r){var i=pe[r]=t[r];pe.prototype[r]=function(){var u=[this._wrapped];return vm.apply(u,arguments),la(this,i.apply(pe,u))}}),pe}we(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=Wi[t];pe.prototype[t]=function(){var i=this._wrapped;return i!=null&&(r.apply(i,arguments),(t==="shift"||t==="splice")&&i.length===0&&delete i[0]),la(this,i)}});we(["concat","join","slice"],function(t){var r=Wi[t];pe.prototype[t]=function(){var i=this._wrapped;return i!=null&&(i=r.apply(i,arguments)),la(this,i)}});const Fy=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Tf,after:_y,all:Ru,allKeys:zr,any:zi,assign:Cr,before:nc,bind:ec,bindAll:oy,chain:ly,chunk:By,clone:Xf,collect:De,compact:_c,compose:gy,constant:Rf,contains:Ht,countBy:Ny,create:Xm,debounce:py,default:pe,defaults:ju,defer:cy,delay:tc,detect:Pu,difference:vc,drop:Pn,each:we,escape:Jm,every:Ru,extend:Bt,extendOwn:Cr,filter:yt,find:Pu,findIndex:sa,findKey:rc,findLastIndex:sc,findWhere:yy,first:xu,flatten:Ly,foldl:Ln,foldr:af,forEach:we,functions:Mu,get:Kf,groupBy:Ay,has:$i,head:xu,identity:ta,include:Ht,includes:Ht,indexBy:Ty,indexOf:lc,initial:gc,inject:Ln,intersection:yc,invert:Yf,invoke:wy,isArguments:Or,isArray:Fn,isArrayBuffer:Cf,isBoolean:If,isDataView:Pi,isDate:Tm,isElement:Am,isEmpty:Bm,isEqual:Fm,isError:Sm,isFinite:Mm,isFunction:Xe,isMap:$m,isMatch:Wf,isNaN:Pf,isNull:Ii,isNumber:ir,isObject:Bn,isRegExp:Nm,isSet:Gm,isString:sr,isSymbol:Of,isTypedArray:Ff,isUndefined:tn,isWeakMap:Hm,isWeakSet:qm,iteratee:ra,keys:Ue,last:My,lastIndexOf:my,map:De,mapObject:Jf,matcher:Mr,matches:Mr,max:ua,memoize:fy,methods:Mu,min:cc,mixin:wc,negate:ia,noop:Hi,now:Lr,object:Oi,omit:Cy,once:vy,pairs:Ym,partial:Gt,partition:Sy,pick:aa,pluck:Gi,property:na,propertyOf:Km,random:Lu,range:zy,reduce:Ln,reduceRight:af,reject:fc,rest:Pn,restArguments:ft,result:sy,sample:pc,select:yt,shuffle:Ey,size:Iy,some:zi,sortBy:dc,sortedIndex:uc,tail:Pn,take:xu,tap:km,template:iy,templateSettings:jm,throttle:hy,times:Zm,toArray:hc,toPath:kf,transpose:Bu,unescape:Dm,union:mc,uniq:zu,unique:zu,uniqueId:ay,unzip:Bu,values:Un,where:by,without:Py,wrap:dy,zip:Ry},Symbol.toStringTag,{value:"Module"}));var lf=wc(Fy);lf._=lf;const bc=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Uy=bc+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Wy="["+bc+"]["+Uy+"]*",$y=new RegExp("^"+Wy+"$");function xc(t,r){const i=[];let u=r.exec(t);for(;u;){const l=[];l.startIndex=r.lastIndex-u[0].length;const a=u.length;for(let f=0;f<a;f++)l.push(u[f]);i.push(l),u=r.exec(t)}return i}const oa=function(t){const r=$y.exec(t);return!(r===null||typeof r>"u")};function Hy(t){return typeof t<"u"}const Gy={allowBooleanAttributes:!1,unpairedTags:[]};function qy(t,r){r=Object.assign({},Gy,r);const i=[];let u=!1,l=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let a=0;a<t.length;a++)if(t[a]==="<"&&t[a+1]==="?"){if(a+=2,a=ff(t,a),a.err)return a}else if(t[a]==="<"){let f=a;if(a++,t[a]==="!"){a=cf(t,a);continue}else{let c=!1;t[a]==="/"&&(c=!0,a++);let d="";for(;a<t.length&&t[a]!==">"&&t[a]!==" "&&t[a]!=="	"&&t[a]!==`
`&&t[a]!=="\r";a++)d+=t[a];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),a--),!Qy(d)){let T;return d.trim().length===0?T="Invalid space after '<'.":T="Tag '"+d+"' is an invalid name.",Be("InvalidTag",T,rt(t,a))}const _=Xy(t,a);if(_===!1)return Be("InvalidAttr","Attributes for '"+d+"' have open quote.",rt(t,a));let x=_.value;if(a=_.index,x[x.length-1]==="/"){const T=a-x.length;x=x.substring(0,x.length-1);const N=hf(x,r);if(N===!0)u=!0;else return Be(N.err.code,N.err.msg,rt(t,T+N.err.line))}else if(c)if(_.tagClosed){if(x.trim().length>0)return Be("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",rt(t,f));if(i.length===0)return Be("InvalidTag","Closing tag '"+d+"' has not been opened.",rt(t,f));{const T=i.pop();if(d!==T.tagName){let N=rt(t,T.tagStartPos);return Be("InvalidTag","Expected closing tag '"+T.tagName+"' (opened in line "+N.line+", col "+N.col+") instead of closing tag '"+d+"'.",rt(t,f))}i.length==0&&(l=!0)}}else return Be("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",rt(t,a));else{const T=hf(x,r);if(T!==!0)return Be(T.err.code,T.err.msg,rt(t,a-x.length+T.err.line));if(l===!0)return Be("InvalidXml","Multiple possible root nodes found.",rt(t,a));r.unpairedTags.indexOf(d)!==-1||i.push({tagName:d,tagStartPos:f}),u=!0}for(a++;a<t.length;a++)if(t[a]==="<")if(t[a+1]==="!"){a++,a=cf(t,a);continue}else if(t[a+1]==="?"){if(a=ff(t,++a),a.err)return a}else break;else if(t[a]==="&"){const T=Zy(t,a);if(T==-1)return Be("InvalidChar","char '&' is not expected.",rt(t,a));a=T}else if(l===!0&&!of(t[a]))return Be("InvalidXml","Extra text at the end",rt(t,a));t[a]==="<"&&a--}}else{if(of(t[a]))continue;return Be("InvalidChar","char '"+t[a]+"' is not expected.",rt(t,a))}if(u){if(i.length==1)return Be("InvalidTag","Unclosed tag '"+i[0].tagName+"'.",rt(t,i[0].tagStartPos));if(i.length>0)return Be("InvalidXml","Invalid '"+JSON.stringify(i.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Be("InvalidXml","Start tag expected.",1);return!0}function of(t){return t===" "||t==="	"||t===`
`||t==="\r"}function ff(t,r){const i=r;for(;r<t.length;r++)if(t[r]=="?"||t[r]==" "){const u=t.substr(i,r-i);if(r>5&&u==="xml")return Be("InvalidXml","XML declaration allowed only at the start of the document.",rt(t,r));if(t[r]=="?"&&t[r+1]==">"){r++;break}else continue}return r}function cf(t,r){if(t.length>r+5&&t[r+1]==="-"&&t[r+2]==="-"){for(r+=3;r<t.length;r++)if(t[r]==="-"&&t[r+1]==="-"&&t[r+2]===">"){r+=2;break}}else if(t.length>r+8&&t[r+1]==="D"&&t[r+2]==="O"&&t[r+3]==="C"&&t[r+4]==="T"&&t[r+5]==="Y"&&t[r+6]==="P"&&t[r+7]==="E"){let i=1;for(r+=8;r<t.length;r++)if(t[r]==="<")i++;else if(t[r]===">"&&(i--,i===0))break}else if(t.length>r+9&&t[r+1]==="["&&t[r+2]==="C"&&t[r+3]==="D"&&t[r+4]==="A"&&t[r+5]==="T"&&t[r+6]==="A"&&t[r+7]==="["){for(r+=8;r<t.length;r++)if(t[r]==="]"&&t[r+1]==="]"&&t[r+2]===">"){r+=2;break}}return r}const Yy='"',Vy="'";function Xy(t,r){let i="",u="",l=!1;for(;r<t.length;r++){if(t[r]===Yy||t[r]===Vy)u===""?u=t[r]:u!==t[r]||(u="");else if(t[r]===">"&&u===""){l=!0;break}i+=t[r]}return u!==""?!1:{value:i,index:r,tagClosed:l}}const ky=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function hf(t,r){const i=xc(t,ky),u={};for(let l=0;l<i.length;l++){if(i[l][1].length===0)return Be("InvalidAttr","Attribute '"+i[l][2]+"' has no space in starting.",Nr(i[l]));if(i[l][3]!==void 0&&i[l][4]===void 0)return Be("InvalidAttr","Attribute '"+i[l][2]+"' is without value.",Nr(i[l]));if(i[l][3]===void 0&&!r.allowBooleanAttributes)return Be("InvalidAttr","boolean attribute '"+i[l][2]+"' is not allowed.",Nr(i[l]));const a=i[l][2];if(!Jy(a))return Be("InvalidAttr","Attribute '"+a+"' is an invalid name.",Nr(i[l]));if(!u.hasOwnProperty(a))u[a]=1;else return Be("InvalidAttr","Attribute '"+a+"' is repeated.",Nr(i[l]))}return!0}function Ky(t,r){let i=/\d/;for(t[r]==="x"&&(r++,i=/[\da-fA-F]/);r<t.length;r++){if(t[r]===";")return r;if(!t[r].match(i))break}return-1}function Zy(t,r){if(r++,t[r]===";")return-1;if(t[r]==="#")return r++,Ky(t,r);let i=0;for(;r<t.length;r++,i++)if(!(t[r].match(/\w/)&&i<20)){if(t[r]===";")break;return-1}return r}function Be(t,r,i){return{err:{code:t,msg:r,line:i.line||i,col:i.col}}}function Jy(t){return oa(t)}function Qy(t){return oa(t)}function rt(t,r){const i=t.substring(0,r).split(/\r?\n/);return{line:i.length,col:i[i.length-1].length+1}}function Nr(t){return t.startIndex+t[1].length}const Dy={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,r){return r},attributeValueProcessor:function(t,r){return r},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,r,i){return t},captureMetaData:!1},jy=function(t){return Object.assign({},Dy,t)};let Bi;typeof Symbol!="function"?Bi="@@xmlMetadata":Bi=Symbol("XML Node Metadata");class In{constructor(r){this.tagname=r,this.child=[],this[":@"]={}}add(r,i){r==="__proto__"&&(r="#__proto__"),this.child.push({[r]:i})}addChild(r,i){r.tagname==="__proto__"&&(r.tagname="#__proto__"),r[":@"]&&Object.keys(r[":@"]).length>0?this.child.push({[r.tagname]:r.child,":@":r[":@"]}):this.child.push({[r.tagname]:r.child}),i!==void 0&&(this.child[this.child.length-1][Bi]={startIndex:i})}static getMetaDataSymbol(){return Bi}}function ew(t,r){const i={};if(t[r+3]==="O"&&t[r+4]==="C"&&t[r+5]==="T"&&t[r+6]==="Y"&&t[r+7]==="P"&&t[r+8]==="E"){r=r+9;let u=1,l=!1,a=!1,f="";for(;r<t.length;r++)if(t[r]==="<"&&!a){if(l&&On(t,"!ENTITY",r)){r+=7;let c,d;[c,d,r]=tw(t,r+1),d.indexOf("&")===-1&&(i[c]={regx:RegExp(`&${c};`,"g"),val:d})}else if(l&&On(t,"!ELEMENT",r)){r+=8;const{index:c}=rw(t,r+1);r=c}else if(l&&On(t,"!ATTLIST",r))r+=8;else if(l&&On(t,"!NOTATION",r)){r+=9;const{index:c}=nw(t,r+1);r=c}else if(On(t,"!--",r))a=!0;else throw new Error("Invalid DOCTYPE");u++,f=""}else if(t[r]===">"){if(a?t[r-1]==="-"&&t[r-2]==="-"&&(a=!1,u--):u--,u===0)break}else t[r]==="["?l=!0:f+=t[r];if(u!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:i,i:r}}const hn=(t,r)=>{for(;r<t.length&&/\s/.test(t[r]);)r++;return r};function tw(t,r){r=hn(t,r);let i="";for(;r<t.length&&!/\s/.test(t[r])&&t[r]!=='"'&&t[r]!=="'";)i+=t[r],r++;if(fa(i),r=hn(t,r),t.substring(r,r+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[r]==="%")throw new Error("Parameter entities are not supported");let u="";return[r,u]=Ci(t,r,"entity"),r--,[i,u,r]}function nw(t,r){r=hn(t,r);let i="";for(;r<t.length&&!/\s/.test(t[r]);)i+=t[r],r++;fa(i),r=hn(t,r);const u=t.substring(r,r+6).toUpperCase();if(u!=="SYSTEM"&&u!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${u}"`);r+=u.length,r=hn(t,r);let l=null,a=null;if(u==="PUBLIC")[r,l]=Ci(t,r,"publicIdentifier"),r=hn(t,r),(t[r]==='"'||t[r]==="'")&&([r,a]=Ci(t,r,"systemIdentifier"));else if(u==="SYSTEM"&&([r,a]=Ci(t,r,"systemIdentifier"),!a))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:i,publicIdentifier:l,systemIdentifier:a,index:--r}}function Ci(t,r,i){let u="";const l=t[r];if(l!=='"'&&l!=="'")throw new Error(`Expected quoted string, found "${l}"`);for(r++;r<t.length&&t[r]!==l;)u+=t[r],r++;if(t[r]!==l)throw new Error(`Unterminated ${i} value`);return r++,[r,u]}function rw(t,r){r=hn(t,r);let i="";for(;r<t.length&&!/\s/.test(t[r]);)i+=t[r],r++;if(!fa(i))throw new Error(`Invalid element name: "${i}"`);r=hn(t,r);let u="";if(t[r]==="E"&&On(t,"MPTY",r))r+=4;else if(t[r]==="A"&&On(t,"NY",r))r+=2;else if(t[r]==="("){for(r++;r<t.length&&t[r]!==")";)u+=t[r],r++;if(t[r]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${t[r]}"`);return{elementName:i,contentModel:u.trim(),index:r}}function On(t,r,i){for(let u=0;u<r.length;u++)if(r[u]!==t[i+u+1])return!1;return!0}function fa(t){if(oa(t))return t;throw new Error(`Invalid entity name ${t}`)}const iw=/^[-+]?0x[a-fA-F0-9]+$/,sw=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,uw={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function aw(t,r={}){if(r=Object.assign({},uw,r),!t||typeof t!="string")return t;let i=t.trim();if(r.skipLike!==void 0&&r.skipLike.test(i))return t;if(t==="0")return 0;if(r.hex&&iw.test(i))return cw(i,16);if(i.search(/.+[eE].+/)!==-1)return ow(t,i,r);{const u=sw.exec(i);if(u){const l=u[1]||"",a=u[2];let f=fw(u[3]);const c=l?t[a.length+1]===".":t[a.length]===".";if(!r.leadingZeros&&(a.length>1||a.length===1&&!c))return t;{const d=Number(i),_=String(d);if(d===0)return d;if(_.search(/[eE]/)!==-1)return r.eNotation?d:t;if(i.indexOf(".")!==-1)return _==="0"||_===f||_===`${l}${f}`?d:t;let x=a?f:i;return a?x===_||l+x===_?d:t:x===_||x===l+_?d:t}}else return t}}const lw=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function ow(t,r,i){if(!i.eNotation)return t;const u=r.match(lw);if(u){let l=u[1]||"";const a=u[3].indexOf("e")===-1?"E":"e",f=u[2],c=l?t[f.length+1]===a:t[f.length]===a;return f.length>1&&c?t:f.length===1&&(u[3].startsWith(`.${a}`)||u[3][0]===a)?Number(r):i.leadingZeros&&!c?(r=(u[1]||"")+u[3],Number(r)):t}else return t}function fw(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function cw(t,r){if(parseInt)return parseInt(t,r);if(Number.parseInt)return Number.parseInt(t,r);if(window&&window.parseInt)return window.parseInt(t,r);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function hw(t){return typeof t=="function"?t:Array.isArray(t)?r=>{for(const i of t)if(typeof i=="string"&&r===i||i instanceof RegExp&&i.test(r))return!0}:()=>!1}class pw{constructor(r){this.options=r,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(i,u)=>String.fromCodePoint(Number.parseInt(u,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(i,u)=>String.fromCodePoint(Number.parseInt(u,16))}},this.addExternalEntities=dw,this.parseXml=yw,this.parseTextData=gw,this.resolveNameSpace=_w,this.buildAttributesMap=mw,this.isItStopNode=Ew,this.replaceEntitiesValue=bw,this.readStopNodeData=Tw,this.saveTextToParentTag=xw,this.addChild=ww,this.ignoreAttributesFn=hw(this.options.ignoreAttributes)}}function dw(t){const r=Object.keys(t);for(let i=0;i<r.length;i++){const u=r[i];this.lastEntities[u]={regex:new RegExp("&"+u+";","g"),val:t[u]}}}function gw(t,r,i,u,l,a,f){if(t!==void 0&&(this.options.trimValues&&!u&&(t=t.trim()),t.length>0)){f||(t=this.replaceEntitiesValue(t));const c=this.options.tagValueProcessor(r,t,i,l,a);return c==null?t:typeof c!=typeof t||c!==t?c:this.options.trimValues?Uu(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Uu(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function _w(t){if(this.options.removeNSPrefix){const r=t.split(":"),i=t.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(t=i+r[1])}return t}const vw=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function mw(t,r,i){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const u=xc(t,vw),l=u.length,a={};for(let f=0;f<l;f++){const c=this.resolveNameSpace(u[f][1]);if(this.ignoreAttributesFn(c,r))continue;let d=u[f][4],_=this.options.attributeNamePrefix+c;if(c.length)if(this.options.transformAttributeName&&(_=this.options.transformAttributeName(_)),_==="__proto__"&&(_="#__proto__"),d!==void 0){this.options.trimValues&&(d=d.trim()),d=this.replaceEntitiesValue(d);const x=this.options.attributeValueProcessor(c,d,r);x==null?a[_]=d:typeof x!=typeof d||x!==d?a[_]=x:a[_]=Uu(d,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[_]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){const f={};return f[this.options.attributesGroupName]=a,f}return a}}const yw=function(t){t=t.replace(/\r\n?/g,`
`);const r=new In("!xml");let i=r,u="",l="";for(let a=0;a<t.length;a++)if(t[a]==="<")if(t[a+1]==="/"){const c=Cn(t,">",a,"Closing Tag is not closed.");let d=t.substring(a+2,c).trim();if(this.options.removeNSPrefix){const T=d.indexOf(":");T!==-1&&(d=d.substr(T+1))}this.options.transformTagName&&(d=this.options.transformTagName(d)),i&&(u=this.saveTextToParentTag(u,i,l));const _=l.substring(l.lastIndexOf(".")+1);if(d&&this.options.unpairedTags.indexOf(d)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${d}>`);let x=0;_&&this.options.unpairedTags.indexOf(_)!==-1?(x=l.lastIndexOf(".",l.lastIndexOf(".")-1),this.tagsNodeStack.pop()):x=l.lastIndexOf("."),l=l.substring(0,x),i=this.tagsNodeStack.pop(),u="",a=c}else if(t[a+1]==="?"){let c=Fu(t,a,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(u=this.saveTextToParentTag(u,i,l),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){const d=new In(c.tagName);d.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(d[":@"]=this.buildAttributesMap(c.tagExp,l,c.tagName)),this.addChild(i,d,l,a)}a=c.closeIndex+1}else if(t.substr(a+1,3)==="!--"){const c=Cn(t,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){const d=t.substring(a+4,c-2);u=this.saveTextToParentTag(u,i,l),i.add(this.options.commentPropName,[{[this.options.textNodeName]:d}])}a=c}else if(t.substr(a+1,2)==="!D"){const c=ew(t,a);this.docTypeEntities=c.entities,a=c.i}else if(t.substr(a+1,2)==="!["){const c=Cn(t,"]]>",a,"CDATA is not closed.")-2,d=t.substring(a+9,c);u=this.saveTextToParentTag(u,i,l);let _=this.parseTextData(d,i.tagname,l,!0,!1,!0,!0);_==null&&(_=""),this.options.cdataPropName?i.add(this.options.cdataPropName,[{[this.options.textNodeName]:d}]):i.add(this.options.textNodeName,_),a=c+2}else{let c=Fu(t,a,this.options.removeNSPrefix),d=c.tagName;const _=c.rawTagName;let x=c.tagExp,T=c.attrExpPresent,N=c.closeIndex;this.options.transformTagName&&(d=this.options.transformTagName(d)),i&&u&&i.tagname!=="!xml"&&(u=this.saveTextToParentTag(u,i,l,!1));const $=i;$&&this.options.unpairedTags.indexOf($.tagname)!==-1&&(i=this.tagsNodeStack.pop(),l=l.substring(0,l.lastIndexOf("."))),d!==r.tagname&&(l+=l?"."+d:d);const G=a;if(this.isItStopNode(this.options.stopNodes,l,d)){let H="";if(x.length>0&&x.lastIndexOf("/")===x.length-1)d[d.length-1]==="/"?(d=d.substr(0,d.length-1),l=l.substr(0,l.length-1),x=d):x=x.substr(0,x.length-1),a=c.closeIndex;else if(this.options.unpairedTags.indexOf(d)!==-1)a=c.closeIndex;else{const y=this.readStopNodeData(t,_,N+1);if(!y)throw new Error(`Unexpected end of ${_}`);a=y.i,H=y.tagContent}const C=new In(d);d!==x&&T&&(C[":@"]=this.buildAttributesMap(x,l,d)),H&&(H=this.parseTextData(H,d,l,!0,T,!0,!0)),l=l.substr(0,l.lastIndexOf(".")),C.add(this.options.textNodeName,H),this.addChild(i,C,l,G)}else{if(x.length>0&&x.lastIndexOf("/")===x.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),l=l.substr(0,l.length-1),x=d):x=x.substr(0,x.length-1),this.options.transformTagName&&(d=this.options.transformTagName(d));const H=new In(d);d!==x&&T&&(H[":@"]=this.buildAttributesMap(x,l,d)),this.addChild(i,H,l,G),l=l.substr(0,l.lastIndexOf("."))}else{const H=new In(d);this.tagsNodeStack.push(i),d!==x&&T&&(H[":@"]=this.buildAttributesMap(x,l,d)),this.addChild(i,H,l,G),i=H}u="",a=N}}else u+=t[a];return r.child};function ww(t,r,i,u){this.options.captureMetaData||(u=void 0);const l=this.options.updateTag(r.tagname,i,r[":@"]);l===!1||(typeof l=="string"&&(r.tagname=l),t.addChild(r,u))}const bw=function(t){if(this.options.processEntities){for(let r in this.docTypeEntities){const i=this.docTypeEntities[r];t=t.replace(i.regx,i.val)}for(let r in this.lastEntities){const i=this.lastEntities[r];t=t.replace(i.regex,i.val)}if(this.options.htmlEntities)for(let r in this.htmlEntities){const i=this.htmlEntities[r];t=t.replace(i.regex,i.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function xw(t,r,i,u){return t&&(u===void 0&&(u=r.child.length===0),t=this.parseTextData(t,r.tagname,i,!1,r[":@"]?Object.keys(r[":@"]).length!==0:!1,u),t!==void 0&&t!==""&&r.add(this.options.textNodeName,t),t=""),t}function Ew(t,r,i){const u="*."+i;for(const l in t){const a=t[l];if(u===a||r===a)return!0}return!1}function Aw(t,r,i=">"){let u,l="";for(let a=r;a<t.length;a++){let f=t[a];if(u)f===u&&(u="");else if(f==='"'||f==="'")u=f;else if(f===i[0])if(i[1]){if(t[a+1]===i[1])return{data:l,index:a}}else return{data:l,index:a};else f==="	"&&(f=" ");l+=f}}function Cn(t,r,i,u){const l=t.indexOf(r,i);if(l===-1)throw new Error(u);return l+r.length-1}function Fu(t,r,i,u=">"){const l=Aw(t,r+1,u);if(!l)return;let a=l.data;const f=l.index,c=a.search(/\s/);let d=a,_=!0;c!==-1&&(d=a.substring(0,c),a=a.substring(c+1).trimStart());const x=d;if(i){const T=d.indexOf(":");T!==-1&&(d=d.substr(T+1),_=d!==l.data.substr(T+1))}return{tagName:d,tagExp:a,closeIndex:f,attrExpPresent:_,rawTagName:x}}function Tw(t,r,i){const u=i;let l=1;for(;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const a=Cn(t,">",i,`${r} is not closed`);if(t.substring(i+2,a).trim()===r&&(l--,l===0))return{tagContent:t.substring(u,i),i:a};i=a}else if(t[i+1]==="?")i=Cn(t,"?>",i+1,"StopNode is not closed.");else if(t.substr(i+1,3)==="!--")i=Cn(t,"-->",i+3,"StopNode is not closed.");else if(t.substr(i+1,2)==="![")i=Cn(t,"]]>",i,"StopNode is not closed.")-2;else{const a=Fu(t,i,">");a&&((a&&a.tagName)===r&&a.tagExp[a.tagExp.length-1]!=="/"&&l++,i=a.closeIndex)}}function Uu(t,r,i){if(r&&typeof t=="string"){const u=t.trim();return u==="true"?!0:u==="false"?!1:aw(t,i)}else return Hy(t)?t:""}const Eu=In.getMetaDataSymbol();function Nw(t,r){return Ec(t,r)}function Ec(t,r,i){let u;const l={};for(let a=0;a<t.length;a++){const f=t[a],c=Sw(f);let d="";if(i===void 0?d=c:d=i+"."+c,c===r.textNodeName)u===void 0?u=f[c]:u+=""+f[c];else{if(c===void 0)continue;if(f[c]){let _=Ec(f[c],r,d);const x=Ow(_,r);f[Eu]!==void 0&&(_[Eu]=f[Eu]),f[":@"]?Iw(_,f[":@"],d,r):Object.keys(_).length===1&&_[r.textNodeName]!==void 0&&!r.alwaysCreateTextNode?_=_[r.textNodeName]:Object.keys(_).length===0&&(r.alwaysCreateTextNode?_[r.textNodeName]="":_=""),l[c]!==void 0&&l.hasOwnProperty(c)?(Array.isArray(l[c])||(l[c]=[l[c]]),l[c].push(_)):r.isArray(c,d,x)?l[c]=[_]:l[c]=_}}}return typeof u=="string"?u.length>0&&(l[r.textNodeName]=u):u!==void 0&&(l[r.textNodeName]=u),l}function Sw(t){const r=Object.keys(t);for(let i=0;i<r.length;i++){const u=r[i];if(u!==":@")return u}}function Iw(t,r,i,u){if(r){const l=Object.keys(r),a=l.length;for(let f=0;f<a;f++){const c=l[f];u.isArray(c,i+"."+c,!0,!0)?t[c]=[r[c]]:t[c]=r[c]}}}function Ow(t,r){const{textNodeName:i}=r,u=Object.keys(t).length;return!!(u===0||u===1&&(t[i]||typeof t[i]=="boolean"||t[i]===0))}class Ac{constructor(r){this.externalEntities={},this.options=jy(r)}parse(r,i){if(typeof r!="string")if(r.toString)r=r.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(i){i===!0&&(i={});const a=qy(r,i);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}const u=new pw(this.options);u.addExternalEntities(this.externalEntities);const l=u.parseXml(r);return this.options.preserveOrder||l===void 0?l:Nw(l,this.options)}addEntity(r,i){if(i.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(r.indexOf("&")!==-1||r.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(i==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[r]=i}static getMetaDataSymbol(){return In.getMetaDataSymbol()}}var Cw=function(t,r){var l=new Ac({ignoreAttributes:!1,attributeNamePrefix:"",parseAttributeValue:!0}).parse(t)["nex:nexml"].trees.tree.map(function(a){var f=a.node.map(T=>T),c=f.reduce(function(T,N){return N.edges=[],N.name=N.id,T[N.id]=N,T},{}),d=f.filter(T=>T.root),_=d>0?d[0].id:f[0].id;c[_].name="root",a.edge.map(T=>T).forEach(function(T){c[T.source].edges.push(T)});function x(T,N){if(T.edges){var $=Gi(T.edges,"target");T.children=Un(aa(c,$)),T.children.forEach(function(G,H){G.attribute=T.edges[H].length||""}),T.children.forEach(x),T.annotation=""}}return x(c[_]),c[_]});return l};function Mw(t,r,i,u){let l=this.nodes.descendants();if(t.parent&&l.indexOf(t)>=0){let f=t.parent.children.indexOf(t),c={name:i,parent:t.parent,attribute:u?u[2]:null,original_child_order:t.original_child_order},d={name:r,parent:c,attribute:u?u[1]:null,original_child_order:2};c.children=[t,d],t.parent.children[f]=c,t.parent=c,t.attribute=u?u[0]:null,t.original_child_order=1}return this}function Lw(t,r){return t.children?t.children.push(r):t.children=[r],t}function Pw(t,r){return{data:{name:t,attribute:r?r[1]:null},parent:""}}function Rw(t){let r=this.nodes.descendants();if(typeof t!="number")return this.deleteANode(r.indexOf(t));if(t>0&&t<r.length){let i=r[t];if(i.parent){let u=i.parent.children.indexOf(i);u>=0&&(r.splice(t,1),i.children&&i.children.forEach(function(l){l.original_child_order=i.parent.children.length,i.parent.children.push(l),l.parent=i.parent}),i.parent.children.length>2?i.parent.children.splice(u,1):i.parent.parent?(i.parent.parent.children[i.parent.parent.children.indexOf(i.parent)]=i.parent.children[1-u],i.parent.children[1-u].parent=i.parent.parent,r.splice(r.indexOf(i.parent),1)):(r.splice(0,1),r.parent=null,delete r.data.attribute,delete r.data.annotation,delete r.data.original_child_order,r.name="root",r.data.name="root"))}}return this}function zw(){return yt(this.nodes.descendants(),t=>!$i(t,"children"))}function Bw(){return yt(this.nodes.descendants(),t=>$i(t,"children"))}function Fw(){return this.nodes}function Uw(){return this.nodes}function Ww(t){return yt(this.nodes.descendants(),r=>r.data.name==t)[0]}function $w(t){we(this.nodes.descendants(),function(r){r.data&&r.data.name in t&&(r.annotations=t[r.data.name])})}function Ae(t){return!$i(t,"children")}function Hw(t,r){return this.nodes.each(function(i){t in i&&(r&&(i[r]=i[t]),delete i[t])}),this}function Gw(t){t||this.nodes.each(r=>{Ae(r)||(r[this.selection_attribute_name]=!1,r.data.traits||(r.data.traits={}),r.data.traits[this.selection_attribute_name]=r[this.selection_attribute_name])})}function Tc(t,r,i){let u=[];function l(a){Ae(a)?r&&a!=t&&u.push(a):(i&&a!=t&&u.push(a),a.children.forEach(l))}return l(t),u}const qw=Object.freeze(Object.defineProperty({__proto__:null,addChild:Lw,assignAttributes:$w,clearInternalNodes:Gw,createNode:Pw,deleteANode:Rw,getInternals:Bw,getNodeByName:Ww,getNodes:Uw,getRootNode:Fw,getTips:zw,graftANode:Mw,isLeafNode:Ae,selectAllDescendants:Tc,updateKeyName:Hw},Symbol.toStringTag,{value:"Module"}));function Pr(t,r={}){const i=/^-?\d+(\.\d+)?$/;let u=r.left_delimiter||"{",l=r.right_delimiter||"}",a=[];function f(){let P={name:null},z=a[a.length-1];"children"in z||(z.children=[]),a.push(P),z.children.push(a[a.length-1]),a[a.length-1].original_child_order=z.children.length}function c(){let P=a.pop();P.name=x,"children"in P?P.bootstrap_values=x:P.name=x,P.attribute=T,u=="["&&N.includes("&&NHX")?N.split(":").slice(1).forEach(z=>{const[K,ue]=z.split("=");P[K]=i.test(ue)?+ue:ue}):P.annotation=N,x="",T="",N=""}function d(P){return{json:null,error:"Unexpected '"+t[P]+"' in '"+t.substring(P-20,P+1)+"[ERROR HERE]"+t.substring(P+1,P+20)+"'"}}let _=0,x="",T="",N="",$=null,G={"'":1,'"':1},H={name:"root"};a.push(H);for(var C=/\s/,y=0;y<t.length;y++)try{var R=t[y];switch(_){case 0:{R=="("&&(f(),_=1);break}case 1:case 3:{if(R==":")_=3;else if(R==","||R==")")try{c(),_=1,R==","&&f()}catch{return d(y)}else if(R=="("){if(x.length>0)return d(y);f()}else if(R in G){if(_==1&&x.length===0&&T.length===0&&N.length===0){_=2,$=R;continue}return d(y)}else if(R==u){if(N.length)return d(y);_=4}else if(_==3)T+=R;else{if(C.test(R))continue;if(R==";"){y=t.length;break}x+=R}break}case 2:{if(R==$){if(y<t.length-1&&t[y+1]==$){y++,x+=$;continue}$=0,_=1;continue}else x+=R;break}case 4:{if(R==l)_=3;else{if(R==u)return d(y);N+=R}break}}}catch{return d(y)}return a.length!=1?d(t.length-1):{json:H,error:null}}function Yw(t,r){let i=this;t||(t=a=>"");function u(a){if(a.notshown)return;if(Ae(a)||(l.push("("),a.children.forEach(function(c,d){d&&l.push(","),u(c)}),l.push(")")),a.data.name!=="root"){const c=a.data.name.replaceAll("'","''");/\W/.test(c)?l.push("'"+c+"'"):l.push(c)}l.push(t(a));let f=i.branch_length_accessor(a);f!==void 0&&l.push(":"+f)}let l=[];return t=t||"",u(r||this.nodes),l.join("")+";"}function Vw(t){let r=t,i=r.toUpperCase().indexOf("BEGIN DATA;"),u=r.slice(i);if(u.length<2)return"";i=u.toUpperCase().indexOf("END;");let l=u.slice(0,i);u=De(l.split(";"),d=>d.trim());let a=yt(u,d=>d.toUpperCase().startsWith("DIMENSION"));a=a[0].split(" "),a=Oi(De(Pn(a),d=>d.split("=")));let f=yt(u,d=>d.toUpperCase().startsWith("FORMAT"));f=f[0].split(" "),f=Oi(De(Pn(f),d=>d.split("="))),f.symbols=fc(f.symbols.split(""),d=>d=='"');let c=yt(u,d=>d.toUpperCase().startsWith("MATRIX"));return c=c[0].split(`
`),c=Oi(De(Pn(c),d=>_c(d.split(" ")))),c=Jf(c,(d,_)=>d=="?"?f.symbols:Array(d)),{dimensions:a,format:f,matrix:c}}function Xw(t,r,i){we(t.getTips(),u=>{u.data.test=i.matrix[u.data.name]})}function Nc(t){let r=t,i=r.toUpperCase().indexOf("BEGIN TREES;"),u=r.slice(i);if(u.length<2)return"";i=u.toUpperCase().indexOf("END;");let a=u.slice(0,i).split(`
`);return a=yt(a,f=>f.trim().toUpperCase().startsWith("TREE")),Pr(a[0])}const kw=Object.freeze(Object.defineProperty({__proto__:null,default:Nc,loadAnnotations:Xw,parseAnnotations:Vw},Symbol.toStringTag,{value:"Module"}));function Wu(t){var r={};if(t.nodeType==1){if(t.attributes.length>0){r["@attributes"]={};for(var i=0;i<t.attributes.length;i++){var u=t.attributes.item(i);r["@attributes"][u.nodeName]=u.nodeValue}}}else t.nodeType==3&&(r=t.nodeValue);if(t.hasChildNodes()&&t.childNodes.length===1&&t.childNodes[0].nodeType===3)r=t.childNodes[0].nodeValue;else if(t.hasChildNodes())for(var l=0;l<t.childNodes.length;l++){var a=t.childNodes.item(l),f=a.nodeName;if(typeof r[f]>"u")r[f]=Wu(a);else{if(typeof r[f].push>"u"){var c=r[f];r[f]=[],r[f].push(c)}r[f].push(Wu(a))}}return r}var Sc=function(t,r){function i(a,f){a.clade&&(Array.isArray(a.clade)||(a.clade=[a.clade]),a.clade.forEach(i),a.children=a.clade,delete a.clade),a.annotation=1,a.attribute="0.01",a.branch_length&&(a.attribute=a.branch_length),a.taxonomy&&(a.name=a.taxonomy.scientific_name),a.annotation=""}var u;typeof t=="string"&&(DOMParser?t=new DOMParser().parseFromString(t,"text/xml"):t=new Ac().parse(t)),t=Wu(t);var l=t.phyloxml.phylogeny;return Array.isArray(l)&&(l=l[0],console.warn("PhyloXML files with multiple phylogenies are not currently supported. Only the first phylogeny will be loaded.")),u=l.clade,u.name="root",i(u),{json:u,error:null}};function Kw(t,r){r.left_delimiter="[",r.right_delimiter="]";const i=Pr(t,r);function u(l){if(l.annotation){l.beast={};const f=l.annotation.split(/=|,|{|}/).filter(c=>c);for(var a=0;a<f.length;a+=2){let c=f[a].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(f[a+2])?l.beast[c]=+f[a+1]:(l.beast[c]=[+f[a+1],+f[a+2]],a++)}}l.annotation=void 0,l.children&&l.children.forEach(u)}return u(i.json),i}var Au={nexml:Cw,phyloxml:Sc,nexus:Nc,nwk:Pr,nhx:Pr,beast:Kw};function Zw(){let r=this.getTips(),i=De(r,u=>({name:u.data.name,length:parseFloat(u.data.attribute)}));return i=dc(i,u=>-u.length),i}function Jw(t,r){function i(l,a){if(a.mp=[[0,0],[!1,!1]],Ae(a))a.mp[1][0]=a.mp[1][1]=a[l]||!1,a.mp[0][0]=a.mp[1][0]?1:0,a.mp[0][1]=1-a.mp[0][0];else{a.children.forEach(u);var f=a.children.reduce(function(d,_){return _.mp[0][0]+d},0),c=a.children.reduce(function(d,_){return _.mp[0][1]+d},0);a[l]?(a.mp[0][0]=c+1,a.mp[1][0]=!0,a.mp[0][1]=c,a.mp[1][1]=!0):(f<c+1?(a.mp[0][0]=f,a.mp[1][0]=!1):(a.mp[0][0]=c+1,a.mp[1][0]=!0),c<f+1?(a.mp[0][1]=c,a.mp[1][1]=!0):(a.mp[0][1]=f+1,a.mp[1][1]=!1))}}const u=Gt(i,r);u(this.nodes),this.nodes.each(l=>{l.parent?l.mp=l.mp[1][l.parent.mp?1:0]:l.mp=l.mp[1][l.mp[0][0]<l.mp[0][1]?0:1]}),this.display.modifySelection((l,a)=>Ae(l.target)?l.target[r]:l.target.mp)}var Fi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Fi.exports;(function(t,r){(function(){var i,u="4.17.21",l=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",c="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",_=500,x="__lodash_placeholder__",T=1,N=2,$=4,G=1,H=2,C=1,y=2,R=4,P=8,z=16,K=32,ue=64,de=128,ce=256,Fe=512,me=30,Me="...",bt=800,Le=16,E=1,U=2,M=3,B=1/0,Y=9007199254740991,k=17976931348623157e292,V=NaN,X=4294967295,ee=X-1,ke=X>>>1,Te=[["ary",de],["bind",C],["bindKey",y],["curry",P],["curryRight",z],["flip",Fe],["partial",K],["partialRight",ue],["rearg",ce]],Se="[object Arguments]",We="[object Array]",_e="[object AsyncFunction]",Pe="[object Boolean]",xt="[object Date]",dn="[object DOMException]",gn="[object Error]",_n="[object Function]",Ft="[object GeneratorFunction]",it="[object Map]",vn="[object Number]",Vi="[object Null]",Z="[object Object]",Oe="[object Promise]",mn="[object Proxy]",st="[object RegExp]",Mt="[object Set]",ur="[object String]",Ur="[object Symbol]",Wc="[object Undefined]",ar="[object WeakMap]",$c="[object WeakSet]",lr="[object ArrayBuffer]",Hn="[object DataView]",Xi="[object Float32Array]",ki="[object Float64Array]",Ki="[object Int8Array]",Zi="[object Int16Array]",Ji="[object Int32Array]",Qi="[object Uint8Array]",Di="[object Uint8ClampedArray]",ji="[object Uint16Array]",es="[object Uint32Array]",Hc=/\b__p \+= '';/g,Gc=/\b(__p \+=) '' \+/g,qc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,da=/&(?:amp|lt|gt|quot|#39);/g,ga=/[&<>"']/g,Yc=RegExp(da.source),Vc=RegExp(ga.source),Xc=/<%-([\s\S]+?)%>/g,kc=/<%([\s\S]+?)%>/g,_a=/<%=([\s\S]+?)%>/g,Kc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zc=/^\w*$/,Jc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ts=/[\\^$.*+?()[\]{}|]/g,Qc=RegExp(ts.source),ns=/^\s+/,Dc=/\s/,jc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eh=/\{\n\/\* \[wrapped with (.+)\] \*/,th=/,? & /,nh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rh=/[()=,{}\[\]\/\s]/,ih=/\\(\\)?/g,sh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,va=/\w*$/,uh=/^[-+]0x[0-9a-f]+$/i,ah=/^0b[01]+$/i,lh=/^\[object .+?Constructor\]$/,oh=/^0o[0-7]+$/i,fh=/^(?:0|[1-9]\d*)$/,ch=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wr=/($^)/,hh=/['\n\r\u2028\u2029\\]/g,$r="\\ud800-\\udfff",ph="\\u0300-\\u036f",dh="\\ufe20-\\ufe2f",gh="\\u20d0-\\u20ff",ma=ph+dh+gh,ya="\\u2700-\\u27bf",wa="a-z\\xdf-\\xf6\\xf8-\\xff",_h="\\xac\\xb1\\xd7\\xf7",vh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mh="\\u2000-\\u206f",yh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ba="A-Z\\xc0-\\xd6\\xd8-\\xde",xa="\\ufe0e\\ufe0f",Ea=_h+vh+mh+yh,rs="['’]",wh="["+$r+"]",Aa="["+Ea+"]",Hr="["+ma+"]",Ta="\\d+",bh="["+ya+"]",Na="["+wa+"]",Sa="[^"+$r+Ea+Ta+ya+wa+ba+"]",is="\\ud83c[\\udffb-\\udfff]",xh="(?:"+Hr+"|"+is+")",Ia="[^"+$r+"]",ss="(?:\\ud83c[\\udde6-\\uddff]){2}",us="[\\ud800-\\udbff][\\udc00-\\udfff]",Gn="["+ba+"]",Oa="\\u200d",Ca="(?:"+Na+"|"+Sa+")",Eh="(?:"+Gn+"|"+Sa+")",Ma="(?:"+rs+"(?:d|ll|m|re|s|t|ve))?",La="(?:"+rs+"(?:D|LL|M|RE|S|T|VE))?",Pa=xh+"?",Ra="["+xa+"]?",Ah="(?:"+Oa+"(?:"+[Ia,ss,us].join("|")+")"+Ra+Pa+")*",Th="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",za=Ra+Pa+Ah,Sh="(?:"+[bh,ss,us].join("|")+")"+za,Ih="(?:"+[Ia+Hr+"?",Hr,ss,us,wh].join("|")+")",Oh=RegExp(rs,"g"),Ch=RegExp(Hr,"g"),as=RegExp(is+"(?="+is+")|"+Ih+za,"g"),Mh=RegExp([Gn+"?"+Na+"+"+Ma+"(?="+[Aa,Gn,"$"].join("|")+")",Eh+"+"+La+"(?="+[Aa,Gn+Ca,"$"].join("|")+")",Gn+"?"+Ca+"+"+Ma,Gn+"+"+La,Nh,Th,Ta,Sh].join("|"),"g"),Lh=RegExp("["+Oa+$r+ma+xa+"]"),Ph=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zh=-1,xe={};xe[Xi]=xe[ki]=xe[Ki]=xe[Zi]=xe[Ji]=xe[Qi]=xe[Di]=xe[ji]=xe[es]=!0,xe[Se]=xe[We]=xe[lr]=xe[Pe]=xe[Hn]=xe[xt]=xe[gn]=xe[_n]=xe[it]=xe[vn]=xe[Z]=xe[st]=xe[Mt]=xe[ur]=xe[ar]=!1;var be={};be[Se]=be[We]=be[lr]=be[Hn]=be[Pe]=be[xt]=be[Xi]=be[ki]=be[Ki]=be[Zi]=be[Ji]=be[it]=be[vn]=be[Z]=be[st]=be[Mt]=be[ur]=be[Ur]=be[Qi]=be[Di]=be[ji]=be[es]=!0,be[gn]=be[_n]=be[ar]=!1;var Bh={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Fh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$h=parseFloat,Hh=parseInt,Ba=typeof Tr=="object"&&Tr&&Tr.Object===Object&&Tr,Gh=typeof self=="object"&&self&&self.Object===Object&&self,Ye=Ba||Gh||Function("return this")(),ls=r&&!r.nodeType&&r,yn=ls&&!0&&t&&!t.nodeType&&t,Fa=yn&&yn.exports===ls,os=Fa&&Ba.process,Et=function(){try{var w=yn&&yn.require&&yn.require("util").types;return w||os&&os.binding&&os.binding("util")}catch{}}(),Ua=Et&&Et.isArrayBuffer,Wa=Et&&Et.isDate,$a=Et&&Et.isMap,Ha=Et&&Et.isRegExp,Ga=Et&&Et.isSet,qa=Et&&Et.isTypedArray;function pt(w,S,A){switch(A.length){case 0:return w.call(S);case 1:return w.call(S,A[0]);case 2:return w.call(S,A[0],A[1]);case 3:return w.call(S,A[0],A[1],A[2])}return w.apply(S,A)}function qh(w,S,A,W){for(var j=-1,fe=w==null?0:w.length;++j<fe;){var $e=w[j];S(W,$e,A($e),w)}return W}function At(w,S){for(var A=-1,W=w==null?0:w.length;++A<W&&S(w[A],A,w)!==!1;);return w}function Yh(w,S){for(var A=w==null?0:w.length;A--&&S(w[A],A,w)!==!1;);return w}function Ya(w,S){for(var A=-1,W=w==null?0:w.length;++A<W;)if(!S(w[A],A,w))return!1;return!0}function nn(w,S){for(var A=-1,W=w==null?0:w.length,j=0,fe=[];++A<W;){var $e=w[A];S($e,A,w)&&(fe[j++]=$e)}return fe}function Gr(w,S){var A=w==null?0:w.length;return!!A&&qn(w,S,0)>-1}function fs(w,S,A){for(var W=-1,j=w==null?0:w.length;++W<j;)if(A(S,w[W]))return!0;return!1}function Ne(w,S){for(var A=-1,W=w==null?0:w.length,j=Array(W);++A<W;)j[A]=S(w[A],A,w);return j}function rn(w,S){for(var A=-1,W=S.length,j=w.length;++A<W;)w[j+A]=S[A];return w}function cs(w,S,A,W){var j=-1,fe=w==null?0:w.length;for(W&&fe&&(A=w[++j]);++j<fe;)A=S(A,w[j],j,w);return A}function Vh(w,S,A,W){var j=w==null?0:w.length;for(W&&j&&(A=w[--j]);j--;)A=S(A,w[j],j,w);return A}function hs(w,S){for(var A=-1,W=w==null?0:w.length;++A<W;)if(S(w[A],A,w))return!0;return!1}var Xh=ps("length");function kh(w){return w.split("")}function Kh(w){return w.match(nh)||[]}function Va(w,S,A){var W;return A(w,function(j,fe,$e){if(S(j,fe,$e))return W=fe,!1}),W}function qr(w,S,A,W){for(var j=w.length,fe=A+(W?1:-1);W?fe--:++fe<j;)if(S(w[fe],fe,w))return fe;return-1}function qn(w,S,A){return S===S?up(w,S,A):qr(w,Xa,A)}function Zh(w,S,A,W){for(var j=A-1,fe=w.length;++j<fe;)if(W(w[j],S))return j;return-1}function Xa(w){return w!==w}function ka(w,S){var A=w==null?0:w.length;return A?gs(w,S)/A:V}function ps(w){return function(S){return S==null?i:S[w]}}function ds(w){return function(S){return w==null?i:w[S]}}function Ka(w,S,A,W,j){return j(w,function(fe,$e,ye){A=W?(W=!1,fe):S(A,fe,$e,ye)}),A}function Jh(w,S){var A=w.length;for(w.sort(S);A--;)w[A]=w[A].value;return w}function gs(w,S){for(var A,W=-1,j=w.length;++W<j;){var fe=S(w[W]);fe!==i&&(A=A===i?fe:A+fe)}return A}function _s(w,S){for(var A=-1,W=Array(w);++A<w;)W[A]=S(A);return W}function Qh(w,S){return Ne(S,function(A){return[A,w[A]]})}function Za(w){return w&&w.slice(0,ja(w)+1).replace(ns,"")}function dt(w){return function(S){return w(S)}}function vs(w,S){return Ne(S,function(A){return w[A]})}function or(w,S){return w.has(S)}function Ja(w,S){for(var A=-1,W=w.length;++A<W&&qn(S,w[A],0)>-1;);return A}function Qa(w,S){for(var A=w.length;A--&&qn(S,w[A],0)>-1;);return A}function Dh(w,S){for(var A=w.length,W=0;A--;)w[A]===S&&++W;return W}var jh=ds(Bh),ep=ds(Fh);function tp(w){return"\\"+Wh[w]}function np(w,S){return w==null?i:w[S]}function Yn(w){return Lh.test(w)}function rp(w){return Ph.test(w)}function ip(w){for(var S,A=[];!(S=w.next()).done;)A.push(S.value);return A}function ms(w){var S=-1,A=Array(w.size);return w.forEach(function(W,j){A[++S]=[j,W]}),A}function Da(w,S){return function(A){return w(S(A))}}function sn(w,S){for(var A=-1,W=w.length,j=0,fe=[];++A<W;){var $e=w[A];($e===S||$e===x)&&(w[A]=x,fe[j++]=A)}return fe}function Yr(w){var S=-1,A=Array(w.size);return w.forEach(function(W){A[++S]=W}),A}function sp(w){var S=-1,A=Array(w.size);return w.forEach(function(W){A[++S]=[W,W]}),A}function up(w,S,A){for(var W=A-1,j=w.length;++W<j;)if(w[W]===S)return W;return-1}function ap(w,S,A){for(var W=A+1;W--;)if(w[W]===S)return W;return W}function Vn(w){return Yn(w)?op(w):Xh(w)}function Lt(w){return Yn(w)?fp(w):kh(w)}function ja(w){for(var S=w.length;S--&&Dc.test(w.charAt(S)););return S}var lp=ds(Uh);function op(w){for(var S=as.lastIndex=0;as.test(w);)++S;return S}function fp(w){return w.match(as)||[]}function cp(w){return w.match(Mh)||[]}var hp=function w(S){S=S==null?Ye:Xn.defaults(Ye.Object(),S,Xn.pick(Ye,Rh));var A=S.Array,W=S.Date,j=S.Error,fe=S.Function,$e=S.Math,ye=S.Object,ys=S.RegExp,pp=S.String,Tt=S.TypeError,Vr=A.prototype,dp=fe.prototype,kn=ye.prototype,Xr=S["__core-js_shared__"],kr=dp.toString,ge=kn.hasOwnProperty,gp=0,el=function(){var e=/[^.]+$/.exec(Xr&&Xr.keys&&Xr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Kr=kn.toString,_p=kr.call(ye),vp=Ye._,mp=ys("^"+kr.call(ge).replace(ts,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zr=Fa?S.Buffer:i,un=S.Symbol,Jr=S.Uint8Array,tl=Zr?Zr.allocUnsafe:i,Qr=Da(ye.getPrototypeOf,ye),nl=ye.create,rl=kn.propertyIsEnumerable,Dr=Vr.splice,il=un?un.isConcatSpreadable:i,fr=un?un.iterator:i,wn=un?un.toStringTag:i,jr=function(){try{var e=Tn(ye,"defineProperty");return e({},"",{}),e}catch{}}(),yp=S.clearTimeout!==Ye.clearTimeout&&S.clearTimeout,wp=W&&W.now!==Ye.Date.now&&W.now,bp=S.setTimeout!==Ye.setTimeout&&S.setTimeout,ei=$e.ceil,ti=$e.floor,ws=ye.getOwnPropertySymbols,xp=Zr?Zr.isBuffer:i,sl=S.isFinite,Ep=Vr.join,Ap=Da(ye.keys,ye),He=$e.max,Ke=$e.min,Tp=W.now,Np=S.parseInt,ul=$e.random,Sp=Vr.reverse,bs=Tn(S,"DataView"),cr=Tn(S,"Map"),xs=Tn(S,"Promise"),Kn=Tn(S,"Set"),hr=Tn(S,"WeakMap"),pr=Tn(ye,"create"),ni=hr&&new hr,Zn={},Ip=Nn(bs),Op=Nn(cr),Cp=Nn(xs),Mp=Nn(Kn),Lp=Nn(hr),ri=un?un.prototype:i,dr=ri?ri.valueOf:i,al=ri?ri.toString:i;function p(e){if(Ce(e)&&!te(e)&&!(e instanceof le)){if(e instanceof Nt)return e;if(ge.call(e,"__wrapped__"))return lo(e)}return new Nt(e)}var Jn=function(){function e(){}return function(n){if(!Ie(n))return{};if(nl)return nl(n);e.prototype=n;var s=new e;return e.prototype=i,s}}();function ii(){}function Nt(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}p.templateSettings={escape:Xc,evaluate:kc,interpolate:_a,variable:"",imports:{_:p}},p.prototype=ii.prototype,p.prototype.constructor=p,Nt.prototype=Jn(ii.prototype),Nt.prototype.constructor=Nt;function le(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=X,this.__views__=[]}function Pp(){var e=new le(this.__wrapped__);return e.__actions__=ut(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ut(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ut(this.__views__),e}function Rp(){if(this.__filtered__){var e=new le(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function zp(){var e=this.__wrapped__.value(),n=this.__dir__,s=te(e),o=n<0,h=s?e.length:0,g=kd(0,h,this.__views__),v=g.start,m=g.end,b=m-v,I=o?m:v-1,O=this.__iteratees__,L=O.length,F=0,q=Ke(b,this.__takeCount__);if(!s||!o&&h==b&&q==b)return Ml(e,this.__actions__);var Q=[];e:for(;b--&&F<q;){I+=n;for(var ie=-1,D=e[I];++ie<L;){var ae=O[ie],oe=ae.iteratee,vt=ae.type,nt=oe(D);if(vt==U)D=nt;else if(!nt){if(vt==E)continue e;break e}}Q[F++]=D}return Q}le.prototype=Jn(ii.prototype),le.prototype.constructor=le;function bn(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var o=e[n];this.set(o[0],o[1])}}function Bp(){this.__data__=pr?pr(null):{},this.size=0}function Fp(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function Up(e){var n=this.__data__;if(pr){var s=n[e];return s===d?i:s}return ge.call(n,e)?n[e]:i}function Wp(e){var n=this.__data__;return pr?n[e]!==i:ge.call(n,e)}function $p(e,n){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=pr&&n===i?d:n,this}bn.prototype.clear=Bp,bn.prototype.delete=Fp,bn.prototype.get=Up,bn.prototype.has=Wp,bn.prototype.set=$p;function qt(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var o=e[n];this.set(o[0],o[1])}}function Hp(){this.__data__=[],this.size=0}function Gp(e){var n=this.__data__,s=si(n,e);if(s<0)return!1;var o=n.length-1;return s==o?n.pop():Dr.call(n,s,1),--this.size,!0}function qp(e){var n=this.__data__,s=si(n,e);return s<0?i:n[s][1]}function Yp(e){return si(this.__data__,e)>-1}function Vp(e,n){var s=this.__data__,o=si(s,e);return o<0?(++this.size,s.push([e,n])):s[o][1]=n,this}qt.prototype.clear=Hp,qt.prototype.delete=Gp,qt.prototype.get=qp,qt.prototype.has=Yp,qt.prototype.set=Vp;function Yt(e){var n=-1,s=e==null?0:e.length;for(this.clear();++n<s;){var o=e[n];this.set(o[0],o[1])}}function Xp(){this.size=0,this.__data__={hash:new bn,map:new(cr||qt),string:new bn}}function kp(e){var n=vi(this,e).delete(e);return this.size-=n?1:0,n}function Kp(e){return vi(this,e).get(e)}function Zp(e){return vi(this,e).has(e)}function Jp(e,n){var s=vi(this,e),o=s.size;return s.set(e,n),this.size+=s.size==o?0:1,this}Yt.prototype.clear=Xp,Yt.prototype.delete=kp,Yt.prototype.get=Kp,Yt.prototype.has=Zp,Yt.prototype.set=Jp;function xn(e){var n=-1,s=e==null?0:e.length;for(this.__data__=new Yt;++n<s;)this.add(e[n])}function Qp(e){return this.__data__.set(e,d),this}function Dp(e){return this.__data__.has(e)}xn.prototype.add=xn.prototype.push=Qp,xn.prototype.has=Dp;function Pt(e){var n=this.__data__=new qt(e);this.size=n.size}function jp(){this.__data__=new qt,this.size=0}function ed(e){var n=this.__data__,s=n.delete(e);return this.size=n.size,s}function td(e){return this.__data__.get(e)}function nd(e){return this.__data__.has(e)}function rd(e,n){var s=this.__data__;if(s instanceof qt){var o=s.__data__;if(!cr||o.length<l-1)return o.push([e,n]),this.size=++s.size,this;s=this.__data__=new Yt(o)}return s.set(e,n),this.size=s.size,this}Pt.prototype.clear=jp,Pt.prototype.delete=ed,Pt.prototype.get=td,Pt.prototype.has=nd,Pt.prototype.set=rd;function ll(e,n){var s=te(e),o=!s&&Sn(e),h=!s&&!o&&cn(e),g=!s&&!o&&!h&&er(e),v=s||o||h||g,m=v?_s(e.length,pp):[],b=m.length;for(var I in e)(n||ge.call(e,I))&&!(v&&(I=="length"||h&&(I=="offset"||I=="parent")||g&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||Kt(I,b)))&&m.push(I);return m}function ol(e){var n=e.length;return n?e[Ps(0,n-1)]:i}function id(e,n){return mi(ut(e),En(n,0,e.length))}function sd(e){return mi(ut(e))}function Es(e,n,s){(s!==i&&!Rt(e[n],s)||s===i&&!(n in e))&&Vt(e,n,s)}function gr(e,n,s){var o=e[n];(!(ge.call(e,n)&&Rt(o,s))||s===i&&!(n in e))&&Vt(e,n,s)}function si(e,n){for(var s=e.length;s--;)if(Rt(e[s][0],n))return s;return-1}function ud(e,n,s,o){return an(e,function(h,g,v){n(o,h,s(h),v)}),o}function fl(e,n){return e&&Wt(n,Ge(n),e)}function ad(e,n){return e&&Wt(n,lt(n),e)}function Vt(e,n,s){n=="__proto__"&&jr?jr(e,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[n]=s}function As(e,n){for(var s=-1,o=n.length,h=A(o),g=e==null;++s<o;)h[s]=g?i:iu(e,n[s]);return h}function En(e,n,s){return e===e&&(s!==i&&(e=e<=s?e:s),n!==i&&(e=e>=n?e:n)),e}function St(e,n,s,o,h,g){var v,m=n&T,b=n&N,I=n&$;if(s&&(v=h?s(e,o,h,g):s(e)),v!==i)return v;if(!Ie(e))return e;var O=te(e);if(O){if(v=Zd(e),!m)return ut(e,v)}else{var L=Ze(e),F=L==_n||L==Ft;if(cn(e))return Rl(e,m);if(L==Z||L==Se||F&&!h){if(v=b||F?{}:jl(e),!m)return b?Ud(e,ad(v,e)):Fd(e,fl(v,e))}else{if(!be[L])return h?e:{};v=Jd(e,L,m)}}g||(g=new Pt);var q=g.get(e);if(q)return q;g.set(e,v),Oo(e)?e.forEach(function(D){v.add(St(D,n,s,D,e,g))}):So(e)&&e.forEach(function(D,ae){v.set(ae,St(D,n,s,ae,e,g))});var Q=I?b?Ys:qs:b?lt:Ge,ie=O?i:Q(e);return At(ie||e,function(D,ae){ie&&(ae=D,D=e[ae]),gr(v,ae,St(D,n,s,ae,e,g))}),v}function ld(e){var n=Ge(e);return function(s){return cl(s,e,n)}}function cl(e,n,s){var o=s.length;if(e==null)return!o;for(e=ye(e);o--;){var h=s[o],g=n[h],v=e[h];if(v===i&&!(h in e)||!g(v))return!1}return!0}function hl(e,n,s){if(typeof e!="function")throw new Tt(f);return xr(function(){e.apply(i,s)},n)}function _r(e,n,s,o){var h=-1,g=Gr,v=!0,m=e.length,b=[],I=n.length;if(!m)return b;s&&(n=Ne(n,dt(s))),o?(g=fs,v=!1):n.length>=l&&(g=or,v=!1,n=new xn(n));e:for(;++h<m;){var O=e[h],L=s==null?O:s(O);if(O=o||O!==0?O:0,v&&L===L){for(var F=I;F--;)if(n[F]===L)continue e;b.push(O)}else g(n,L,o)||b.push(O)}return b}var an=Wl(Ut),pl=Wl(Ns,!0);function od(e,n){var s=!0;return an(e,function(o,h,g){return s=!!n(o,h,g),s}),s}function ui(e,n,s){for(var o=-1,h=e.length;++o<h;){var g=e[o],v=n(g);if(v!=null&&(m===i?v===v&&!_t(v):s(v,m)))var m=v,b=g}return b}function fd(e,n,s,o){var h=e.length;for(s=ne(s),s<0&&(s=-s>h?0:h+s),o=o===i||o>h?h:ne(o),o<0&&(o+=h),o=s>o?0:Mo(o);s<o;)e[s++]=n;return e}function dl(e,n){var s=[];return an(e,function(o,h,g){n(o,h,g)&&s.push(o)}),s}function Ve(e,n,s,o,h){var g=-1,v=e.length;for(s||(s=Dd),h||(h=[]);++g<v;){var m=e[g];n>0&&s(m)?n>1?Ve(m,n-1,s,o,h):rn(h,m):o||(h[h.length]=m)}return h}var Ts=$l(),gl=$l(!0);function Ut(e,n){return e&&Ts(e,n,Ge)}function Ns(e,n){return e&&gl(e,n,Ge)}function ai(e,n){return nn(n,function(s){return Zt(e[s])})}function An(e,n){n=on(n,e);for(var s=0,o=n.length;e!=null&&s<o;)e=e[$t(n[s++])];return s&&s==o?e:i}function _l(e,n,s){var o=n(e);return te(e)?o:rn(o,s(e))}function et(e){return e==null?e===i?Wc:Vi:wn&&wn in ye(e)?Xd(e):sg(e)}function Ss(e,n){return e>n}function cd(e,n){return e!=null&&ge.call(e,n)}function hd(e,n){return e!=null&&n in ye(e)}function pd(e,n,s){return e>=Ke(n,s)&&e<He(n,s)}function Is(e,n,s){for(var o=s?fs:Gr,h=e[0].length,g=e.length,v=g,m=A(g),b=1/0,I=[];v--;){var O=e[v];v&&n&&(O=Ne(O,dt(n))),b=Ke(O.length,b),m[v]=!s&&(n||h>=120&&O.length>=120)?new xn(v&&O):i}O=e[0];var L=-1,F=m[0];e:for(;++L<h&&I.length<b;){var q=O[L],Q=n?n(q):q;if(q=s||q!==0?q:0,!(F?or(F,Q):o(I,Q,s))){for(v=g;--v;){var ie=m[v];if(!(ie?or(ie,Q):o(e[v],Q,s)))continue e}F&&F.push(Q),I.push(q)}}return I}function dd(e,n,s,o){return Ut(e,function(h,g,v){n(o,s(h),g,v)}),o}function vr(e,n,s){n=on(n,e),e=ro(e,n);var o=e==null?e:e[$t(Ot(n))];return o==null?i:pt(o,e,s)}function vl(e){return Ce(e)&&et(e)==Se}function gd(e){return Ce(e)&&et(e)==lr}function _d(e){return Ce(e)&&et(e)==xt}function mr(e,n,s,o,h){return e===n?!0:e==null||n==null||!Ce(e)&&!Ce(n)?e!==e&&n!==n:vd(e,n,s,o,mr,h)}function vd(e,n,s,o,h,g){var v=te(e),m=te(n),b=v?We:Ze(e),I=m?We:Ze(n);b=b==Se?Z:b,I=I==Se?Z:I;var O=b==Z,L=I==Z,F=b==I;if(F&&cn(e)){if(!cn(n))return!1;v=!0,O=!1}if(F&&!O)return g||(g=new Pt),v||er(e)?Jl(e,n,s,o,h,g):Yd(e,n,b,s,o,h,g);if(!(s&G)){var q=O&&ge.call(e,"__wrapped__"),Q=L&&ge.call(n,"__wrapped__");if(q||Q){var ie=q?e.value():e,D=Q?n.value():n;return g||(g=new Pt),h(ie,D,s,o,g)}}return F?(g||(g=new Pt),Vd(e,n,s,o,h,g)):!1}function md(e){return Ce(e)&&Ze(e)==it}function Os(e,n,s,o){var h=s.length,g=h,v=!o;if(e==null)return!g;for(e=ye(e);h--;){var m=s[h];if(v&&m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++h<g;){m=s[h];var b=m[0],I=e[b],O=m[1];if(v&&m[2]){if(I===i&&!(b in e))return!1}else{var L=new Pt;if(o)var F=o(I,O,b,e,n,L);if(!(F===i?mr(O,I,G|H,o,L):F))return!1}}return!0}function ml(e){if(!Ie(e)||eg(e))return!1;var n=Zt(e)?mp:lh;return n.test(Nn(e))}function yd(e){return Ce(e)&&et(e)==st}function wd(e){return Ce(e)&&Ze(e)==Mt}function bd(e){return Ce(e)&&Ai(e.length)&&!!xe[et(e)]}function yl(e){return typeof e=="function"?e:e==null?ot:typeof e=="object"?te(e)?xl(e[0],e[1]):bl(e):Go(e)}function Cs(e){if(!br(e))return Ap(e);var n=[];for(var s in ye(e))ge.call(e,s)&&s!="constructor"&&n.push(s);return n}function xd(e){if(!Ie(e))return ig(e);var n=br(e),s=[];for(var o in e)o=="constructor"&&(n||!ge.call(e,o))||s.push(o);return s}function Ms(e,n){return e<n}function wl(e,n){var s=-1,o=at(e)?A(e.length):[];return an(e,function(h,g,v){o[++s]=n(h,g,v)}),o}function bl(e){var n=Xs(e);return n.length==1&&n[0][2]?to(n[0][0],n[0][1]):function(s){return s===e||Os(s,e,n)}}function xl(e,n){return Ks(e)&&eo(n)?to($t(e),n):function(s){var o=iu(s,e);return o===i&&o===n?su(s,e):mr(n,o,G|H)}}function li(e,n,s,o,h){e!==n&&Ts(n,function(g,v){if(h||(h=new Pt),Ie(g))Ed(e,n,v,s,li,o,h);else{var m=o?o(Js(e,v),g,v+"",e,n,h):i;m===i&&(m=g),Es(e,v,m)}},lt)}function Ed(e,n,s,o,h,g,v){var m=Js(e,s),b=Js(n,s),I=v.get(b);if(I){Es(e,s,I);return}var O=g?g(m,b,s+"",e,n,v):i,L=O===i;if(L){var F=te(b),q=!F&&cn(b),Q=!F&&!q&&er(b);O=b,F||q||Q?te(m)?O=m:Re(m)?O=ut(m):q?(L=!1,O=Rl(b,!0)):Q?(L=!1,O=zl(b,!0)):O=[]:Er(b)||Sn(b)?(O=m,Sn(m)?O=Lo(m):(!Ie(m)||Zt(m))&&(O=jl(b))):L=!1}L&&(v.set(b,O),h(O,b,o,g,v),v.delete(b)),Es(e,s,O)}function El(e,n){var s=e.length;if(s)return n+=n<0?s:0,Kt(n,s)?e[n]:i}function Al(e,n,s){n.length?n=Ne(n,function(g){return te(g)?function(v){return An(v,g.length===1?g[0]:g)}:g}):n=[ot];var o=-1;n=Ne(n,dt(J()));var h=wl(e,function(g,v,m){var b=Ne(n,function(I){return I(g)});return{criteria:b,index:++o,value:g}});return Jh(h,function(g,v){return Bd(g,v,s)})}function Ad(e,n){return Tl(e,n,function(s,o){return su(e,o)})}function Tl(e,n,s){for(var o=-1,h=n.length,g={};++o<h;){var v=n[o],m=An(e,v);s(m,v)&&yr(g,on(v,e),m)}return g}function Td(e){return function(n){return An(n,e)}}function Ls(e,n,s,o){var h=o?Zh:qn,g=-1,v=n.length,m=e;for(e===n&&(n=ut(n)),s&&(m=Ne(e,dt(s)));++g<v;)for(var b=0,I=n[g],O=s?s(I):I;(b=h(m,O,b,o))>-1;)m!==e&&Dr.call(m,b,1),Dr.call(e,b,1);return e}function Nl(e,n){for(var s=e?n.length:0,o=s-1;s--;){var h=n[s];if(s==o||h!==g){var g=h;Kt(h)?Dr.call(e,h,1):Bs(e,h)}}return e}function Ps(e,n){return e+ti(ul()*(n-e+1))}function Nd(e,n,s,o){for(var h=-1,g=He(ei((n-e)/(s||1)),0),v=A(g);g--;)v[o?g:++h]=e,e+=s;return v}function Rs(e,n){var s="";if(!e||n<1||n>Y)return s;do n%2&&(s+=e),n=ti(n/2),n&&(e+=e);while(n);return s}function se(e,n){return Qs(no(e,n,ot),e+"")}function Sd(e){return ol(tr(e))}function Id(e,n){var s=tr(e);return mi(s,En(n,0,s.length))}function yr(e,n,s,o){if(!Ie(e))return e;n=on(n,e);for(var h=-1,g=n.length,v=g-1,m=e;m!=null&&++h<g;){var b=$t(n[h]),I=s;if(b==="__proto__"||b==="constructor"||b==="prototype")return e;if(h!=v){var O=m[b];I=o?o(O,b,m):i,I===i&&(I=Ie(O)?O:Kt(n[h+1])?[]:{})}gr(m,b,I),m=m[b]}return e}var Sl=ni?function(e,n){return ni.set(e,n),e}:ot,Od=jr?function(e,n){return jr(e,"toString",{configurable:!0,enumerable:!1,value:au(n),writable:!0})}:ot;function Cd(e){return mi(tr(e))}function It(e,n,s){var o=-1,h=e.length;n<0&&(n=-n>h?0:h+n),s=s>h?h:s,s<0&&(s+=h),h=n>s?0:s-n>>>0,n>>>=0;for(var g=A(h);++o<h;)g[o]=e[o+n];return g}function Md(e,n){var s;return an(e,function(o,h,g){return s=n(o,h,g),!s}),!!s}function oi(e,n,s){var o=0,h=e==null?o:e.length;if(typeof n=="number"&&n===n&&h<=ke){for(;o<h;){var g=o+h>>>1,v=e[g];v!==null&&!_t(v)&&(s?v<=n:v<n)?o=g+1:h=g}return h}return zs(e,n,ot,s)}function zs(e,n,s,o){var h=0,g=e==null?0:e.length;if(g===0)return 0;n=s(n);for(var v=n!==n,m=n===null,b=_t(n),I=n===i;h<g;){var O=ti((h+g)/2),L=s(e[O]),F=L!==i,q=L===null,Q=L===L,ie=_t(L);if(v)var D=o||Q;else I?D=Q&&(o||F):m?D=Q&&F&&(o||!q):b?D=Q&&F&&!q&&(o||!ie):q||ie?D=!1:D=o?L<=n:L<n;D?h=O+1:g=O}return Ke(g,ee)}function Il(e,n){for(var s=-1,o=e.length,h=0,g=[];++s<o;){var v=e[s],m=n?n(v):v;if(!s||!Rt(m,b)){var b=m;g[h++]=v===0?0:v}}return g}function Ol(e){return typeof e=="number"?e:_t(e)?V:+e}function gt(e){if(typeof e=="string")return e;if(te(e))return Ne(e,gt)+"";if(_t(e))return al?al.call(e):"";var n=e+"";return n=="0"&&1/e==-B?"-0":n}function ln(e,n,s){var o=-1,h=Gr,g=e.length,v=!0,m=[],b=m;if(s)v=!1,h=fs;else if(g>=l){var I=n?null:Gd(e);if(I)return Yr(I);v=!1,h=or,b=new xn}else b=n?[]:m;e:for(;++o<g;){var O=e[o],L=n?n(O):O;if(O=s||O!==0?O:0,v&&L===L){for(var F=b.length;F--;)if(b[F]===L)continue e;n&&b.push(L),m.push(O)}else h(b,L,s)||(b!==m&&b.push(L),m.push(O))}return m}function Bs(e,n){return n=on(n,e),e=ro(e,n),e==null||delete e[$t(Ot(n))]}function Cl(e,n,s,o){return yr(e,n,s(An(e,n)),o)}function fi(e,n,s,o){for(var h=e.length,g=o?h:-1;(o?g--:++g<h)&&n(e[g],g,e););return s?It(e,o?0:g,o?g+1:h):It(e,o?g+1:0,o?h:g)}function Ml(e,n){var s=e;return s instanceof le&&(s=s.value()),cs(n,function(o,h){return h.func.apply(h.thisArg,rn([o],h.args))},s)}function Fs(e,n,s){var o=e.length;if(o<2)return o?ln(e[0]):[];for(var h=-1,g=A(o);++h<o;)for(var v=e[h],m=-1;++m<o;)m!=h&&(g[h]=_r(g[h]||v,e[m],n,s));return ln(Ve(g,1),n,s)}function Ll(e,n,s){for(var o=-1,h=e.length,g=n.length,v={};++o<h;){var m=o<g?n[o]:i;s(v,e[o],m)}return v}function Us(e){return Re(e)?e:[]}function Ws(e){return typeof e=="function"?e:ot}function on(e,n){return te(e)?e:Ks(e,n)?[e]:ao(he(e))}var Ld=se;function fn(e,n,s){var o=e.length;return s=s===i?o:s,!n&&s>=o?e:It(e,n,s)}var Pl=yp||function(e){return Ye.clearTimeout(e)};function Rl(e,n){if(n)return e.slice();var s=e.length,o=tl?tl(s):new e.constructor(s);return e.copy(o),o}function $s(e){var n=new e.constructor(e.byteLength);return new Jr(n).set(new Jr(e)),n}function Pd(e,n){var s=n?$s(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function Rd(e){var n=new e.constructor(e.source,va.exec(e));return n.lastIndex=e.lastIndex,n}function zd(e){return dr?ye(dr.call(e)):{}}function zl(e,n){var s=n?$s(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function Bl(e,n){if(e!==n){var s=e!==i,o=e===null,h=e===e,g=_t(e),v=n!==i,m=n===null,b=n===n,I=_t(n);if(!m&&!I&&!g&&e>n||g&&v&&b&&!m&&!I||o&&v&&b||!s&&b||!h)return 1;if(!o&&!g&&!I&&e<n||I&&s&&h&&!o&&!g||m&&s&&h||!v&&h||!b)return-1}return 0}function Bd(e,n,s){for(var o=-1,h=e.criteria,g=n.criteria,v=h.length,m=s.length;++o<v;){var b=Bl(h[o],g[o]);if(b){if(o>=m)return b;var I=s[o];return b*(I=="desc"?-1:1)}}return e.index-n.index}function Fl(e,n,s,o){for(var h=-1,g=e.length,v=s.length,m=-1,b=n.length,I=He(g-v,0),O=A(b+I),L=!o;++m<b;)O[m]=n[m];for(;++h<v;)(L||h<g)&&(O[s[h]]=e[h]);for(;I--;)O[m++]=e[h++];return O}function Ul(e,n,s,o){for(var h=-1,g=e.length,v=-1,m=s.length,b=-1,I=n.length,O=He(g-m,0),L=A(O+I),F=!o;++h<O;)L[h]=e[h];for(var q=h;++b<I;)L[q+b]=n[b];for(;++v<m;)(F||h<g)&&(L[q+s[v]]=e[h++]);return L}function ut(e,n){var s=-1,o=e.length;for(n||(n=A(o));++s<o;)n[s]=e[s];return n}function Wt(e,n,s,o){var h=!s;s||(s={});for(var g=-1,v=n.length;++g<v;){var m=n[g],b=o?o(s[m],e[m],m,s,e):i;b===i&&(b=e[m]),h?Vt(s,m,b):gr(s,m,b)}return s}function Fd(e,n){return Wt(e,ks(e),n)}function Ud(e,n){return Wt(e,Ql(e),n)}function ci(e,n){return function(s,o){var h=te(s)?qh:ud,g=n?n():{};return h(s,e,J(o,2),g)}}function Qn(e){return se(function(n,s){var o=-1,h=s.length,g=h>1?s[h-1]:i,v=h>2?s[2]:i;for(g=e.length>3&&typeof g=="function"?(h--,g):i,v&&tt(s[0],s[1],v)&&(g=h<3?i:g,h=1),n=ye(n);++o<h;){var m=s[o];m&&e(n,m,o,g)}return n})}function Wl(e,n){return function(s,o){if(s==null)return s;if(!at(s))return e(s,o);for(var h=s.length,g=n?h:-1,v=ye(s);(n?g--:++g<h)&&o(v[g],g,v)!==!1;);return s}}function $l(e){return function(n,s,o){for(var h=-1,g=ye(n),v=o(n),m=v.length;m--;){var b=v[e?m:++h];if(s(g[b],b,g)===!1)break}return n}}function Wd(e,n,s){var o=n&C,h=wr(e);function g(){var v=this&&this!==Ye&&this instanceof g?h:e;return v.apply(o?s:this,arguments)}return g}function Hl(e){return function(n){n=he(n);var s=Yn(n)?Lt(n):i,o=s?s[0]:n.charAt(0),h=s?fn(s,1).join(""):n.slice(1);return o[e]()+h}}function Dn(e){return function(n){return cs($o(Wo(n).replace(Oh,"")),e,"")}}function wr(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var s=Jn(e.prototype),o=e.apply(s,n);return Ie(o)?o:s}}function $d(e,n,s){var o=wr(e);function h(){for(var g=arguments.length,v=A(g),m=g,b=jn(h);m--;)v[m]=arguments[m];var I=g<3&&v[0]!==b&&v[g-1]!==b?[]:sn(v,b);if(g-=I.length,g<s)return Xl(e,n,hi,h.placeholder,i,v,I,i,i,s-g);var O=this&&this!==Ye&&this instanceof h?o:e;return pt(O,this,v)}return h}function Gl(e){return function(n,s,o){var h=ye(n);if(!at(n)){var g=J(s,3);n=Ge(n),s=function(m){return g(h[m],m,h)}}var v=e(n,s,o);return v>-1?h[g?n[v]:v]:i}}function ql(e){return kt(function(n){var s=n.length,o=s,h=Nt.prototype.thru;for(e&&n.reverse();o--;){var g=n[o];if(typeof g!="function")throw new Tt(f);if(h&&!v&&_i(g)=="wrapper")var v=new Nt([],!0)}for(o=v?o:s;++o<s;){g=n[o];var m=_i(g),b=m=="wrapper"?Vs(g):i;b&&Zs(b[0])&&b[1]==(de|P|K|ce)&&!b[4].length&&b[9]==1?v=v[_i(b[0])].apply(v,b[3]):v=g.length==1&&Zs(g)?v[m]():v.thru(g)}return function(){var I=arguments,O=I[0];if(v&&I.length==1&&te(O))return v.plant(O).value();for(var L=0,F=s?n[L].apply(this,I):O;++L<s;)F=n[L].call(this,F);return F}})}function hi(e,n,s,o,h,g,v,m,b,I){var O=n&de,L=n&C,F=n&y,q=n&(P|z),Q=n&Fe,ie=F?i:wr(e);function D(){for(var ae=arguments.length,oe=A(ae),vt=ae;vt--;)oe[vt]=arguments[vt];if(q)var nt=jn(D),mt=Dh(oe,nt);if(o&&(oe=Fl(oe,o,h,q)),g&&(oe=Ul(oe,g,v,q)),ae-=mt,q&&ae<I){var ze=sn(oe,nt);return Xl(e,n,hi,D.placeholder,s,oe,ze,m,b,I-ae)}var zt=L?s:this,Qt=F?zt[e]:e;return ae=oe.length,m?oe=ug(oe,m):Q&&ae>1&&oe.reverse(),O&&b<ae&&(oe.length=b),this&&this!==Ye&&this instanceof D&&(Qt=ie||wr(Qt)),Qt.apply(zt,oe)}return D}function Yl(e,n){return function(s,o){return dd(s,e,n(o),{})}}function pi(e,n){return function(s,o){var h;if(s===i&&o===i)return n;if(s!==i&&(h=s),o!==i){if(h===i)return o;typeof s=="string"||typeof o=="string"?(s=gt(s),o=gt(o)):(s=Ol(s),o=Ol(o)),h=e(s,o)}return h}}function Hs(e){return kt(function(n){return n=Ne(n,dt(J())),se(function(s){var o=this;return e(n,function(h){return pt(h,o,s)})})})}function di(e,n){n=n===i?" ":gt(n);var s=n.length;if(s<2)return s?Rs(n,e):n;var o=Rs(n,ei(e/Vn(n)));return Yn(n)?fn(Lt(o),0,e).join(""):o.slice(0,e)}function Hd(e,n,s,o){var h=n&C,g=wr(e);function v(){for(var m=-1,b=arguments.length,I=-1,O=o.length,L=A(O+b),F=this&&this!==Ye&&this instanceof v?g:e;++I<O;)L[I]=o[I];for(;b--;)L[I++]=arguments[++m];return pt(F,h?s:this,L)}return v}function Vl(e){return function(n,s,o){return o&&typeof o!="number"&&tt(n,s,o)&&(s=o=i),n=Jt(n),s===i?(s=n,n=0):s=Jt(s),o=o===i?n<s?1:-1:Jt(o),Nd(n,s,o,e)}}function gi(e){return function(n,s){return typeof n=="string"&&typeof s=="string"||(n=Ct(n),s=Ct(s)),e(n,s)}}function Xl(e,n,s,o,h,g,v,m,b,I){var O=n&P,L=O?v:i,F=O?i:v,q=O?g:i,Q=O?i:g;n|=O?K:ue,n&=~(O?ue:K),n&R||(n&=-4);var ie=[e,n,h,q,L,Q,F,m,b,I],D=s.apply(i,ie);return Zs(e)&&io(D,ie),D.placeholder=o,so(D,e,n)}function Gs(e){var n=$e[e];return function(s,o){if(s=Ct(s),o=o==null?0:Ke(ne(o),292),o&&sl(s)){var h=(he(s)+"e").split("e"),g=n(h[0]+"e"+(+h[1]+o));return h=(he(g)+"e").split("e"),+(h[0]+"e"+(+h[1]-o))}return n(s)}}var Gd=Kn&&1/Yr(new Kn([,-0]))[1]==B?function(e){return new Kn(e)}:fu;function kl(e){return function(n){var s=Ze(n);return s==it?ms(n):s==Mt?sp(n):Qh(n,e(n))}}function Xt(e,n,s,o,h,g,v,m){var b=n&y;if(!b&&typeof e!="function")throw new Tt(f);var I=o?o.length:0;if(I||(n&=-97,o=h=i),v=v===i?v:He(ne(v),0),m=m===i?m:ne(m),I-=h?h.length:0,n&ue){var O=o,L=h;o=h=i}var F=b?i:Vs(e),q=[e,n,s,o,h,O,L,g,v,m];if(F&&rg(q,F),e=q[0],n=q[1],s=q[2],o=q[3],h=q[4],m=q[9]=q[9]===i?b?0:e.length:He(q[9]-I,0),!m&&n&(P|z)&&(n&=-25),!n||n==C)var Q=Wd(e,n,s);else n==P||n==z?Q=$d(e,n,m):(n==K||n==(C|K))&&!h.length?Q=Hd(e,n,s,o):Q=hi.apply(i,q);var ie=F?Sl:io;return so(ie(Q,q),e,n)}function Kl(e,n,s,o){return e===i||Rt(e,kn[s])&&!ge.call(o,s)?n:e}function Zl(e,n,s,o,h,g){return Ie(e)&&Ie(n)&&(g.set(n,e),li(e,n,i,Zl,g),g.delete(n)),e}function qd(e){return Er(e)?i:e}function Jl(e,n,s,o,h,g){var v=s&G,m=e.length,b=n.length;if(m!=b&&!(v&&b>m))return!1;var I=g.get(e),O=g.get(n);if(I&&O)return I==n&&O==e;var L=-1,F=!0,q=s&H?new xn:i;for(g.set(e,n),g.set(n,e);++L<m;){var Q=e[L],ie=n[L];if(o)var D=v?o(ie,Q,L,n,e,g):o(Q,ie,L,e,n,g);if(D!==i){if(D)continue;F=!1;break}if(q){if(!hs(n,function(ae,oe){if(!or(q,oe)&&(Q===ae||h(Q,ae,s,o,g)))return q.push(oe)})){F=!1;break}}else if(!(Q===ie||h(Q,ie,s,o,g))){F=!1;break}}return g.delete(e),g.delete(n),F}function Yd(e,n,s,o,h,g,v){switch(s){case Hn:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case lr:return!(e.byteLength!=n.byteLength||!g(new Jr(e),new Jr(n)));case Pe:case xt:case vn:return Rt(+e,+n);case gn:return e.name==n.name&&e.message==n.message;case st:case ur:return e==n+"";case it:var m=ms;case Mt:var b=o&G;if(m||(m=Yr),e.size!=n.size&&!b)return!1;var I=v.get(e);if(I)return I==n;o|=H,v.set(e,n);var O=Jl(m(e),m(n),o,h,g,v);return v.delete(e),O;case Ur:if(dr)return dr.call(e)==dr.call(n)}return!1}function Vd(e,n,s,o,h,g){var v=s&G,m=qs(e),b=m.length,I=qs(n),O=I.length;if(b!=O&&!v)return!1;for(var L=b;L--;){var F=m[L];if(!(v?F in n:ge.call(n,F)))return!1}var q=g.get(e),Q=g.get(n);if(q&&Q)return q==n&&Q==e;var ie=!0;g.set(e,n),g.set(n,e);for(var D=v;++L<b;){F=m[L];var ae=e[F],oe=n[F];if(o)var vt=v?o(oe,ae,F,n,e,g):o(ae,oe,F,e,n,g);if(!(vt===i?ae===oe||h(ae,oe,s,o,g):vt)){ie=!1;break}D||(D=F=="constructor")}if(ie&&!D){var nt=e.constructor,mt=n.constructor;nt!=mt&&"constructor"in e&&"constructor"in n&&!(typeof nt=="function"&&nt instanceof nt&&typeof mt=="function"&&mt instanceof mt)&&(ie=!1)}return g.delete(e),g.delete(n),ie}function kt(e){return Qs(no(e,i,co),e+"")}function qs(e){return _l(e,Ge,ks)}function Ys(e){return _l(e,lt,Ql)}var Vs=ni?function(e){return ni.get(e)}:fu;function _i(e){for(var n=e.name+"",s=Zn[n],o=ge.call(Zn,n)?s.length:0;o--;){var h=s[o],g=h.func;if(g==null||g==e)return h.name}return n}function jn(e){var n=ge.call(p,"placeholder")?p:e;return n.placeholder}function J(){var e=p.iteratee||lu;return e=e===lu?yl:e,arguments.length?e(arguments[0],arguments[1]):e}function vi(e,n){var s=e.__data__;return jd(n)?s[typeof n=="string"?"string":"hash"]:s.map}function Xs(e){for(var n=Ge(e),s=n.length;s--;){var o=n[s],h=e[o];n[s]=[o,h,eo(h)]}return n}function Tn(e,n){var s=np(e,n);return ml(s)?s:i}function Xd(e){var n=ge.call(e,wn),s=e[wn];try{e[wn]=i;var o=!0}catch{}var h=Kr.call(e);return o&&(n?e[wn]=s:delete e[wn]),h}var ks=ws?function(e){return e==null?[]:(e=ye(e),nn(ws(e),function(n){return rl.call(e,n)}))}:cu,Ql=ws?function(e){for(var n=[];e;)rn(n,ks(e)),e=Qr(e);return n}:cu,Ze=et;(bs&&Ze(new bs(new ArrayBuffer(1)))!=Hn||cr&&Ze(new cr)!=it||xs&&Ze(xs.resolve())!=Oe||Kn&&Ze(new Kn)!=Mt||hr&&Ze(new hr)!=ar)&&(Ze=function(e){var n=et(e),s=n==Z?e.constructor:i,o=s?Nn(s):"";if(o)switch(o){case Ip:return Hn;case Op:return it;case Cp:return Oe;case Mp:return Mt;case Lp:return ar}return n});function kd(e,n,s){for(var o=-1,h=s.length;++o<h;){var g=s[o],v=g.size;switch(g.type){case"drop":e+=v;break;case"dropRight":n-=v;break;case"take":n=Ke(n,e+v);break;case"takeRight":e=He(e,n-v);break}}return{start:e,end:n}}function Kd(e){var n=e.match(eh);return n?n[1].split(th):[]}function Dl(e,n,s){n=on(n,e);for(var o=-1,h=n.length,g=!1;++o<h;){var v=$t(n[o]);if(!(g=e!=null&&s(e,v)))break;e=e[v]}return g||++o!=h?g:(h=e==null?0:e.length,!!h&&Ai(h)&&Kt(v,h)&&(te(e)||Sn(e)))}function Zd(e){var n=e.length,s=new e.constructor(n);return n&&typeof e[0]=="string"&&ge.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function jl(e){return typeof e.constructor=="function"&&!br(e)?Jn(Qr(e)):{}}function Jd(e,n,s){var o=e.constructor;switch(n){case lr:return $s(e);case Pe:case xt:return new o(+e);case Hn:return Pd(e,s);case Xi:case ki:case Ki:case Zi:case Ji:case Qi:case Di:case ji:case es:return zl(e,s);case it:return new o;case vn:case ur:return new o(e);case st:return Rd(e);case Mt:return new o;case Ur:return zd(e)}}function Qd(e,n){var s=n.length;if(!s)return e;var o=s-1;return n[o]=(s>1?"& ":"")+n[o],n=n.join(s>2?", ":" "),e.replace(jc,`{
/* [wrapped with `+n+`] */
`)}function Dd(e){return te(e)||Sn(e)||!!(il&&e&&e[il])}function Kt(e,n){var s=typeof e;return n=n??Y,!!n&&(s=="number"||s!="symbol"&&fh.test(e))&&e>-1&&e%1==0&&e<n}function tt(e,n,s){if(!Ie(s))return!1;var o=typeof n;return(o=="number"?at(s)&&Kt(n,s.length):o=="string"&&n in s)?Rt(s[n],e):!1}function Ks(e,n){if(te(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||_t(e)?!0:Zc.test(e)||!Kc.test(e)||n!=null&&e in ye(n)}function jd(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function Zs(e){var n=_i(e),s=p[n];if(typeof s!="function"||!(n in le.prototype))return!1;if(e===s)return!0;var o=Vs(s);return!!o&&e===o[0]}function eg(e){return!!el&&el in e}var tg=Xr?Zt:hu;function br(e){var n=e&&e.constructor,s=typeof n=="function"&&n.prototype||kn;return e===s}function eo(e){return e===e&&!Ie(e)}function to(e,n){return function(s){return s==null?!1:s[e]===n&&(n!==i||e in ye(s))}}function ng(e){var n=xi(e,function(o){return s.size===_&&s.clear(),o}),s=n.cache;return n}function rg(e,n){var s=e[1],o=n[1],h=s|o,g=h<(C|y|de),v=o==de&&s==P||o==de&&s==ce&&e[7].length<=n[8]||o==(de|ce)&&n[7].length<=n[8]&&s==P;if(!(g||v))return e;o&C&&(e[2]=n[2],h|=s&C?0:R);var m=n[3];if(m){var b=e[3];e[3]=b?Fl(b,m,n[4]):m,e[4]=b?sn(e[3],x):n[4]}return m=n[5],m&&(b=e[5],e[5]=b?Ul(b,m,n[6]):m,e[6]=b?sn(e[5],x):n[6]),m=n[7],m&&(e[7]=m),o&de&&(e[8]=e[8]==null?n[8]:Ke(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=h,e}function ig(e){var n=[];if(e!=null)for(var s in ye(e))n.push(s);return n}function sg(e){return Kr.call(e)}function no(e,n,s){return n=He(n===i?e.length-1:n,0),function(){for(var o=arguments,h=-1,g=He(o.length-n,0),v=A(g);++h<g;)v[h]=o[n+h];h=-1;for(var m=A(n+1);++h<n;)m[h]=o[h];return m[n]=s(v),pt(e,this,m)}}function ro(e,n){return n.length<2?e:An(e,It(n,0,-1))}function ug(e,n){for(var s=e.length,o=Ke(n.length,s),h=ut(e);o--;){var g=n[o];e[o]=Kt(g,s)?h[g]:i}return e}function Js(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var io=uo(Sl),xr=bp||function(e,n){return Ye.setTimeout(e,n)},Qs=uo(Od);function so(e,n,s){var o=n+"";return Qs(e,Qd(o,ag(Kd(o),s)))}function uo(e){var n=0,s=0;return function(){var o=Tp(),h=Le-(o-s);if(s=o,h>0){if(++n>=bt)return arguments[0]}else n=0;return e.apply(i,arguments)}}function mi(e,n){var s=-1,o=e.length,h=o-1;for(n=n===i?o:n;++s<n;){var g=Ps(s,h),v=e[g];e[g]=e[s],e[s]=v}return e.length=n,e}var ao=ng(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Jc,function(s,o,h,g){n.push(h?g.replace(ih,"$1"):o||s)}),n});function $t(e){if(typeof e=="string"||_t(e))return e;var n=e+"";return n=="0"&&1/e==-B?"-0":n}function Nn(e){if(e!=null){try{return kr.call(e)}catch{}try{return e+""}catch{}}return""}function ag(e,n){return At(Te,function(s){var o="_."+s[0];n&s[1]&&!Gr(e,o)&&e.push(o)}),e.sort()}function lo(e){if(e instanceof le)return e.clone();var n=new Nt(e.__wrapped__,e.__chain__);return n.__actions__=ut(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function lg(e,n,s){(s?tt(e,n,s):n===i)?n=1:n=He(ne(n),0);var o=e==null?0:e.length;if(!o||n<1)return[];for(var h=0,g=0,v=A(ei(o/n));h<o;)v[g++]=It(e,h,h+=n);return v}function og(e){for(var n=-1,s=e==null?0:e.length,o=0,h=[];++n<s;){var g=e[n];g&&(h[o++]=g)}return h}function fg(){var e=arguments.length;if(!e)return[];for(var n=A(e-1),s=arguments[0],o=e;o--;)n[o-1]=arguments[o];return rn(te(s)?ut(s):[s],Ve(n,1))}var cg=se(function(e,n){return Re(e)?_r(e,Ve(n,1,Re,!0)):[]}),hg=se(function(e,n){var s=Ot(n);return Re(s)&&(s=i),Re(e)?_r(e,Ve(n,1,Re,!0),J(s,2)):[]}),pg=se(function(e,n){var s=Ot(n);return Re(s)&&(s=i),Re(e)?_r(e,Ve(n,1,Re,!0),i,s):[]});function dg(e,n,s){var o=e==null?0:e.length;return o?(n=s||n===i?1:ne(n),It(e,n<0?0:n,o)):[]}function gg(e,n,s){var o=e==null?0:e.length;return o?(n=s||n===i?1:ne(n),n=o-n,It(e,0,n<0?0:n)):[]}function _g(e,n){return e&&e.length?fi(e,J(n,3),!0,!0):[]}function vg(e,n){return e&&e.length?fi(e,J(n,3),!0):[]}function mg(e,n,s,o){var h=e==null?0:e.length;return h?(s&&typeof s!="number"&&tt(e,n,s)&&(s=0,o=h),fd(e,n,s,o)):[]}function oo(e,n,s){var o=e==null?0:e.length;if(!o)return-1;var h=s==null?0:ne(s);return h<0&&(h=He(o+h,0)),qr(e,J(n,3),h)}function fo(e,n,s){var o=e==null?0:e.length;if(!o)return-1;var h=o-1;return s!==i&&(h=ne(s),h=s<0?He(o+h,0):Ke(h,o-1)),qr(e,J(n,3),h,!0)}function co(e){var n=e==null?0:e.length;return n?Ve(e,1):[]}function yg(e){var n=e==null?0:e.length;return n?Ve(e,B):[]}function wg(e,n){var s=e==null?0:e.length;return s?(n=n===i?1:ne(n),Ve(e,n)):[]}function bg(e){for(var n=-1,s=e==null?0:e.length,o={};++n<s;){var h=e[n];o[h[0]]=h[1]}return o}function ho(e){return e&&e.length?e[0]:i}function xg(e,n,s){var o=e==null?0:e.length;if(!o)return-1;var h=s==null?0:ne(s);return h<0&&(h=He(o+h,0)),qn(e,n,h)}function Eg(e){var n=e==null?0:e.length;return n?It(e,0,-1):[]}var Ag=se(function(e){var n=Ne(e,Us);return n.length&&n[0]===e[0]?Is(n):[]}),Tg=se(function(e){var n=Ot(e),s=Ne(e,Us);return n===Ot(s)?n=i:s.pop(),s.length&&s[0]===e[0]?Is(s,J(n,2)):[]}),Ng=se(function(e){var n=Ot(e),s=Ne(e,Us);return n=typeof n=="function"?n:i,n&&s.pop(),s.length&&s[0]===e[0]?Is(s,i,n):[]});function Sg(e,n){return e==null?"":Ep.call(e,n)}function Ot(e){var n=e==null?0:e.length;return n?e[n-1]:i}function Ig(e,n,s){var o=e==null?0:e.length;if(!o)return-1;var h=o;return s!==i&&(h=ne(s),h=h<0?He(o+h,0):Ke(h,o-1)),n===n?ap(e,n,h):qr(e,Xa,h,!0)}function Og(e,n){return e&&e.length?El(e,ne(n)):i}var Cg=se(po);function po(e,n){return e&&e.length&&n&&n.length?Ls(e,n):e}function Mg(e,n,s){return e&&e.length&&n&&n.length?Ls(e,n,J(s,2)):e}function Lg(e,n,s){return e&&e.length&&n&&n.length?Ls(e,n,i,s):e}var Pg=kt(function(e,n){var s=e==null?0:e.length,o=As(e,n);return Nl(e,Ne(n,function(h){return Kt(h,s)?+h:h}).sort(Bl)),o});function Rg(e,n){var s=[];if(!(e&&e.length))return s;var o=-1,h=[],g=e.length;for(n=J(n,3);++o<g;){var v=e[o];n(v,o,e)&&(s.push(v),h.push(o))}return Nl(e,h),s}function Ds(e){return e==null?e:Sp.call(e)}function zg(e,n,s){var o=e==null?0:e.length;return o?(s&&typeof s!="number"&&tt(e,n,s)?(n=0,s=o):(n=n==null?0:ne(n),s=s===i?o:ne(s)),It(e,n,s)):[]}function Bg(e,n){return oi(e,n)}function Fg(e,n,s){return zs(e,n,J(s,2))}function Ug(e,n){var s=e==null?0:e.length;if(s){var o=oi(e,n);if(o<s&&Rt(e[o],n))return o}return-1}function Wg(e,n){return oi(e,n,!0)}function $g(e,n,s){return zs(e,n,J(s,2),!0)}function Hg(e,n){var s=e==null?0:e.length;if(s){var o=oi(e,n,!0)-1;if(Rt(e[o],n))return o}return-1}function Gg(e){return e&&e.length?Il(e):[]}function qg(e,n){return e&&e.length?Il(e,J(n,2)):[]}function Yg(e){var n=e==null?0:e.length;return n?It(e,1,n):[]}function Vg(e,n,s){return e&&e.length?(n=s||n===i?1:ne(n),It(e,0,n<0?0:n)):[]}function Xg(e,n,s){var o=e==null?0:e.length;return o?(n=s||n===i?1:ne(n),n=o-n,It(e,n<0?0:n,o)):[]}function kg(e,n){return e&&e.length?fi(e,J(n,3),!1,!0):[]}function Kg(e,n){return e&&e.length?fi(e,J(n,3)):[]}var Zg=se(function(e){return ln(Ve(e,1,Re,!0))}),Jg=se(function(e){var n=Ot(e);return Re(n)&&(n=i),ln(Ve(e,1,Re,!0),J(n,2))}),Qg=se(function(e){var n=Ot(e);return n=typeof n=="function"?n:i,ln(Ve(e,1,Re,!0),i,n)});function Dg(e){return e&&e.length?ln(e):[]}function jg(e,n){return e&&e.length?ln(e,J(n,2)):[]}function e_(e,n){return n=typeof n=="function"?n:i,e&&e.length?ln(e,i,n):[]}function js(e){if(!(e&&e.length))return[];var n=0;return e=nn(e,function(s){if(Re(s))return n=He(s.length,n),!0}),_s(n,function(s){return Ne(e,ps(s))})}function go(e,n){if(!(e&&e.length))return[];var s=js(e);return n==null?s:Ne(s,function(o){return pt(n,i,o)})}var t_=se(function(e,n){return Re(e)?_r(e,n):[]}),n_=se(function(e){return Fs(nn(e,Re))}),r_=se(function(e){var n=Ot(e);return Re(n)&&(n=i),Fs(nn(e,Re),J(n,2))}),i_=se(function(e){var n=Ot(e);return n=typeof n=="function"?n:i,Fs(nn(e,Re),i,n)}),s_=se(js);function u_(e,n){return Ll(e||[],n||[],gr)}function a_(e,n){return Ll(e||[],n||[],yr)}var l_=se(function(e){var n=e.length,s=n>1?e[n-1]:i;return s=typeof s=="function"?(e.pop(),s):i,go(e,s)});function _o(e){var n=p(e);return n.__chain__=!0,n}function o_(e,n){return n(e),e}function yi(e,n){return n(e)}var f_=kt(function(e){var n=e.length,s=n?e[0]:0,o=this.__wrapped__,h=function(g){return As(g,e)};return n>1||this.__actions__.length||!(o instanceof le)||!Kt(s)?this.thru(h):(o=o.slice(s,+s+(n?1:0)),o.__actions__.push({func:yi,args:[h],thisArg:i}),new Nt(o,this.__chain__).thru(function(g){return n&&!g.length&&g.push(i),g}))});function c_(){return _o(this)}function h_(){return new Nt(this.value(),this.__chain__)}function p_(){this.__values__===i&&(this.__values__=Co(this.value()));var e=this.__index__>=this.__values__.length,n=e?i:this.__values__[this.__index__++];return{done:e,value:n}}function d_(){return this}function g_(e){for(var n,s=this;s instanceof ii;){var o=lo(s);o.__index__=0,o.__values__=i,n?h.__wrapped__=o:n=o;var h=o;s=s.__wrapped__}return h.__wrapped__=e,n}function __(){var e=this.__wrapped__;if(e instanceof le){var n=e;return this.__actions__.length&&(n=new le(this)),n=n.reverse(),n.__actions__.push({func:yi,args:[Ds],thisArg:i}),new Nt(n,this.__chain__)}return this.thru(Ds)}function v_(){return Ml(this.__wrapped__,this.__actions__)}var m_=ci(function(e,n,s){ge.call(e,s)?++e[s]:Vt(e,s,1)});function y_(e,n,s){var o=te(e)?Ya:od;return s&&tt(e,n,s)&&(n=i),o(e,J(n,3))}function w_(e,n){var s=te(e)?nn:dl;return s(e,J(n,3))}var b_=Gl(oo),x_=Gl(fo);function E_(e,n){return Ve(wi(e,n),1)}function A_(e,n){return Ve(wi(e,n),B)}function T_(e,n,s){return s=s===i?1:ne(s),Ve(wi(e,n),s)}function vo(e,n){var s=te(e)?At:an;return s(e,J(n,3))}function mo(e,n){var s=te(e)?Yh:pl;return s(e,J(n,3))}var N_=ci(function(e,n,s){ge.call(e,s)?e[s].push(n):Vt(e,s,[n])});function S_(e,n,s,o){e=at(e)?e:tr(e),s=s&&!o?ne(s):0;var h=e.length;return s<0&&(s=He(h+s,0)),Ti(e)?s<=h&&e.indexOf(n,s)>-1:!!h&&qn(e,n,s)>-1}var I_=se(function(e,n,s){var o=-1,h=typeof n=="function",g=at(e)?A(e.length):[];return an(e,function(v){g[++o]=h?pt(n,v,s):vr(v,n,s)}),g}),O_=ci(function(e,n,s){Vt(e,s,n)});function wi(e,n){var s=te(e)?Ne:wl;return s(e,J(n,3))}function C_(e,n,s,o){return e==null?[]:(te(n)||(n=n==null?[]:[n]),s=o?i:s,te(s)||(s=s==null?[]:[s]),Al(e,n,s))}var M_=ci(function(e,n,s){e[s?0:1].push(n)},function(){return[[],[]]});function L_(e,n,s){var o=te(e)?cs:Ka,h=arguments.length<3;return o(e,J(n,4),s,h,an)}function P_(e,n,s){var o=te(e)?Vh:Ka,h=arguments.length<3;return o(e,J(n,4),s,h,pl)}function R_(e,n){var s=te(e)?nn:dl;return s(e,Ei(J(n,3)))}function z_(e){var n=te(e)?ol:Sd;return n(e)}function B_(e,n,s){(s?tt(e,n,s):n===i)?n=1:n=ne(n);var o=te(e)?id:Id;return o(e,n)}function F_(e){var n=te(e)?sd:Cd;return n(e)}function U_(e){if(e==null)return 0;if(at(e))return Ti(e)?Vn(e):e.length;var n=Ze(e);return n==it||n==Mt?e.size:Cs(e).length}function W_(e,n,s){var o=te(e)?hs:Md;return s&&tt(e,n,s)&&(n=i),o(e,J(n,3))}var $_=se(function(e,n){if(e==null)return[];var s=n.length;return s>1&&tt(e,n[0],n[1])?n=[]:s>2&&tt(n[0],n[1],n[2])&&(n=[n[0]]),Al(e,Ve(n,1),[])}),bi=wp||function(){return Ye.Date.now()};function H_(e,n){if(typeof n!="function")throw new Tt(f);return e=ne(e),function(){if(--e<1)return n.apply(this,arguments)}}function yo(e,n,s){return n=s?i:n,n=e&&n==null?e.length:n,Xt(e,de,i,i,i,i,n)}function wo(e,n){var s;if(typeof n!="function")throw new Tt(f);return e=ne(e),function(){return--e>0&&(s=n.apply(this,arguments)),e<=1&&(n=i),s}}var eu=se(function(e,n,s){var o=C;if(s.length){var h=sn(s,jn(eu));o|=K}return Xt(e,o,n,s,h)}),bo=se(function(e,n,s){var o=C|y;if(s.length){var h=sn(s,jn(bo));o|=K}return Xt(n,o,e,s,h)});function xo(e,n,s){n=s?i:n;var o=Xt(e,P,i,i,i,i,i,n);return o.placeholder=xo.placeholder,o}function Eo(e,n,s){n=s?i:n;var o=Xt(e,z,i,i,i,i,i,n);return o.placeholder=Eo.placeholder,o}function Ao(e,n,s){var o,h,g,v,m,b,I=0,O=!1,L=!1,F=!0;if(typeof e!="function")throw new Tt(f);n=Ct(n)||0,Ie(s)&&(O=!!s.leading,L="maxWait"in s,g=L?He(Ct(s.maxWait)||0,n):g,F="trailing"in s?!!s.trailing:F);function q(ze){var zt=o,Qt=h;return o=h=i,I=ze,v=e.apply(Qt,zt),v}function Q(ze){return I=ze,m=xr(ae,n),O?q(ze):v}function ie(ze){var zt=ze-b,Qt=ze-I,qo=n-zt;return L?Ke(qo,g-Qt):qo}function D(ze){var zt=ze-b,Qt=ze-I;return b===i||zt>=n||zt<0||L&&Qt>=g}function ae(){var ze=bi();if(D(ze))return oe(ze);m=xr(ae,ie(ze))}function oe(ze){return m=i,F&&o?q(ze):(o=h=i,v)}function vt(){m!==i&&Pl(m),I=0,o=b=h=m=i}function nt(){return m===i?v:oe(bi())}function mt(){var ze=bi(),zt=D(ze);if(o=arguments,h=this,b=ze,zt){if(m===i)return Q(b);if(L)return Pl(m),m=xr(ae,n),q(b)}return m===i&&(m=xr(ae,n)),v}return mt.cancel=vt,mt.flush=nt,mt}var G_=se(function(e,n){return hl(e,1,n)}),q_=se(function(e,n,s){return hl(e,Ct(n)||0,s)});function Y_(e){return Xt(e,Fe)}function xi(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Tt(f);var s=function(){var o=arguments,h=n?n.apply(this,o):o[0],g=s.cache;if(g.has(h))return g.get(h);var v=e.apply(this,o);return s.cache=g.set(h,v)||g,v};return s.cache=new(xi.Cache||Yt),s}xi.Cache=Yt;function Ei(e){if(typeof e!="function")throw new Tt(f);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function V_(e){return wo(2,e)}var X_=Ld(function(e,n){n=n.length==1&&te(n[0])?Ne(n[0],dt(J())):Ne(Ve(n,1),dt(J()));var s=n.length;return se(function(o){for(var h=-1,g=Ke(o.length,s);++h<g;)o[h]=n[h].call(this,o[h]);return pt(e,this,o)})}),tu=se(function(e,n){var s=sn(n,jn(tu));return Xt(e,K,i,n,s)}),To=se(function(e,n){var s=sn(n,jn(To));return Xt(e,ue,i,n,s)}),k_=kt(function(e,n){return Xt(e,ce,i,i,i,n)});function K_(e,n){if(typeof e!="function")throw new Tt(f);return n=n===i?n:ne(n),se(e,n)}function Z_(e,n){if(typeof e!="function")throw new Tt(f);return n=n==null?0:He(ne(n),0),se(function(s){var o=s[n],h=fn(s,0,n);return o&&rn(h,o),pt(e,this,h)})}function J_(e,n,s){var o=!0,h=!0;if(typeof e!="function")throw new Tt(f);return Ie(s)&&(o="leading"in s?!!s.leading:o,h="trailing"in s?!!s.trailing:h),Ao(e,n,{leading:o,maxWait:n,trailing:h})}function Q_(e){return yo(e,1)}function D_(e,n){return tu(Ws(n),e)}function j_(){if(!arguments.length)return[];var e=arguments[0];return te(e)?e:[e]}function e0(e){return St(e,$)}function t0(e,n){return n=typeof n=="function"?n:i,St(e,$,n)}function n0(e){return St(e,T|$)}function r0(e,n){return n=typeof n=="function"?n:i,St(e,T|$,n)}function i0(e,n){return n==null||cl(e,n,Ge(n))}function Rt(e,n){return e===n||e!==e&&n!==n}var s0=gi(Ss),u0=gi(function(e,n){return e>=n}),Sn=vl(function(){return arguments}())?vl:function(e){return Ce(e)&&ge.call(e,"callee")&&!rl.call(e,"callee")},te=A.isArray,a0=Ua?dt(Ua):gd;function at(e){return e!=null&&Ai(e.length)&&!Zt(e)}function Re(e){return Ce(e)&&at(e)}function l0(e){return e===!0||e===!1||Ce(e)&&et(e)==Pe}var cn=xp||hu,o0=Wa?dt(Wa):_d;function f0(e){return Ce(e)&&e.nodeType===1&&!Er(e)}function c0(e){if(e==null)return!0;if(at(e)&&(te(e)||typeof e=="string"||typeof e.splice=="function"||cn(e)||er(e)||Sn(e)))return!e.length;var n=Ze(e);if(n==it||n==Mt)return!e.size;if(br(e))return!Cs(e).length;for(var s in e)if(ge.call(e,s))return!1;return!0}function h0(e,n){return mr(e,n)}function p0(e,n,s){s=typeof s=="function"?s:i;var o=s?s(e,n):i;return o===i?mr(e,n,i,s):!!o}function nu(e){if(!Ce(e))return!1;var n=et(e);return n==gn||n==dn||typeof e.message=="string"&&typeof e.name=="string"&&!Er(e)}function d0(e){return typeof e=="number"&&sl(e)}function Zt(e){if(!Ie(e))return!1;var n=et(e);return n==_n||n==Ft||n==_e||n==mn}function No(e){return typeof e=="number"&&e==ne(e)}function Ai(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Y}function Ie(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function Ce(e){return e!=null&&typeof e=="object"}var So=$a?dt($a):md;function g0(e,n){return e===n||Os(e,n,Xs(n))}function _0(e,n,s){return s=typeof s=="function"?s:i,Os(e,n,Xs(n),s)}function v0(e){return Io(e)&&e!=+e}function m0(e){if(tg(e))throw new j(a);return ml(e)}function y0(e){return e===null}function w0(e){return e==null}function Io(e){return typeof e=="number"||Ce(e)&&et(e)==vn}function Er(e){if(!Ce(e)||et(e)!=Z)return!1;var n=Qr(e);if(n===null)return!0;var s=ge.call(n,"constructor")&&n.constructor;return typeof s=="function"&&s instanceof s&&kr.call(s)==_p}var ru=Ha?dt(Ha):yd;function b0(e){return No(e)&&e>=-Y&&e<=Y}var Oo=Ga?dt(Ga):wd;function Ti(e){return typeof e=="string"||!te(e)&&Ce(e)&&et(e)==ur}function _t(e){return typeof e=="symbol"||Ce(e)&&et(e)==Ur}var er=qa?dt(qa):bd;function x0(e){return e===i}function E0(e){return Ce(e)&&Ze(e)==ar}function A0(e){return Ce(e)&&et(e)==$c}var T0=gi(Ms),N0=gi(function(e,n){return e<=n});function Co(e){if(!e)return[];if(at(e))return Ti(e)?Lt(e):ut(e);if(fr&&e[fr])return ip(e[fr]());var n=Ze(e),s=n==it?ms:n==Mt?Yr:tr;return s(e)}function Jt(e){if(!e)return e===0?e:0;if(e=Ct(e),e===B||e===-B){var n=e<0?-1:1;return n*k}return e===e?e:0}function ne(e){var n=Jt(e),s=n%1;return n===n?s?n-s:n:0}function Mo(e){return e?En(ne(e),0,X):0}function Ct(e){if(typeof e=="number")return e;if(_t(e))return V;if(Ie(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Ie(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Za(e);var s=ah.test(e);return s||oh.test(e)?Hh(e.slice(2),s?2:8):uh.test(e)?V:+e}function Lo(e){return Wt(e,lt(e))}function S0(e){return e?En(ne(e),-Y,Y):e===0?e:0}function he(e){return e==null?"":gt(e)}var I0=Qn(function(e,n){if(br(n)||at(n)){Wt(n,Ge(n),e);return}for(var s in n)ge.call(n,s)&&gr(e,s,n[s])}),Po=Qn(function(e,n){Wt(n,lt(n),e)}),Ni=Qn(function(e,n,s,o){Wt(n,lt(n),e,o)}),O0=Qn(function(e,n,s,o){Wt(n,Ge(n),e,o)}),C0=kt(As);function M0(e,n){var s=Jn(e);return n==null?s:fl(s,n)}var L0=se(function(e,n){e=ye(e);var s=-1,o=n.length,h=o>2?n[2]:i;for(h&&tt(n[0],n[1],h)&&(o=1);++s<o;)for(var g=n[s],v=lt(g),m=-1,b=v.length;++m<b;){var I=v[m],O=e[I];(O===i||Rt(O,kn[I])&&!ge.call(e,I))&&(e[I]=g[I])}return e}),P0=se(function(e){return e.push(i,Zl),pt(Ro,i,e)});function R0(e,n){return Va(e,J(n,3),Ut)}function z0(e,n){return Va(e,J(n,3),Ns)}function B0(e,n){return e==null?e:Ts(e,J(n,3),lt)}function F0(e,n){return e==null?e:gl(e,J(n,3),lt)}function U0(e,n){return e&&Ut(e,J(n,3))}function W0(e,n){return e&&Ns(e,J(n,3))}function $0(e){return e==null?[]:ai(e,Ge(e))}function H0(e){return e==null?[]:ai(e,lt(e))}function iu(e,n,s){var o=e==null?i:An(e,n);return o===i?s:o}function G0(e,n){return e!=null&&Dl(e,n,cd)}function su(e,n){return e!=null&&Dl(e,n,hd)}var q0=Yl(function(e,n,s){n!=null&&typeof n.toString!="function"&&(n=Kr.call(n)),e[n]=s},au(ot)),Y0=Yl(function(e,n,s){n!=null&&typeof n.toString!="function"&&(n=Kr.call(n)),ge.call(e,n)?e[n].push(s):e[n]=[s]},J),V0=se(vr);function Ge(e){return at(e)?ll(e):Cs(e)}function lt(e){return at(e)?ll(e,!0):xd(e)}function X0(e,n){var s={};return n=J(n,3),Ut(e,function(o,h,g){Vt(s,n(o,h,g),o)}),s}function k0(e,n){var s={};return n=J(n,3),Ut(e,function(o,h,g){Vt(s,h,n(o,h,g))}),s}var K0=Qn(function(e,n,s){li(e,n,s)}),Ro=Qn(function(e,n,s,o){li(e,n,s,o)}),Z0=kt(function(e,n){var s={};if(e==null)return s;var o=!1;n=Ne(n,function(g){return g=on(g,e),o||(o=g.length>1),g}),Wt(e,Ys(e),s),o&&(s=St(s,T|N|$,qd));for(var h=n.length;h--;)Bs(s,n[h]);return s});function J0(e,n){return zo(e,Ei(J(n)))}var Q0=kt(function(e,n){return e==null?{}:Ad(e,n)});function zo(e,n){if(e==null)return{};var s=Ne(Ys(e),function(o){return[o]});return n=J(n),Tl(e,s,function(o,h){return n(o,h[0])})}function D0(e,n,s){n=on(n,e);var o=-1,h=n.length;for(h||(h=1,e=i);++o<h;){var g=e==null?i:e[$t(n[o])];g===i&&(o=h,g=s),e=Zt(g)?g.call(e):g}return e}function j0(e,n,s){return e==null?e:yr(e,n,s)}function ev(e,n,s,o){return o=typeof o=="function"?o:i,e==null?e:yr(e,n,s,o)}var Bo=kl(Ge),Fo=kl(lt);function tv(e,n,s){var o=te(e),h=o||cn(e)||er(e);if(n=J(n,4),s==null){var g=e&&e.constructor;h?s=o?new g:[]:Ie(e)?s=Zt(g)?Jn(Qr(e)):{}:s={}}return(h?At:Ut)(e,function(v,m,b){return n(s,v,m,b)}),s}function nv(e,n){return e==null?!0:Bs(e,n)}function rv(e,n,s){return e==null?e:Cl(e,n,Ws(s))}function iv(e,n,s,o){return o=typeof o=="function"?o:i,e==null?e:Cl(e,n,Ws(s),o)}function tr(e){return e==null?[]:vs(e,Ge(e))}function sv(e){return e==null?[]:vs(e,lt(e))}function uv(e,n,s){return s===i&&(s=n,n=i),s!==i&&(s=Ct(s),s=s===s?s:0),n!==i&&(n=Ct(n),n=n===n?n:0),En(Ct(e),n,s)}function av(e,n,s){return n=Jt(n),s===i?(s=n,n=0):s=Jt(s),e=Ct(e),pd(e,n,s)}function lv(e,n,s){if(s&&typeof s!="boolean"&&tt(e,n,s)&&(n=s=i),s===i&&(typeof n=="boolean"?(s=n,n=i):typeof e=="boolean"&&(s=e,e=i)),e===i&&n===i?(e=0,n=1):(e=Jt(e),n===i?(n=e,e=0):n=Jt(n)),e>n){var o=e;e=n,n=o}if(s||e%1||n%1){var h=ul();return Ke(e+h*(n-e+$h("1e-"+((h+"").length-1))),n)}return Ps(e,n)}var ov=Dn(function(e,n,s){return n=n.toLowerCase(),e+(s?Uo(n):n)});function Uo(e){return uu(he(e).toLowerCase())}function Wo(e){return e=he(e),e&&e.replace(ch,jh).replace(Ch,"")}function fv(e,n,s){e=he(e),n=gt(n);var o=e.length;s=s===i?o:En(ne(s),0,o);var h=s;return s-=n.length,s>=0&&e.slice(s,h)==n}function cv(e){return e=he(e),e&&Vc.test(e)?e.replace(ga,ep):e}function hv(e){return e=he(e),e&&Qc.test(e)?e.replace(ts,"\\$&"):e}var pv=Dn(function(e,n,s){return e+(s?"-":"")+n.toLowerCase()}),dv=Dn(function(e,n,s){return e+(s?" ":"")+n.toLowerCase()}),gv=Hl("toLowerCase");function _v(e,n,s){e=he(e),n=ne(n);var o=n?Vn(e):0;if(!n||o>=n)return e;var h=(n-o)/2;return di(ti(h),s)+e+di(ei(h),s)}function vv(e,n,s){e=he(e),n=ne(n);var o=n?Vn(e):0;return n&&o<n?e+di(n-o,s):e}function mv(e,n,s){e=he(e),n=ne(n);var o=n?Vn(e):0;return n&&o<n?di(n-o,s)+e:e}function yv(e,n,s){return s||n==null?n=0:n&&(n=+n),Np(he(e).replace(ns,""),n||0)}function wv(e,n,s){return(s?tt(e,n,s):n===i)?n=1:n=ne(n),Rs(he(e),n)}function bv(){var e=arguments,n=he(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var xv=Dn(function(e,n,s){return e+(s?"_":"")+n.toLowerCase()});function Ev(e,n,s){return s&&typeof s!="number"&&tt(e,n,s)&&(n=s=i),s=s===i?X:s>>>0,s?(e=he(e),e&&(typeof n=="string"||n!=null&&!ru(n))&&(n=gt(n),!n&&Yn(e))?fn(Lt(e),0,s):e.split(n,s)):[]}var Av=Dn(function(e,n,s){return e+(s?" ":"")+uu(n)});function Tv(e,n,s){return e=he(e),s=s==null?0:En(ne(s),0,e.length),n=gt(n),e.slice(s,s+n.length)==n}function Nv(e,n,s){var o=p.templateSettings;s&&tt(e,n,s)&&(n=i),e=he(e),n=Ni({},n,o,Kl);var h=Ni({},n.imports,o.imports,Kl),g=Ge(h),v=vs(h,g),m,b,I=0,O=n.interpolate||Wr,L="__p += '",F=ys((n.escape||Wr).source+"|"+O.source+"|"+(O===_a?sh:Wr).source+"|"+(n.evaluate||Wr).source+"|$","g"),q="//# sourceURL="+(ge.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zh+"]")+`
`;e.replace(F,function(D,ae,oe,vt,nt,mt){return oe||(oe=vt),L+=e.slice(I,mt).replace(hh,tp),ae&&(m=!0,L+=`' +
__e(`+ae+`) +
'`),nt&&(b=!0,L+=`';
`+nt+`;
__p += '`),oe&&(L+=`' +
((__t = (`+oe+`)) == null ? '' : __t) +
'`),I=mt+D.length,D}),L+=`';
`;var Q=ge.call(n,"variable")&&n.variable;if(!Q)L=`with (obj) {
`+L+`
}
`;else if(rh.test(Q))throw new j(c);L=(b?L.replace(Hc,""):L).replace(Gc,"$1").replace(qc,"$1;"),L="function("+(Q||"obj")+`) {
`+(Q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(m?", __e = _.escape":"")+(b?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var ie=Ho(function(){return fe(g,q+"return "+L).apply(i,v)});if(ie.source=L,nu(ie))throw ie;return ie}function Sv(e){return he(e).toLowerCase()}function Iv(e){return he(e).toUpperCase()}function Ov(e,n,s){if(e=he(e),e&&(s||n===i))return Za(e);if(!e||!(n=gt(n)))return e;var o=Lt(e),h=Lt(n),g=Ja(o,h),v=Qa(o,h)+1;return fn(o,g,v).join("")}function Cv(e,n,s){if(e=he(e),e&&(s||n===i))return e.slice(0,ja(e)+1);if(!e||!(n=gt(n)))return e;var o=Lt(e),h=Qa(o,Lt(n))+1;return fn(o,0,h).join("")}function Mv(e,n,s){if(e=he(e),e&&(s||n===i))return e.replace(ns,"");if(!e||!(n=gt(n)))return e;var o=Lt(e),h=Ja(o,Lt(n));return fn(o,h).join("")}function Lv(e,n){var s=me,o=Me;if(Ie(n)){var h="separator"in n?n.separator:h;s="length"in n?ne(n.length):s,o="omission"in n?gt(n.omission):o}e=he(e);var g=e.length;if(Yn(e)){var v=Lt(e);g=v.length}if(s>=g)return e;var m=s-Vn(o);if(m<1)return o;var b=v?fn(v,0,m).join(""):e.slice(0,m);if(h===i)return b+o;if(v&&(m+=b.length-m),ru(h)){if(e.slice(m).search(h)){var I,O=b;for(h.global||(h=ys(h.source,he(va.exec(h))+"g")),h.lastIndex=0;I=h.exec(O);)var L=I.index;b=b.slice(0,L===i?m:L)}}else if(e.indexOf(gt(h),m)!=m){var F=b.lastIndexOf(h);F>-1&&(b=b.slice(0,F))}return b+o}function Pv(e){return e=he(e),e&&Yc.test(e)?e.replace(da,lp):e}var Rv=Dn(function(e,n,s){return e+(s?" ":"")+n.toUpperCase()}),uu=Hl("toUpperCase");function $o(e,n,s){return e=he(e),n=s?i:n,n===i?rp(e)?cp(e):Kh(e):e.match(n)||[]}var Ho=se(function(e,n){try{return pt(e,i,n)}catch(s){return nu(s)?s:new j(s)}}),zv=kt(function(e,n){return At(n,function(s){s=$t(s),Vt(e,s,eu(e[s],e))}),e});function Bv(e){var n=e==null?0:e.length,s=J();return e=n?Ne(e,function(o){if(typeof o[1]!="function")throw new Tt(f);return[s(o[0]),o[1]]}):[],se(function(o){for(var h=-1;++h<n;){var g=e[h];if(pt(g[0],this,o))return pt(g[1],this,o)}})}function Fv(e){return ld(St(e,T))}function au(e){return function(){return e}}function Uv(e,n){return e==null||e!==e?n:e}var Wv=ql(),$v=ql(!0);function ot(e){return e}function lu(e){return yl(typeof e=="function"?e:St(e,T))}function Hv(e){return bl(St(e,T))}function Gv(e,n){return xl(e,St(n,T))}var qv=se(function(e,n){return function(s){return vr(s,e,n)}}),Yv=se(function(e,n){return function(s){return vr(e,s,n)}});function ou(e,n,s){var o=Ge(n),h=ai(n,o);s==null&&!(Ie(n)&&(h.length||!o.length))&&(s=n,n=e,e=this,h=ai(n,Ge(n)));var g=!(Ie(s)&&"chain"in s)||!!s.chain,v=Zt(e);return At(h,function(m){var b=n[m];e[m]=b,v&&(e.prototype[m]=function(){var I=this.__chain__;if(g||I){var O=e(this.__wrapped__),L=O.__actions__=ut(this.__actions__);return L.push({func:b,args:arguments,thisArg:e}),O.__chain__=I,O}return b.apply(e,rn([this.value()],arguments))})}),e}function Vv(){return Ye._===this&&(Ye._=vp),this}function fu(){}function Xv(e){return e=ne(e),se(function(n){return El(n,e)})}var kv=Hs(Ne),Kv=Hs(Ya),Zv=Hs(hs);function Go(e){return Ks(e)?ps($t(e)):Td(e)}function Jv(e){return function(n){return e==null?i:An(e,n)}}var Qv=Vl(),Dv=Vl(!0);function cu(){return[]}function hu(){return!1}function jv(){return{}}function e1(){return""}function t1(){return!0}function n1(e,n){if(e=ne(e),e<1||e>Y)return[];var s=X,o=Ke(e,X);n=J(n),e-=X;for(var h=_s(o,n);++s<e;)n(s);return h}function r1(e){return te(e)?Ne(e,$t):_t(e)?[e]:ut(ao(he(e)))}function i1(e){var n=++gp;return he(e)+n}var s1=pi(function(e,n){return e+n},0),u1=Gs("ceil"),a1=pi(function(e,n){return e/n},1),l1=Gs("floor");function o1(e){return e&&e.length?ui(e,ot,Ss):i}function f1(e,n){return e&&e.length?ui(e,J(n,2),Ss):i}function c1(e){return ka(e,ot)}function h1(e,n){return ka(e,J(n,2))}function p1(e){return e&&e.length?ui(e,ot,Ms):i}function d1(e,n){return e&&e.length?ui(e,J(n,2),Ms):i}var g1=pi(function(e,n){return e*n},1),_1=Gs("round"),v1=pi(function(e,n){return e-n},0);function m1(e){return e&&e.length?gs(e,ot):0}function y1(e,n){return e&&e.length?gs(e,J(n,2)):0}return p.after=H_,p.ary=yo,p.assign=I0,p.assignIn=Po,p.assignInWith=Ni,p.assignWith=O0,p.at=C0,p.before=wo,p.bind=eu,p.bindAll=zv,p.bindKey=bo,p.castArray=j_,p.chain=_o,p.chunk=lg,p.compact=og,p.concat=fg,p.cond=Bv,p.conforms=Fv,p.constant=au,p.countBy=m_,p.create=M0,p.curry=xo,p.curryRight=Eo,p.debounce=Ao,p.defaults=L0,p.defaultsDeep=P0,p.defer=G_,p.delay=q_,p.difference=cg,p.differenceBy=hg,p.differenceWith=pg,p.drop=dg,p.dropRight=gg,p.dropRightWhile=_g,p.dropWhile=vg,p.fill=mg,p.filter=w_,p.flatMap=E_,p.flatMapDeep=A_,p.flatMapDepth=T_,p.flatten=co,p.flattenDeep=yg,p.flattenDepth=wg,p.flip=Y_,p.flow=Wv,p.flowRight=$v,p.fromPairs=bg,p.functions=$0,p.functionsIn=H0,p.groupBy=N_,p.initial=Eg,p.intersection=Ag,p.intersectionBy=Tg,p.intersectionWith=Ng,p.invert=q0,p.invertBy=Y0,p.invokeMap=I_,p.iteratee=lu,p.keyBy=O_,p.keys=Ge,p.keysIn=lt,p.map=wi,p.mapKeys=X0,p.mapValues=k0,p.matches=Hv,p.matchesProperty=Gv,p.memoize=xi,p.merge=K0,p.mergeWith=Ro,p.method=qv,p.methodOf=Yv,p.mixin=ou,p.negate=Ei,p.nthArg=Xv,p.omit=Z0,p.omitBy=J0,p.once=V_,p.orderBy=C_,p.over=kv,p.overArgs=X_,p.overEvery=Kv,p.overSome=Zv,p.partial=tu,p.partialRight=To,p.partition=M_,p.pick=Q0,p.pickBy=zo,p.property=Go,p.propertyOf=Jv,p.pull=Cg,p.pullAll=po,p.pullAllBy=Mg,p.pullAllWith=Lg,p.pullAt=Pg,p.range=Qv,p.rangeRight=Dv,p.rearg=k_,p.reject=R_,p.remove=Rg,p.rest=K_,p.reverse=Ds,p.sampleSize=B_,p.set=j0,p.setWith=ev,p.shuffle=F_,p.slice=zg,p.sortBy=$_,p.sortedUniq=Gg,p.sortedUniqBy=qg,p.split=Ev,p.spread=Z_,p.tail=Yg,p.take=Vg,p.takeRight=Xg,p.takeRightWhile=kg,p.takeWhile=Kg,p.tap=o_,p.throttle=J_,p.thru=yi,p.toArray=Co,p.toPairs=Bo,p.toPairsIn=Fo,p.toPath=r1,p.toPlainObject=Lo,p.transform=tv,p.unary=Q_,p.union=Zg,p.unionBy=Jg,p.unionWith=Qg,p.uniq=Dg,p.uniqBy=jg,p.uniqWith=e_,p.unset=nv,p.unzip=js,p.unzipWith=go,p.update=rv,p.updateWith=iv,p.values=tr,p.valuesIn=sv,p.without=t_,p.words=$o,p.wrap=D_,p.xor=n_,p.xorBy=r_,p.xorWith=i_,p.zip=s_,p.zipObject=u_,p.zipObjectDeep=a_,p.zipWith=l_,p.entries=Bo,p.entriesIn=Fo,p.extend=Po,p.extendWith=Ni,ou(p,p),p.add=s1,p.attempt=Ho,p.camelCase=ov,p.capitalize=Uo,p.ceil=u1,p.clamp=uv,p.clone=e0,p.cloneDeep=n0,p.cloneDeepWith=r0,p.cloneWith=t0,p.conformsTo=i0,p.deburr=Wo,p.defaultTo=Uv,p.divide=a1,p.endsWith=fv,p.eq=Rt,p.escape=cv,p.escapeRegExp=hv,p.every=y_,p.find=b_,p.findIndex=oo,p.findKey=R0,p.findLast=x_,p.findLastIndex=fo,p.findLastKey=z0,p.floor=l1,p.forEach=vo,p.forEachRight=mo,p.forIn=B0,p.forInRight=F0,p.forOwn=U0,p.forOwnRight=W0,p.get=iu,p.gt=s0,p.gte=u0,p.has=G0,p.hasIn=su,p.head=ho,p.identity=ot,p.includes=S_,p.indexOf=xg,p.inRange=av,p.invoke=V0,p.isArguments=Sn,p.isArray=te,p.isArrayBuffer=a0,p.isArrayLike=at,p.isArrayLikeObject=Re,p.isBoolean=l0,p.isBuffer=cn,p.isDate=o0,p.isElement=f0,p.isEmpty=c0,p.isEqual=h0,p.isEqualWith=p0,p.isError=nu,p.isFinite=d0,p.isFunction=Zt,p.isInteger=No,p.isLength=Ai,p.isMap=So,p.isMatch=g0,p.isMatchWith=_0,p.isNaN=v0,p.isNative=m0,p.isNil=w0,p.isNull=y0,p.isNumber=Io,p.isObject=Ie,p.isObjectLike=Ce,p.isPlainObject=Er,p.isRegExp=ru,p.isSafeInteger=b0,p.isSet=Oo,p.isString=Ti,p.isSymbol=_t,p.isTypedArray=er,p.isUndefined=x0,p.isWeakMap=E0,p.isWeakSet=A0,p.join=Sg,p.kebabCase=pv,p.last=Ot,p.lastIndexOf=Ig,p.lowerCase=dv,p.lowerFirst=gv,p.lt=T0,p.lte=N0,p.max=o1,p.maxBy=f1,p.mean=c1,p.meanBy=h1,p.min=p1,p.minBy=d1,p.stubArray=cu,p.stubFalse=hu,p.stubObject=jv,p.stubString=e1,p.stubTrue=t1,p.multiply=g1,p.nth=Og,p.noConflict=Vv,p.noop=fu,p.now=bi,p.pad=_v,p.padEnd=vv,p.padStart=mv,p.parseInt=yv,p.random=lv,p.reduce=L_,p.reduceRight=P_,p.repeat=wv,p.replace=bv,p.result=D0,p.round=_1,p.runInContext=w,p.sample=z_,p.size=U_,p.snakeCase=xv,p.some=W_,p.sortedIndex=Bg,p.sortedIndexBy=Fg,p.sortedIndexOf=Ug,p.sortedLastIndex=Wg,p.sortedLastIndexBy=$g,p.sortedLastIndexOf=Hg,p.startCase=Av,p.startsWith=Tv,p.subtract=v1,p.sum=m1,p.sumBy=y1,p.template=Nv,p.times=n1,p.toFinite=Jt,p.toInteger=ne,p.toLength=Mo,p.toLower=Sv,p.toNumber=Ct,p.toSafeInteger=S0,p.toString=he,p.toUpper=Iv,p.trim=Ov,p.trimEnd=Cv,p.trimStart=Mv,p.truncate=Lv,p.unescape=Pv,p.uniqueId=i1,p.upperCase=Rv,p.upperFirst=uu,p.each=vo,p.eachRight=mo,p.first=ho,ou(p,function(){var e={};return Ut(p,function(n,s){ge.call(p.prototype,s)||(e[s]=n)}),e}(),{chain:!1}),p.VERSION=u,At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),At(["drop","take"],function(e,n){le.prototype[e]=function(s){s=s===i?1:He(ne(s),0);var o=this.__filtered__&&!n?new le(this):this.clone();return o.__filtered__?o.__takeCount__=Ke(s,o.__takeCount__):o.__views__.push({size:Ke(s,X),type:e+(o.__dir__<0?"Right":"")}),o},le.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),At(["filter","map","takeWhile"],function(e,n){var s=n+1,o=s==E||s==M;le.prototype[e]=function(h){var g=this.clone();return g.__iteratees__.push({iteratee:J(h,3),type:s}),g.__filtered__=g.__filtered__||o,g}}),At(["head","last"],function(e,n){var s="take"+(n?"Right":"");le.prototype[e]=function(){return this[s](1).value()[0]}}),At(["initial","tail"],function(e,n){var s="drop"+(n?"":"Right");le.prototype[e]=function(){return this.__filtered__?new le(this):this[s](1)}}),le.prototype.compact=function(){return this.filter(ot)},le.prototype.find=function(e){return this.filter(e).head()},le.prototype.findLast=function(e){return this.reverse().find(e)},le.prototype.invokeMap=se(function(e,n){return typeof e=="function"?new le(this):this.map(function(s){return vr(s,e,n)})}),le.prototype.reject=function(e){return this.filter(Ei(J(e)))},le.prototype.slice=function(e,n){e=ne(e);var s=this;return s.__filtered__&&(e>0||n<0)?new le(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),n!==i&&(n=ne(n),s=n<0?s.dropRight(-n):s.take(n-e)),s)},le.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},le.prototype.toArray=function(){return this.take(X)},Ut(le.prototype,function(e,n){var s=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),h=p[o?"take"+(n=="last"?"Right":""):n],g=o||/^find/.test(n);h&&(p.prototype[n]=function(){var v=this.__wrapped__,m=o?[1]:arguments,b=v instanceof le,I=m[0],O=b||te(v),L=function(ae){var oe=h.apply(p,rn([ae],m));return o&&F?oe[0]:oe};O&&s&&typeof I=="function"&&I.length!=1&&(b=O=!1);var F=this.__chain__,q=!!this.__actions__.length,Q=g&&!F,ie=b&&!q;if(!g&&O){v=ie?v:new le(this);var D=e.apply(v,m);return D.__actions__.push({func:yi,args:[L],thisArg:i}),new Nt(D,F)}return Q&&ie?e.apply(this,m):(D=this.thru(L),Q?o?D.value()[0]:D.value():D)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var n=Vr[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var h=arguments;if(o&&!this.__chain__){var g=this.value();return n.apply(te(g)?g:[],h)}return this[s](function(v){return n.apply(te(v)?v:[],h)})}}),Ut(le.prototype,function(e,n){var s=p[n];if(s){var o=s.name+"";ge.call(Zn,o)||(Zn[o]=[]),Zn[o].push({name:n,func:s})}}),Zn[hi(i,y).name]=[{name:"wrapper",func:i}],le.prototype.clone=Pp,le.prototype.reverse=Rp,le.prototype.value=zp,p.prototype.at=f_,p.prototype.chain=c_,p.prototype.commit=h_,p.prototype.next=p_,p.prototype.plant=g_,p.prototype.reverse=__,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=v_,p.prototype.first=p.prototype.head,fr&&(p.prototype[fr]=d_),p},Xn=hp();yn?((yn.exports=Xn)._=Xn,ls._=Xn):Ye._=Xn}).call(Tr)})(Fi,Fi.exports);var re=Fi.exports;function Ic(t,r,i){let u=[t],l=[],a,f,c;for(;t=u.pop();)if(!(i&&i(t))&&(l.push(t),a=t.children,a))for(f=0,c=a.length;f<c;++f)u.push(a[f]);for(;t=l.pop();)r(t);return t}function Qw(t,r,i){let u=[t],l,a;for(;t=u.pop();)if(!(i&&i(t))&&(r(t),l=t.children,l))for(a=l.length-1;a>=0;--a)u.push(l[a]);return t}function Dw(t,r,i){let u,l=[t],a,f,c;do for(u=l.reverse(),l=[];t=u.pop();)if(!(i&&i(t))&&(r(t),a=t.children,a))for(f=0,c=a.length;f<c;++f)l.push(a[f]);while(l.length);return t}function jw(t){return Ic(t,function(u){u.children&&(u.children[0].data.multiway_parent=u,u.children[1].data.multiway_parent=u.parent)}),re.map(t.descendants(),u=>{let l=u.data.multiway_parent,a="unknown";return l&&(a=l.data.name),{source:u.data.multiway_parent,target:u,name:a}})}function eb(){let t=this.branch_length;return t?Ru(this.nodes.descendants(),function(r){return!r.parent||!tn(t(r))}):!1}function tb(){let t=this.branch_length;return De(this.nodes.descendants(),r=>t(r))}function $u(t,r){let i=t.data;if("attribute"in i&&i.attribute&&i.attribute.length){r>0&&(i.attribute=String(r));let u=parseFloat(i.attribute);if(!isNaN(u))return Math.max(0,u)}if(i.name=="root")return 0;console.warn("Undefined branch length at "+i.name+"!")}function nb(t){return arguments.length?(this.branch_length_accessor=t||$u,this):this.branch_length_accessor}function rb(t){let r=this.branch_length,i=De(this.nodes.descendants(),function(f){return r(f)?r(f):null});const u=ua(i),l=cc(i);let a=function(f){return(f-l)/(u-l)};return we(this.nodes.descendants(),f=>{let c=r(f);c&&r(f,a(c))}),this}function ib(t){let r=this.branch_length;return we(this.nodes.descendants(),i=>{let u=r(i);u&&r(i,t(u))}),this}function sb(t){return arguments.length?(this.nodeLabel=t,this):this.nodeLabel}function ub(t,r){if(!(t instanceof Mn))throw new Error("node needs to be an instance of a d3.hierarchy node!");let i=this.nodes.copy();if(r=r!==void 0?r:.5,t.parent){var u=Mn({name:"new_root"});u.children=[t.copy()],u.data.__mapped_bl=void 0,i.each(_=>{_.data.__mapped_bl=this.branch_length_accessor(_)}),this.setBranchLength(_=>_.data.__mapped_bl);let a=t,f=t.parent,c=void 0,d=t.data.__mapped_bl===void 0?void 0:t.data.__mapped_bl*r;c=f.data.__mapped_bl,f.data.__mapped_bl=t.data.__mapped_bl===void 0?void 0:t.data.__mapped_bl-d,t.data.__mapped_bl=d;var l;if(f.parent){for(u.children.push(f);f.parent;){l=f.children.indexOf(a),f.parent.parent?f.children.splice(l,1,f.parent):f.children.splice(l,1);let _=f.parent.data.__mapped_bl;_!==void 0&&(f.parent.data.__mapped_bl=c,c=_),a=f,f=f.parent}l=f.children.indexOf(a),f.children.splice(l,1)}else l=f.children.indexOf(a),f.children.splice(l,1),c=f.data.__mapped_bl,a=u;if(f.children.length==1)c&&(f.children[0].data.__mapped_bl+=c),a.children=a.children.concat(f.children);else{let _=new Mn({name:"__reroot_top_clade",__mapped_bl:c});Cr(u.children[0],t),_.data.__mapped_bl=c,_.children=f.children.map(function(x){return x.parent=_,x}),_.parent=a,a.children.push(_)}}if(this.update(u),this.traverse_and_compute(a=>{we(a.children,f=>{f.parent=a})},"pre-order"),!tn(this.display)){let a=this.display.options;Ee(this.display.container).select("svg").remove();let f=this.display.selection_attribute_name;delete this.display;let c=this.render(a);c.selectionLabel(f),c.update(),Ee(c.container).node().appendChild(c.show()),Ee(this.display.container).dispatch("reroot")}return this}function ab(t,r){if(t=t||"attribute",r=r||"y_scaled","parent"in this){let i=parseFloat(this[t]);this[r]=this.parent[r]+(isNaN(i)?.1:i)}else this[r]=0;return this[r]}function lb(t){let r=[];for(;t;)r.push(t),t=t.parent;return r}const ob=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:lb,reroot:ub,rootpath:ab},Symbol.toStringTag,{value:"Module"}));function en(t){return t.y}function Rn(t){return t.x}function Ui(t,r,i){return{x:i+t*Math.sin(r),y:i+t*Math.cos(r)}}function pf(t,r,i,u,l,a){t.radius=r*(t.radius+i),t.angle=2*Math.PI*t.x*l[0]/a[0];let f=Ui(t.radius,t.angle,u);return t.x=f.x,t.y=f.y,t}function df(t,r){var i=Ui(r[0].radius,r[0].angle,t),u=Ui(r[0].radius,r[1].angle,t);return"M "+en(i)+","+Rn(i)+" A "+r[0].radius+","+r[0].radius+" 0,0, "+(r[1].angle>r[0].angle?1:0)+" "+en(u)+","+Rn(u)+" L "+en(r[1])+","+Rn(r[1])}function fb(t,r,i){var u=Ui(t.target.radius+(t.source.radius-t.target.radius)*r,t.target.angle,i);return{x:en(u),y:Rn(u)}}var gf=Tu().x(function(t){return en(t)}).y(function(t){return Rn(t)}).curve(S1);function _f(t,r){return{x:en(t.target)+(en(t.source)-en(t.target))*r,y:Rn(t.target)}}function ca(t){return t.tag||!1}function ha(t,r){return t[r]||!1}const ve={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function Oc(t={}){Object.keys(t).forEach(r=>{ve[r]=t[r]})}function cb(t){return arguments.length?(this.options["internal-names"]=t,this):this.options["internal-names"]}function hb(t){return arguments.length?(this.options["is-radial"]=t,this):this.options["is-radial"]}function pb(t){return arguments.length?(this.options["align-tips"]=t,this):this.options["align-tips"]}function db(t){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](t):this.options["draw-size-bubbles"]?this.relative_nodeSpan(t)*this.scales[0]*.25:0}function gb(t){return this.options["is-radial"]?[(t.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-t.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-t.screen_x,0]:[this.right_most_leaf-t.screen_x,0]}function _b(t){return arguments.length?(this.layout_listener_handler=t,this):this.layout_listener_handler}function vb(t){return arguments.length?(this.selection_attribute_name=t,this.syncEdgeLabels(),this):this.selection_attribute_name}function Mi(t){return arguments.length?(typeof t=="string"&&t=="equal"?Mi=function(r){return 1}:Mi=t,this):Mi}var Hu={all:t=>!0,none:t=>!1,"all-leaf-nodes":t=>Ae(t.target),"all-internal-nodes":t=>!Ae(t.target)};function mb(t){return t?(this._selectionCallback=t,this):this._selectionCallback}const yb=Object.freeze(Object.defineProperty({__proto__:null,alignTips:pb,css_classes:ve,initializeCssClasses:Oc,internalNames:cb,layoutHandler:_b,nodeBubbleSize:db,get nodeSpan(){return Mi},predefined_selecters:Hu,radial:hb,selectionCallback:mb,selectionLabel:vb,shiftTip:gb},Symbol.toStringTag,{value:"Module"}));function wb(t){return this.radial()?[(t.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-t.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-t.screen_x,0]:[this.right_most_leaf-t.screen_x,0]}function bb(t,r,i){t=Ee(t);var u=Ae(r);u&&(t=t.attr("data-node-name",r.data.name));var l=t.selectAll("text").data([r]),a=t.selectAll("line");if(u||this.showInternalName(r)&&!zn(r))if(l=l.enter().append("text").classed(this.css_classes.node_text,!0).merge(l).on("click",c=>{this.handle_node_click(r,c)}).attr("dy",c=>this.shown_font_size*.33).text(c=>this.options["show-labels"]?this._nodeLabel(c):"").style("font-size",c=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?l=l.attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(c):null)).attr("text-anchor",c=>c.text_align):l=l.attr("text-anchor","start").attr("transform",c=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(c):null)),this.alignTips()?(a=a.data([r]),i?a=a.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(a).attr("x1",c=>(c.text_align=="end"?-1:1)*this.nodeBubbleSize(r)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",c=>this.options.layout=="right-to-left"?c.screen_x:this.shiftTip(c)[0]).attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)).attr("x2",c=>this.options.layout=="right-to-left"?c.screen_x:this.shiftTip(c)[0]).attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)):(a=a.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(a).attr("x1",c=>(c.text_align=="end"?-1:1)*this.nodeBubbleSize(r)).attr("y2",0).attr("y1",0).attr("x2",c=>this.shiftTip(c)[0]),a.attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)))):a.remove(),this.options["draw-size-bubbles"]){var f=this.nodeBubbleSize(r);t.selectAll("circle").data([f]).enter().append("circle").attr("r",function(d){return d}),this.shown_font_size>=5&&(l=l.attr("dx",d=>(d.text_align=="end"?-1:1)*((this.alignTips()?0:f)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(l=l.attr("dx",c=>(c.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!u){let c=t.selectAll("circle").data([r]).enter().append("circle"),d=this.node_circle_size()(r);d>0?c.merge(c).attr("r",_=>Math.min(this.shown_font_size*.75,d)).on("click",_=>{this.handle_node_click(r,_)}):c.remove()}return this.node_styler&&this.node_styler(t,r),r}function xb(){let t=this.phylotree.nodes.descendants();for(let r=t.length-1;r>=0;r-=1)Ae(t[r])?t[r].hasHiddenNodes=t[r].notshown:t[r].hasHiddenNodes=t[r].children.reduce(function(i,u){return u.notshown||i},!1);return this}function Eb(t){const r=this.internalNames();return r?typeof r=="function"?r(t):r:!1}function Ab(t){return arguments.length?(typeof t=="string"&&t=="equal"?this.nodeSpan=function(r){return 1}:this.nodeSpan=t,this):this.nodeSpan}function Tb(t){let r=ve[Ae(t)?"node":"internal-node"];return ca(t)&&(r+=" "+ve["tagged-node"]),ha(t,this.selection_attribute_name)&&(r+=" "+ve["selected-node"]),t.parent||(r+=" "+ve["root-node"]),(zn(t)||pa(t))&&(r+=" "+ve["collapsed-node"]),r}function Gu(t){return!(t.hidden||t.notshown)}function Cc(t){return t.notshown}function pa(t){return t.hasHiddenNodes||!1}function zn(t){return t.collapsed||!1}function Mc(t){return[t.node,t["internal-node"],t["collapsed-node"],t["tagged-node"],t["root-node"]].reduce(function(r,i,u,l){return r+="g."+i+(u<l.length-1?",":"")},"")}function Nb(t,r){this.phylotree.clearInternalNodes(r);for(var i=this.phylotree.nodes.descendants().length-1;i>=0;i--){var u=this.phylotree.nodes.descendants()[i];Ae(u)||ha(u,this.selection_attribute_name)||(u[this.selection_attribute_name]=t(u.children))}this.modifySelection((l,a)=>Ae(l.target)?l.target[this.selection_attribute_name]:l.target[this.selection_attribute_name])}function Lc(t){return t=t.data,Ae(t)?t.name||"":this.showInternalName(t)?t.name:""}function Sb(t){return arguments.length?(this._nodeLabel=t||Lc,this.update(),this):this._nodeLabel}const Ib=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:Lc,drawNode:bb,hasHiddenNodes:pa,internalLabel:Nb,isNodeCollapsed:zn,nodeCssSelectors:Mc,nodeLabel:Sb,nodeNotshown:Cc,nodeSpan:Ab,nodeVisible:Gu,reclassNode:Tb,shiftTip:wb,showInternalName:Eb,updateHasHiddenNodes:xb},Symbol.toStringTag,{value:"Module"}));function Pc(t){return[t.clade].reduce(function(r,i,u,l){return r+="path."+i+(u<l.length-1?",":"")},"")}function Ob(t){let r=this.svg.selectAll("."+this.css_classes["tree-container"]);var i=0;let u=r.selectAll(Pc(this.css_classes)).data(this.phylotree.nodes.descendants().filter(zn),function(f){return f.id||(f.id=++i)}),l=function(){},a=void 0;this.radial()?(l=Tu().curve(Yo).y(function(f){return f[0]}).x(function(f){return f[1]}),a=function(f,c,d,_,x){return c?[d.screen_y+(f[0]-_)/50,d.screen_x+(f[1]-x)/50]:[d.screen_y,d.screen_x]}):(l=Tu().y(function(f){return f[0]}).x(function(f){return f[1]}).curve(Yo),a=function(f,c,d,_,x){return c?[d.screen_y+(f[0]-_)/50,d.screen_x+(f[1]-x)/50]:[d.screen_y,d.screen_x]}),u.exit().each(function(f){f.collapsed_clade=null}).remove(),t?u.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(u).attr("d",function(f){if(f.collapsed_clade)return f.collapsed_clade;let c=f.collapsed[0][0],d=f.collapsed[0][1];return l(f.collapsed.map(function(_,x){return a(_,x,f,c,d)}))}).attr("d",function(f){return f.collapsed_clade=l(f.collapsed)}):u.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(u).attr("d",function(f){return f.collapsed_clade?f.collapsed_clade:f.collapsed_clade=l(f.collapsed)})}const Cb=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:Pc,updateCollapsedClades:Ob},Symbol.toStringTag,{value:"Module"}));function Mb(t,r,i){t=Ee(t),t=t.attr("class",f=>this.reclassEdge(f)).on("click",f=>{this.modifySelection([r.target],this.selection_attribute_name),this.update()});let u=this.draw_branch([r.source,r.target]);i&&t.datum().existing_path&&(t=t.attr("d",function(f){return f.existing_path})),t=t.attr("d",u),r.existing_path=u;var l=this.phylotree.branch_length_accessor(r.target);if(l!==void 0){var a=t.selectAll("title");a.empty()&&(a=t.append("title")),a.text("Length = "+l)}else t.selectAll("title").remove();return this.edge_styler&&this.edge_styler(t,r,i),this.phylotree}function Lb(t){let r=ve.branch;return ca(t)&&(r+=" "+ve["tagged-branch"]),ha(t,this.selection_attribute_name)&&(r+=" "+ve["selected-branch"]),r}function Pb(){this.links.forEach(t=>{t.target.data.annotation&&(t.target[t.target.data.annotation]=t.target.data.annotation)})}function Rb(){if(this.links.forEach(t=>{t[this.selection_attribute_name]=t.target[this.selection_attribute_name]||!1,t.tag=t.target.tag||!1}),this.countHandler()){let t={};t[this.selection_attribute_name]=this.links.reduce((r,i)=>r+(i[this.selection_attribute_name]?1:0),0),t.tagged=this.links.reduce(function(r,i){return r+(ca(i)?1:0)},0),this.countUpdate(this,t,this.countHandler())}}function qu(t){return!(t.target.hidden||t.target.notshown)}function Yu(t){return[t.branch,t["selected-branch"],t["tagged-branch"]].reduce(function(r,i,u,l){return r+="path."+i+(u<l.length-1?",":"")},"")}function zb(t,r){return this.edge_placer(t,r)}const Bb=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:Mb,edgeCssSelectors:Yu,edgeVisible:qu,initializeEdgeLabels:Pb,placeAlongAnEdge:zb,reclassEdge:Lb,syncEdgeLabels:Rb},Symbol.toStringTag,{value:"Module"}));let Yi="phylotree.event";function Fb(t){if(t.collapsed){t.collapsed=!1;let r=function(i){Ae(i)||i.collapsed||i.children.forEach(r),i.hidden=!1};r(t)}else t.collapsed=!0;return this.placenodes(),this}function Ub(t,r,i){let u=this.size;if(this.radial()){let l=this.pad_width(),a=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;u=[u[1]+2*l,u[0]+2*l+a],r&&r.selectAll("."+ve["tree-container"]).attr("transform","translate ("+l+","+(l+a)+")")}else u=[u[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),u[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return r&&(i&&(r=r.transition(100)),r.attr("height",u[0]).attr("width",u[1])),this.size=u,u}function Wb(t,r){r=r||"y_scaled",r in this&&(this[r]*=t)}function Vu(t){var r=new CustomEvent(Yi,{detail:["refresh",t]});document.dispatchEvent(r)}function Rc(t,r){var i=new CustomEvent(Yi,{detail:["countUpdate",r,t.countHandler()]});document.dispatchEvent(i)}function $b(t){var r=new CustomEvent(Yi,{detail:["layout",t,t.layoutHandler()]});document.dispatchEvent(r)}function zc(t){switch(t.detail[0]){case"refresh":t.detail[1].refresh();break;case"countUpdate":t.detail[2](t.detail[1]);break;case"layout":t.detail[2](t.detail[1])}return!0}function Bc(){document.addEventListener(Yi,zc,!1)}function Hb(t){return t&&(t[0]!==null||t[1]!==null)?"translate ("+(t[0]!==null?t[0]:0)+","+(t[1]!==null?t[1]:0)+") ":""}function Gb(t){return t!==null?"rotate ("+t+") ":""}const qb=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:Rc,d3PhylotreeAddEventListener:Bc,d3PhylotreeEventListener:zc,d3PhylotreeSvgRotate:Gb,d3PhylotreeSvgTranslate:Hb,d3PhylotreeTriggerLayout:$b,rescale:Wb,resizeSvg:Ub,toggleCollapse:Fb,triggerRefresh:Vu},Symbol.toStringTag,{value:"Module"}));let vf="d3_layout_phylotree_context_menu";function Yb(t,r,i,u,l){let a=Ee(r).select("#"+vf);if(a.empty()&&(a=Ee(r).append("div").attr("id",vf).attr("class","dropdown-menu").attr("role","menu")),a.selectAll("a").remove(),a.selectAll("h6").remove(),a.selectAll("div").remove(),t){if(!zi([!!t.menu_items,u.hide,u.selectable,u.collapsible])||!u["show-menu"])return;Ae(t)||(u.collapsible&&(a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(zn(t)?"Expand Subtree":"Collapse Subtree").on("click",_=>{a.style("display","none"),this.toggleCollapse(t).update()}),u.selectable&&(a.append("div").attr("class","dropdown-divider"),a.append("h6").attr("class","dropdown-header").text("Toggle selection"))),u.selectable&&(a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(_){a.style("display","none"),i.modifySelection(i.selectAllDescendants(t,!0,!0))}),a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(_){a.style("display","none"),i.modifySelection(i.selectAllDescendants(t,!0,!1))}),a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(_){a.style("display","none"),i.modifySelection(i.selectAllDescendants(t,!1,!0))}))),t.parent&&(u.selectable&&(a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(_){a.style("display","none"),i.modifySelection([t])}),a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",_=>{a.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(t))}),(u.reroot||u.hide)&&a.append("div").attr("class","dropdown-divider")),u.reroot&&a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",_=>{a.style("display","none"),this.phylotree.reroot(t),this.update()}),u.hide&&a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(Ae(t)?"node":"subtree")).on("click",_=>{a.style("display","none"),this.modifySelection([t],"notshown",!0,!0).updateHasHiddenNodes().update()})),pa(t)&&a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(_){a.style("display","none"),i.modifySelection(i.selectAllDescendants(t,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var f=[];if("menu_items"in t&&typeof t.menu_items=="object"&&t.menu_items.forEach(function(_){_.length==3&&(!_[2]||_[2](t))&&f.push([_[0],_[1]])}),f.length){const _=[u.hide,u.selectable,u.collapsible];zi(_)&&a.append("div").attr("class","dropdown-divider"),f.forEach(function(x){a.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(x[0](t)).on("click",Gt(x[1],t))})}let d=document.querySelector(r).getBoundingClientRect();a.style("position","absolute").style("left",""+(l.clientX-d.x+12)+"px").style("top",""+(l.clientY-d.y)+"px").style("display","block")}else a.style("display","none")}function Vb(t,r,i,u){"menu_items"in t||(t.menu_items=[]),t.menu_items.some(function(l){return l[0]==r&&l[1]==i&&l[2]==u})||t.menu_items.push([r,i,u])}function Xb(t,r,i,u,l){if(r=r||this.selection_attribute_name,l=l||"toggle",this.options["restricted-selectable"].length)if(Ht(Ue(Hu),t))t=Hu[t];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var a=!1;typeof t=="function"?this.links.forEach(function(c){let d=t(c);c[r]=c[r]||!1,c[r]!=d&&(c[r]=d,a=!0,c.target[r]=d)}):(t.forEach(function(c){var d;switch(l){case"true":d=!0;break;case"false":d=!1;break;default:d=!c[r];break}c[r]!=d&&(c[r]=d,a=!0)}),this.links.forEach(function(c){c[r]=c.target[r]}));var f;a&&(u||Vu(this),this.countHandler&&(f={},f[r]=this.links.reduce(function(c,d){return c+(d[r]?1:0)},0),Rc(this,f,this.countHandler)),i&&this.placenodes())}else this.options["binary-selectable"]&&(typeof t=="function"?this.links.forEach(function(c){var d=t(c);c[r]=c[r]||!1,c[r]!=d&&(c[r]=d,a=!0,c.target[r]=d),this.options["attribute-list"].forEach(function(_){_!=r&&c[r]===!0&&(c[_]=!1,c.target[_]=!1)})}):(t.forEach(function(c){var d;d=!c[r],c[r]!=d&&(c[r]=d,a=!0)}),this.links.forEach(function(c){c[r]=c.target[r],this.options["attribute-list"].forEach(function(d){d!=r&&c[r]!==!0&&(c[d]=!1,c.target[d]=!1)})})),a&&(u||Vu(this),this.countHandler()&&(f={},f[r]=this.links.reduce(function(c,d){return c+(d[r]?1:0)},0),this.countUpdate(this,f,this.countHandler())),i&&this.placenodes()));return this._selectionCallback&&r!="tag"&&this._selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function kb(){return Fc(this.phylotree.getRootNode(),!0,!0).filter(t=>t[this.selection_attribute_name])}function Fc(t,r,i){let u=[];function l(a){Ae(a)?r&&a!=t&&u.push(a):(i&&a!=t&&u.push(a),a.children.forEach(l))}return l(t),u}function Kb(t){return t?(this._selectionCallback=t,this):this._selectionCallback}const Zb=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:Vb,getSelection:kb,modifySelection:Xb,nodeDropdownMenu:Yb,selectAllDescendants:Fc,selectionCallback:Kb},Symbol.toStringTag,{value:"Module"}));function mf(t){return function(){return t}}class $n{constructor(r,i={}){Oc(i["css-classes"]),this.css_classes=ve,this.phylotree=r,this.container=i.container,this.separation=function(l,a){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this._selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=gf,this.draw_scale_bar=null,this.edge_placer=_f,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(l){return this.nodeSpan(l)/this.rescale_nodeSpan};let u={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:mf(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(l){return typeof l=="number"?l+"px":l},this.options=ju(i,u),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(l){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(l=>{if(Ae(l)||this.showInternalName(l))return this.nodeSpan(l)}).reduce(function(l,a){return Math.min(a,l||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),Bc()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const r=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+r}collapse_node(r){zn(r)||(r.collapsed=!0)}set_size(r){if(!arguments.length)return this.size;let i=r;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=i[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=i[1]),this}initialize_svg(r){return this.svg!==r&&(Ee(r).select("svg").remove(),this.svg=I1("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Ee(this.container).on("click",i=>{this.handle_node_click(null)},!0)),this}update_layout(r,i){i&&(this.nodes=Mn(r),this.nodes.each(function(u){u.id=null})),this.update(),this.syncEdgeLabels()}update(r){var i=this;this.placenodes(),r=this.transitions(r);let u=0,l=this.svg.selectAll("."+ve["tree-container"]).data([0]);if(l=l.enter().append("g").attr("class",ve["tree-container"]).merge(l).attr("transform",_=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let _=this.svg.selectAll("."+ve["tree-scale-bar"]).data([0]);_.enter().append("g").attr("class",ve["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(_).attr("transform",x=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),_.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+ve["tree-scale-bar"]).remove();l=this.svg.selectAll("."+ve["tree-container"]).data([0]),this.updateCollapsedClades(r);let a=l.selectAll(Yu(ve)).data(this.links.filter(qu),_=>_.target.id||(_.target.id=++u));a.exit().remove(),a=a.enter().insert("path",":first-child").merge(a).each(function(_){i.drawEdge(this,_,r)});let f=l.selectAll(Mc(ve)).data(this.phylotree.nodes.descendants().filter(Gu),_=>_.id||(_.id=++u));if(f.exit().remove(),f=f.enter().append("g").attr("class",this.reclassNode).merge(f).attr("transform",_=>{const x=this.options.layout=="right-to-left"&&Ae(_);return _.screen_x=en(_),_.screen_y=Rn(_),this.d3PhylotreeSvgTranslate([x?0:_.screen_x,_.screen_y])}).each(function(_){i.drawNode(this,_,r)}).attr("transform",_=>{if(!tn(_.screen_x)&&!tn(_.screen_y))return"translate("+_.screen_x+","+_.screen_y+")"}),this.options["label-nodes-with-name"]&&(f=f.attr("id",_=>"node-"+_.name)),this.resizeSvg(this.phylotree,this.svg,r),this.options.brush){var c=l.selectAll("."+ve["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",ve["tree-selection-brush"]),d=G1().on("brush",(_,x)=>{var T=_.selection,N=this.links.filter(qu),$=N.filter((G,H)=>G.source.screen_x>=T[0][0]&&G.source.screen_x<=T[1][0]&&G.source.screen_y>=T[0][1]&&G.source.screen_y<=T[1][1]&&G.target.screen_x>=T[0][0]&&G.target.screen_x<=T[1][0]&&G.target.screen_y>=T[0][1]&&G.target.screen_y<=T[1][1]).map(G=>G.target);this.modifySelection(this.phylotree.links.map(G=>G.target),"tag",!1,$.length>0,"false"),this.modifySelection($,"tag",!1,!1,"true")}).on("end",()=>{});c.call(d)}if(this.syncEdgeLabels(),this.options.zoom){let _=_m().scaleExtent([.1,10]).on("zoom",x=>{Ee("."+ve["tree-container"]).attr("transform",T=>x.transform),Ee("."+ve["tree-scale-bar"]).attr("transform",T=>{let N=x.transform;return N.y-=10,N})});this.svg.call(_)}return this}_handle_single_node_layout(r){let i=this.nodeSpan(r)/this.rescale_nodeSpan;this.x=r.x=this.x+this.separation(this.last_node,r)+(this.last_span+i)*.5,this._extents[1][1]=Math.max(this._extents[1][1],r.y),this._extents[1][0]=Math.min(this._extents[1][0],r.y-i*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(r.x-this.save_x)*this.options.compression+this.save_span+(i*.5+this.separation(this.last_node,r))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+i*.5+this.separation(this.last_node,r)),this.last_node=r,this.last_span=i}tree_layout(r){if(Cc(r))return;let i=Ae(r);r.text_angle=null,r.text_align=null,r.radius=null,r.angle=null;let u=!1;if(r.parent)if(this.do_scaling){if(u)return 0;if(r.y=this.phylotree.branch_length_accessor(r),typeof r.y>"u")return u=!0,0;r.y+=r.parent.y}else r.y=i?this.max_depth:r.depth;else this.x=0,r.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(i&&this._handle_single_node_layout(r),!i)if(zn(r)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(r),this.is_under_collapsed_parent=!1,typeof r.x=="number"){r.x=this.save_x+(r.x-this.save_x)*this.options.compression+this.save_span,r.collapsed=[[r.x,r.y]];var l=a=>{a.hidden=!0,Ae(a)?(this.x=a.x=this.save_x+(a.x-this.save_x)*this.options.compression+this.save_span,r.collapsed.push([a.x,a.y])):a.children.map(l)};this.x=this.save_x,l(r),r.collapsed.splice(1,0,[this.save_x,r.y]),r.collapsed.push([this.x,r.y]),r.collapsed.push([r.x,r.y]),r.hidden=!1}}else this.process_internal_node(r);return r.x}process_internal_node(r){let i=0;if(this.showInternalName(r)){let u=r.children.length/2>>0,l=0,a=!1;for(let f=0;f<r.children.length;f++)typeof this.tree_layout(r.children[f])=="number"&&l++,l>=u&&!a&&(this._handle_single_node_layout(r),a=!0);l==0?(r.notshown=!0,r.x=void 0):a||this._handle_single_node_layout(r)}else r.x=r.children.map(this.tree_layout.bind(this)).reduce((u,l)=>typeof l=="number"?u+l:(i+=1,u),0),i==r.children.length?(r.notshown=!0,r.x=void 0):r.x/=r.children.length-i}do_lr(r){if(this.radial()&&r&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),r=!0;let i=this.size[1]-this.offsets[1]-this.options["left-offset"];i*.5<this.label_width&&(this.shown_font_size*=i*.5/this.label_width,this.label_width=i*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let r=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=x1(this.phylotree.nodes.descendants(),u=>u.depth),this.do_scaling;let i=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],i=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=Gt(df,this.radial_center),this.edge_placer=fb;let u=null,l=null,a=null,f=0,c=this._extents[0][1]*this.scales[0],d=function(N,$,G,H,C){return C=C||0,Math.sqrt(($-N)*($-N)+2*(N+C)*($+C)*(1-Math.cos(G-H)))},_=0;this.phylotree.nodes.each(N=>{let $=N.x*this.scales[0];N.angle=2*Math.PI*$/c,N.text_angle=N.angle-Math.PI/2,N.text_angle=N.text_angle>0&&N.text_angle<Math.PI,N.text_align=N.text_angle?"end":"start",N.text_angle=(N.text_angle?180:0)+N.angle*180/Math.PI}),this.do_lr(i),this.phylotree.nodes.each(N=>{N.radius=N.y*this.scales[1]/this.size[1],_=Math.max(N.radius,_)});let x=0;this.phylotree.nodes.each(N=>{if(!N.children){let $=N.x*this.scales[0];if(u!==null){let G=$-l,H=d(N.radius,a,N.angle,u,x),C=H>0?G/H:10*this.options["max-radius"];if(C>this.options["max-radius"]){let y=G/this.options["max-radius"],R=N.radius+a,P=N.radius*a-(y*y-(a-N.radius)*(a-N.radius))/2/(1-Math.cos(u-N.angle)),z=Math.sqrt(R*R-4*P);x=Math.min(this.options["annular-limit"]*_,(-R+z)/2),f=this.options["max-radius"]}else f=Math.max(f,C)}u=N.angle,l=$,a=N.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(c/2/Math.PI,f)),i&&(this.radius=Math.min(this.radius,(Math.min(c,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*x)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=Gt(df,this.radial_center);let T=1;x&&(T=_/(_+x),this.radius*=T),this.phylotree.nodes.each(N=>{if(pf(N,this.radius,x,this.radial_center,this.scales,this.size),_=Math.max(_,N.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,N.radius+this.nodeBubbleSize(N)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,N.radius),N.collapsed){N.collapsed=N.collapsed.map(G=>{let H={};return H.x=G[0],H.y=G[1],H=pf(H,this.radius,x,this.radial_center,this.scales,this.size),[H.x,H.y]});let $=N.collapsed[1];N.collapsed=N.collapsed.filter(function(G,H){return H<3||H>N.collapsed.length-4?!0:Math.sqrt(Math.pow(G[0]-$[0],2)+Math.pow(G[1]-$[1],2))>3?($=G,!0):!1})}}),this.size[0]=this.radial_center+this.radius/T,this.size[1]=this.radial_center+this.radius/T}else this.do_lr(),this.draw_branch=gf,this.edge_placer=_f,this.right_most_leaf=0,this.phylotree.nodes.each(u=>{if(u.x*=this.scales[0],u.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(u.y=this._extents[1][1]*this.scales[1]-u.y),Ae(u)&&(this.right_most_leaf=Math.max(this.right_most_leaf,u.y+this.nodeBubbleSize(u))),u.collapsed){u.collapsed.forEach(a=>{a[0]*=this.scales[0],a[1]*=this.scales[1]*.8});let l=u.collapsed[1][0];u.collapsed=u.collapsed.filter(function(a,f){return f<3||f>u.collapsed.length-4?!0:a[0]-l>3?(l=a[0],!0):!1})}});if(this.draw_scale_bar){let u,l;if(this.radial()){if(l=Math.min(this.radius/5,50),u=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*l/this.radius)/Math.log(10))),l=u*(this.radius/this._extents[1][1]),l<30){let c=Math.ceil(30/l);l*=c,u*=c}}else u=this._extents[1][1],l=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let a=E1().domain([0,u]).range([0,l]),f=A1(".2f");if(this.draw_scale_bar=T1().scale(a).tickFormat(function(c){return c===0?"":f(c)}),this.radial())this.draw_scale_bar.tickValues([u]);else{let c=function(_,x){return Math.round(_)},d=a.ticks();d=d.length>1?d[1]:d[0],this.draw_scale_bar.ticks(Math.min(10,c(l/(this.shown_font_size*f(d).length*2))))}}else this.draw_scale_bar=null;return this}spacing_x(r,i){return arguments.length?(this.fixed_width[0]!=r&&r>=this.options["minimum-per-node-spacing"]&&r<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=r,i||this.placenodes()),this):this.fixed_width[0]}spacing_y(r,i){return arguments.length?(this.fixed_width[1]!=r&&r>=this.options["minimum-per-level-spacing"]&&r<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=r,i||this.placenodes()),this):this.fixed_width[1]}_label_width(r){r=r||this.shown_font_size;let i=0;return this.phylotree.nodes.descendants().filter(Gu).forEach(u=>{let l=12+this._nodeLabel(u).length*r*.8;u.angle!==null&&(l*=Math.max(Math.abs(Math.cos(u.angle)),Math.abs(Math.sin(u.angle)))),i=Math.max(l,i)}),i}font_size(r){return arguments.length?(this.font_size=r===void 0?12:r,this):this.font_size}scale_bar_font_size(r){return arguments.length?(this.scale_bar_font_size=r===void 0?12:r,this):this.scale_bar_font_size}node_circle_size(r,i){return arguments.length?(this.options.node_circle_size=mf(r===void 0?3:r),this):this.options.node_circle_size}css(r){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var i={};return i[r[0]]=r[1],this.css(i)}for(var u in ve)u in r&&r[u]!=ve[u]&&(ve[u]=r[u]);return this}transitions(r){return r!==void 0?r:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(r,i){if(!arguments.length)return this.css_classes;let u=!1;for(var l in ve)l in r&&r[l]!=this.css_classes[l]&&(u=!0,this.css_classes[l]=r[l]);return i&&u&&this.layout(),this}layout(r){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(r,i){this.nodeDropdownMenu(r,this.container,this,this.options,i)}refresh(){if(this.svg){let i=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(Yu(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&i.each(u=>{this.edge_styler(Ee(this),u)})}return this}countHandler(r){return arguments.length?(this.count_listener_handler=r,this):this.count_listener_handler}style_nodes(r){return arguments.length?(this.node_styler=r,this):this.node_styler}style_edges(r){return arguments.length?(this.edge_styler=r.bind(this),this):this.edge_styler}itemSelected(r,i){return r[i]||!1}show(){return this.svg.node()}}Bt($n.prototype,Cb);Bt($n.prototype,Ib);Bt($n.prototype,Bb);Bt($n.prototype,qb);Bt($n.prototype,Zb);Bt($n.prototype,yb);function Jb(t,r,i){return this.nodes.sum(function(u){return u.value}).sort(t),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function Qb(t){var r;return t=t.map(function(i){return typeof i=="string"?i:i.data.name}),this.traverse_and_compute(function(i){i.children?i.parent?(i.data.mrca=mc(...i.descendants().map(u=>u.data.mrca)),!r&&i.data.mrca.length==t.length&&(r=i)):r||(r=i):i.data.mrca=yc([i.data.name],t)}),r}let qe=class{constructor(t,r={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=$u,this.branch_length=$u,this.logger=r.logger||console,this.selection_attribute_name="selected";var i=r.type||void 0,u=[],l=this;if(sr(i))i in Au?u=Au[i](t,r):l.logger.error("type "+i+" not in registry! Available types are "+Ue(Au));else if(Xe(i))try{u=i(t,r)}catch{l.logger.error("Could not parse custom format!")}else t.name=="root"?u={json:t,error:null}:typeof t!="string"?u=t:t.contentType=="application/xml"?u=Sc(t):(this.newick_string=t,u=Pr(t,r));if(!u.json)l.nodes=[];else{l.nodes=Mn(u.json);let a={};l.nodes.each(f=>{f.data.annotation&&(a[f.data.annotation]=!0)}),l.parsed_tags=Object.keys(a)}return l.links=l.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(a=>1)),l}json(t){var r=0;this.traverse_and_compute(function(u){u.json_export_index=r++},t);var i=new Array(r);return r=0,this.traverse_and_compute(function(u){let l=Xf(u);delete l.json_export_index,u.parent&&(l.parent=u.parent.json_export_index),u.children&&(l.children=De(u.children,function(a){return a.json_export_index})),i[r++]=l},t),this.traverse_and_compute(function(u){delete u.json_export_index},t),JSON.stringify(i)}traverse_and_compute(t,r,i,u){r=r||"post-order";function l(c){tn(c)||Ic(c,t,u)}function a(c){Qw(c,t,u)}function f(c){Dw(c,t,u)}return r=="pre-order"?r=a:r=="in-order"?r=f:r=l,r(i||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(t){this.nodes=t}render(t){return this.display=new $n(this,t),this.display}};qe.prototype.isLeafNode=Ae;qe.prototype.selectAllDescendants=Tc;qe.prototype.mrca=Qb;qe.prototype.hasBranchLengths=eb;qe.prototype.getBranchLengths=tb;qe.prototype.branchName=sb;qe.prototype.normalizeBranchLengths=rb;qe.prototype.scaleBranchLengths=ib;qe.prototype.getNewick=Yw;qe.prototype.resortChildren=Jb;qe.prototype.setBranchLength=nb;qe.prototype.maxParsimony=Jw;qe.prototype.getTipLengths=Zw;qe.prototype.leftChildRightSibling=jw;Bt(qe.prototype,qw);Bt(qe.prototype,ob);Bt(qe.prototype,kw);function Uc(t){var r=t.branch_length_accessor;if(!r)throw"A non-null branch lengths accessor function is required for this operation";var i=0;t.traverse_and_compute(function(a){if(a.cot_computed_length=r(a),a.parent&&tn(a.cot_computed_length))throw"Non-null branch lengths are required for this operation: missing branch length at node "+a.data.name;t.isLeafNode(a)?(a.cot_leaf_index=i++,a.cot_path_to_leaves_below={},a.cot_path_to_leaves_below[a.cot_leaf_index]=0,a.cot_path_to_leaves_above={}):(a.cot_path_to_leaves_below={},a.cot_path_to_leaves_above={})}),t.traverse_and_compute(function(a){a.parent&&we(a.cot_path_to_leaves_below,function(f,c){a.parent.cot_path_to_leaves_below[c]=f+a.cot_computed_length})});var u=t.getRootNode();function l(a){for(var f=0;f<a.children.length;f++)for(var c=0;c<a.children.length;c++)f!=c&&we(a.children[c].cot_path_to_leaves_below,function(d,_){a.children[f].cot_path_to_leaves_above&&(a.children[f].cot_path_to_leaves_above[_]=d+a.children[c].cot_computed_length)})}return l(u),t.traverse_and_compute(function(a){a.parent&&(we(a.parent.cot_path_to_leaves_above,function(f,c){a.cot_path_to_leaves_above[c]=f+a.parent.cot_computed_length}),t.isLeafNode(a)||l(a))},"pre-order"),i}function fx(t){let r=t.getTips(),i=De(r,u=>u.depth);return Ln(i,function(u,l){return u+l},0)}function cx(t,r){r=r||2;var i=Uc(t),u=Number.MAX_VALUE,l=0,a=null;return r==2?t.traverse_and_compute(function(f){if(f.parent){var c=0,d=0,_=0,x=0,T=0;we(f.cot_path_to_leaves_below,function(H){c+=H,d+=H*H,T++}),we(f.cot_path_to_leaves_above,function(H){_+=H,x+=H*H});var N=i-T,$=(_-c+f.cot_computed_length*N)/i;$<0?$=0:$>f.cot_computed_length&&($=f.cot_computed_length);var G=x+d+2*(_*(f.cot_computed_length-$)+c*$)+T*$*$+(f.cot_computed_length-$)*(f.cot_computed_length-$)*N;G<u&&(a=f,l=$/f.cot_computed_length,u=G),delete f.cot_computed_length,delete f.cot_path_to_leaves_below,delete f.cot_path_to_leaves_above,delete f.cot_leaf_index}}):t.traverse_and_compute(function(f){if(f.parent)for(var c=f.cot_computed_length>0?f.cot_computed_length*.05:.1,d=0;d<f.cot_computed_length;){var _=0;we(f.cot_path_to_leaves_below,function(x){_+=Math.pow(x+d,r)}),we(f.cot_path_to_leaves_above,function(x){_+=Math.pow(x+(f.cot_computed_length-d),r)}),_<u&&(a=f,l=d/f.cot_computed_length,u=_),d+=c}}),{location:a,breakpoint:l,distance:u}}function hx(t){if(!t.hasBranchLengths())throw"Center of tree calculation cannot be performed on trees that do not have fully specified branch lengths";var r=t.branch_length;t.traverse_and_compute(function(f){if(f.parent){var c=r(f),d;t.isLeafNode(f)?(d=f,f.max_path=0,f.max_path_terminus=f):(c+=f.max_path,d=f.max_path_terminus),(!f.parent.max_path||f.parent.max_path<c)&&(f.parent.max_path=c,f.parent.max_path_terminus=d)}});var i=t.getRootNode(),u=0;if(i.children.forEach(function(f){if(f.max_path_terminus!==i.max_path_terminus){var c=f.max_path+r(f);c>=u&&(u=c)}}),i.max_path>u){u=(u+i.max_path)*.5;for(var l=i.max_path_terminus;;){var a=r(l);if(a<=u)u-=a,l=l.parent;else return{location:l,breakpoint:u/a}}}return{location:i,breakpoint:0}}function Db(t){t.traverse_and_compute(function(r){t.isLeafNode(r)&&(r.data.copy_number=1)})}function Xu(t,r,i,u,l){var a=t.branch_length(r),f=!1;if(i||(u=r.data.rootToTip,l=0,f=!0),r.children)for(var c=0;c<r.children.length;c++)r.children[c]!=i?Xu(t,r.children[c],r,u,l):f=!0;r.data.rtta=r.data.rootToTip-u+l,f&&(u-=a,l+=a),r.parent&&f&&Xu(t,r.parent,r,u,l)}function px(t){var r=[],i=0,u=0;Db(t),jb(t),t.traverse_and_compute(function(a){t.isLeafNode(a)&&!Ii(a.data.decimal_date_value)&&r.push([a.data.decimal_date_value,a.data.rtta,a.data.copy_number])});let l=yf(r);return t.traverse_and_compute(function(a){if(t.isLeafNode(a)&&!Ii(a.data.decimal_date_value)){Xu(t,a,null,0,0),r=[],t.traverse_and_compute(function(d){t.isLeafNode(d)&&!Ii(d.data.decimal_date_value)&&r.push([d.data.decimal_date_value,d.data.rtta,d.data.copy_number])});var f=yf(r),c=f.r2;c>i&&(i=c,u=a,l=f)}}),{root:u,fit:l}}function yf(t){var r=t.reduce(function(T,N){return N[2]+T},0),i=t.reduce(function(T,N){return N[2]*N[0]+T},0),u=t.reduce(function(T,N){return N[2]*N[1]+T},0),l=i/r,a=u/r,f=0,c=0,d=0;t.forEach(function(T){var N=T[0]-l;c+=T[2]*N*N,f+=T[2]*N*T[1],d+=T[2]*(T[1]-a)*(T[1]-a)}),f/=c;var _=(u-i*f)/r,x=0;return t.forEach(function(T){var N=T[1]-_-f*T[0];x+=T[2]*N*N}),{intercept:_,slope:f,r2:1-x/d,"var (intercept)":Math.sqrt((1+i*i/(r*c))/r),"var (slope)":Math.sqrt(1/c)}}function jb(t){var r=t.branch_length_accessor,i=0;t.traverse_and_compute(l=>{if(l.parent&&(l.data._computed_length=r(l),!ir(l.data._computed_length)))throw"rootToTip cannot be run on trees with missing branch lengths";t.isLeafNode(l)&&(l.data.leaf_index=i++),"r2t"in l.data&&delete l.data.r2t}),t.traverse_and_compute(l=>{l.parent&&("r2t"in l.parent.data||(l.parent.data.r2t={}),t.isLeafNode(l)?l.parent.data.r2t[l.data.leaf_index]=l.data._computed_length:(we(l.data.r2t,function(a,f){l.parent.data.r2t[f]=a+l.data._computed_length}),delete l.data.r2t),delete l.data._computed_length)});var u=t.getRootNode().data.r2t;return t.traverse_and_compute(l=>{t.isLeafNode(l)&&(l.data.rootToTip=u[l.data.leaf_index]||0,delete l.data.leaf_index)}),delete t.getRootNode().data.r2t,t}const ex=N1("%Y%m%d"),tx=/([0-9]{4}).?([0-9]{2}).?([0-9]{2})$/g,nx=function(t){if(Ae(t)&&"name"in t){let r=tx.exec(t.name);if(r)return r[1]+r[2]+r[3]}return null},dx=function(t,r,i=ex){return r=r||nx,t.traverse_and_compute(function(u){var l=r(u);if(l)try{u.data.date_value=i(l);var a=u.data.date_value.getFullYear(),f=new Date(a,0,1),c=new Date(a+1,0,1);u.data.decimal_date_value=a+(u.data.date_value-f)/(c-f);return}catch{}u.data.date_value=null,u.data.decimal_date_value=null}),t};function gx(t,r,i,u,l){u=u||t.getRootNode(),l=ir(l)?l:1;let a=t.branch_length;t.traverse_and_compute(function(c){if(c.parent){if(c._computed_length=a(c),!ir(c._computed_length))throw"clusterPicker cannot be run on trees with missing branch lengths";c.max_path_length=0}}),t.traverse_and_compute(function(c){c.parent&&(c.parent.max_path_length=Math.max(c.parent.max_path_length,c.max_path_length+c._computed_length))});var f=[];return t.traverse_and_compute(Hi,"pre-order",u,function(c){if(!t.isLeafNode(c)){var d=sr(c.data.bootstrap_values)?+c.data.bootstrap_values:l;if(d>=r){var _=Ln(c.children,function(x,T){return T.max_path_length+T._computed_length+x},0);if(_<=i)return f.push({root:c,diameter:_,bootstrap:d}),!0}}return!1}),t.traverse_and_compute(function(c){c.parent&&(delete c._computed_length,delete c.max_path_length)},"post-order",u),we(f,function(c){c.members=[],t.traverse_and_compute(function(d){t.isLeafNode(d)&&c.members.push(d)},"post-order",c.root)}),f}function _x(t,r,i,u,l){u=ir(u)?u:1;var a=Uc(t),f=t.getRootNode().children[0],c=Number.MAX_VALUE,d=Number.MAX_VALUE;if(!(i>0&&i<1))throw"Invalid percentile threshold in perform_phylopart";t.traverse_and_compute(function(y){t.isLeafNode(y)&&(y.cot_computed_length<c?(c<d&&(d=c),c=y.cot_computed_length):y.cot_computed_length<d&&(d=y.cot_computed_length))}),c+=d;var _=Ln(f.cot_path_to_leaves_below,function(y,R){return R>y?R:y},0)+Ln(f.cot_path_to_leaves_above,function(y,R){return R>y?R:y},0)+f.cot_computed_length,x=_-c;tn(l)&&(l=Math.min(.001,x/100));var T=(x/l>>0)+1;T>500&&(T=500,l=x/T);var N=t.getRootNode();N.paths_to_leaves=new Array(a),we(N.children,function(y){we(N.cot_path_to_leaves_below,function(R,P){N.paths_to_leaves[P]=R+y.cot_computed_length})}),t.traverse_and_compute(function(y){if(!t.isLeafNode(y)){y.histogram=new Array(T);for(var R=0;R<T;R++)y.histogram[R]=0;if(y.parent){var P=0;y.paths_to_leaves=[],we(y.cot_path_to_leaves_below,function(z,K){y.paths_to_leaves[P++]=z})}}delete y.cot_path_to_leaves_above,delete y.cot_path_to_leaves_below}),t.traverse_and_compute(function(y){if(!t.isLeafNode(y)){for(var R=0;R<y.paths_to_leaves.length;R++)for(var P=R+1;P<y.paths_to_leaves.length;P++){var z=y.paths_to_leaves[R]+y.paths_to_leaves[P];y.histogram[(z-c)/l>>0]++}y.leaf_count=y.paths_to_leaves.length,delete y.paths_to_leaves}});for(var $=(a-1)*a/2*i,G=0;G<T-1&&$>N.histogram[G];G++)$-=N.histogram[G];var H=c+(G+(N.histogram[G]-$)/N.histogram[G])*l,C=[];return t.traverse_and_compute(Hi,"pre-order",null,function(y){if(!t.isLeafNode(y)){var R=sr(y.data.bootstrap_values)?+y.data.bootstrap_values:u;if(R>=r){for(var P=y.leaf_count*(y.leaf_count-1)*.25,z=0;z<T-1&&P>y.histogram[z];z++)P-=y.histogram[z];var K=c+(z+(y.histogram[z]-P)/y.histogram[z])*l;if(K<=H)return C.push({root:y,median:K,bootstrap:R}),!0}}return!1}),t.traverse_and_compute(function(y){t.isLeafNode(y)||"histogram"in y&&(delete y.histogram,delete y.leaf_count)}),we(C,function(y){y.members=[],t.traverse_and_compute(function(R){t.isLeafNode(R)&&y.members.push(R)},"post-order",y.root)}),C}function vx(t){let r=re.split(t,`
`);return re.chain(r).map((u,l)=>u.startsWith(">")?l:-1).filter(u=>u!=-1).map((u,l,a)=>re.slice(r,a[l],a[l+1])).keyBy(u=>re.trim(u[0],">")).mapValues(u=>re.tail(u).join("")).value()}function wf(t,r){let i=[];for(let u of re.range(r.length))if(u!=t){let l=[];for(let a of re.range(r[u].length))a!=t&&l.push(r[u][a]);i.push(l)}return i}function rx(t,r,i){let u=re.chunk(re.fill(Array(i*i),0),i);for(let l of re.range(i))for(let a of re.range(re.parseInt(l)+1,i))u[l][a]=(i-2)*t[l][a]-r[l]-r[a],u[a][l]=u[l][a];return u}function ix(t,r){let i=-1,u=-1,l=1/0;for(let a of re.range(r))for(let f of re.range(i,r))t[a][f]<l&&(i=a,u=f,l=t[i][u]);return[i,u,l]}function sx(t,r){let i=re.chunk(Array(r*r),r);for(let u of re.range(r))for(let l of re.range(parseInt(u)+1,r))i[u][l]=(t[u]-t[l])/(r-2),i[l][u]=i[u][l];return i}function mx(t){let r=re.keys(t)[0],i=t[r].length;return re.mapValues(t,u=>re.map(t,l=>re.sum(re.map(re.range(i),a=>u[a]!=l[a]&&u[a]!="-"&&l[a]!="-"))))}function ux(t){return re.map(t,re.sum)}function ax(t,r,i){if(r<=2){let u=new qe(""),l=u.getNodes(),a=t[0][1]/2,f=u.createNode(i[0],[null,[a]]),c=u.createNode(i[1],[null,[a]]);return u.addChild(l,f),u.addChild(l,c),u}else{let u=r,l=ux(t),a=rx(t,l,u),[f,c,d]=ix(a,u),_=sx(l,u),x=(t[f][c]+_[f][c])/2,T=(t[f][c]-_[f][c])/2,N=re.concat(0,re.filter(re.map(re.range(r),z=>{if(z!=f&&z!=c)return .5*(t[z][f]+t[z][c]-t[f][c])}),re.isNumber)),$=i[f],G=i[c],H="InternalNode0",C=re.filter(i,z=>re.includes(z,"InternalNode"));if(C.length){let z=re.max(re.map(C,K=>re.split(K,"InternalNode")[1]));H="InternalNode"+ ++z}i.unshift(H),t=wf(re.max([f,c]),t),t=wf(re.min([f,c]),t),t.unshift(N),re.each(re.range(1,r-1),z=>t[z].unshift(N[z])),re.remove(i,z=>z==$||z==G);let y=ax(t,u-1,i),R=y.createNode($,[null,[x]]),P=y.createNode(G,[null,[T]]);if(y.getNodeByName(H)){let z=y.getNodeByName(H);y.addChild(z,R),y.addChild(z,P)}else{let z=y.createNode(H,[null,[0]]);y.addChild(y.getNodes(),z),y.addChild(z,R),y.addChild(z,P)}return y}}export{cx as centerOfTree,gx as clusterPicker,hx as computeMidpoint,dx as extract_dates,px as fitRootToTip,mx as getDistanceMatrix,Yw as getNewick,Dw as inOrder,jw as leftChildRightSibling,Xw as loadAnnotations,ax as neighborJoining,Pr as newickParser,Uc as pairwise_distances,Vw as parseAnnotations,vx as parseFasta,_x as phylopart,qe as phylotree,Ic as postOrder,Qw as preOrder,jb as rootToTip,fx as sackin};
